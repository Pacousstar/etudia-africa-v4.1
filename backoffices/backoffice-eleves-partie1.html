<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Backoffice √âl√®ves - √âtudIA V4.1 | PACOUSSTAR</title>
    <meta name="description" content="Espace √©l√®ve avec IA DeepSeek R1 - √âtudIA V4.1 Production">
    <meta name="keywords" content="√©ducation, IA, C√¥te d'Ivoire, DeepSeek R1, backoffice √©l√®ve">
    
    <!-- ===============================
         üî• D√âBUT PARTIE 1/6 : HTML HEAD + CSS BASE PRODUCTION
         =============================== -->
    
    <!-- Favicon et PWA -->
    <link rel="icon" type="image/x-icon" href="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzIiIGhlaWdodD0iMzIiIHZpZXdCb3g9IjAgMCAzMiAzMiIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHJlY3Qgd2lkdGg9IjMyIiBoZWlnaHQ9IjMyIiByeD0iOCIgZmlsbD0iIzAwN0FGRiIvPgo8cGF0aCBkPSJNMTYgOEMxOS4zMTM3IDggMjIgMTAuNjg2MyAyMiAxNEMyMiAxNy4zMTM3IDE5LjMxMzcgMjAgMTYgMjBDMTIuNjg2MyAyMCAxMCAxNy4zMTM3IDEwIDE0QzEwIDEwLjY4NjMgMTIuNjg2MyA4IDE2IDhaIiBmaWxsPSJ3aGl0ZSIvPgo8L3N2Zz4K">
    
    <!-- Fonts Google -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    
    <!-- Font Awesome Icons -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    
    <style>
        /* ============================================
           üé® VARIABLES CSS - DESIGN SYSTEM √âTUDIA V4.1
           ============================================ */
        :root {
            /* üéØ Couleurs Principales √âtudIA */
            --etudia-primary: #6366F1;
            --etudia-secondary: #8B5CF6;
            --etudia-orange: #FF6B35;
            --etudia-success: #10B981;
            --etudia-warning: #F59E0B;
            --etudia-danger: #EF4444;
            --etudia-blue: #3B82F6;
            
            /* üåà Variations Couleurs */
            --primary-50: #EEF2FF;
            --primary-100: #E0E7FF;
            --primary-200: #C7D2FE;
            --primary-300: #A5B4FC;
            --primary-400: #818CF8;
            --primary-500: #6366F1;
            --primary-600: #4F46E5;
            --primary-700: #4338CA;
            --primary-800: #3730A3;
            --primary-900: #312E81;
            
            /* üé® Couleurs Syst√®me - Mode Clair */
            --bg-primary: #FFFFFF;
            --bg-secondary: #F8FAFC;
            --bg-tertiary: #F1F5F9;
            --text-primary: #0F172A;
            --text-secondary: #475569;
            --text-tertiary: #64748B;
            --border-color: #E2E8F0;
            --border-hover: #CBD5E1;
            
            /* üìê Spacing & Layout */
            --sidebar-width: 280px;
            --sidebar-collapsed: 80px;
            --header-height: 80px;
            --border-radius: 12px;
            --border-radius-lg: 16px;
            
            /* üé≠ Shadows Tesla */
            --shadow-sm: 0 1px 2px 0 rgba(0, 0, 0, 0.05);
            --shadow-md: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
            --shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
            --shadow-xl: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
            --shadow-2xl: 0 25px 50px -12px rgba(0, 0, 0, 0.25);
            
            /* ‚ö° Animations */
            --transition-fast: 0.15s ease-in-out;
            --transition-normal: 0.3s ease-in-out;
            --transition-slow: 0.5s ease-in-out;
            
            /* üåô Glassmorphism */
            --glass-bg: rgba(255, 255, 255, 0.9);
            --glass-border: rgba(255, 255, 255, 0.2);
            --glass-backdrop: blur(10px);
        }
        
        /* üåô Mode Sombre */
        [data-theme="dark"] {
            --bg-primary: #0F172A;
            --bg-secondary: #1E293B;
            --bg-tertiary: #334155;
            --text-primary: #F8FAFC;
            --text-secondary: #CBD5E1;
            --text-tertiary: #94A3B8;
            --border-color: #475569;
            --border-hover: #64748B;
            --glass-bg: rgba(15, 23, 42, 0.9);
            --glass-border: rgba(255, 255, 255, 0.1);
        }
        
        /* ============================================
           üîÑ RESET & BASE STYLES
           ============================================ */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        html {
            font-size: 16px;
            scroll-behavior: smooth;
        }
        
        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
            background: var(--bg-secondary);
            color: var(--text-primary);
            line-height: 1.6;
            overflow-x: hidden;
            transition: all var(--transition-normal);
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }
        
        /* ============================================
           üèóÔ∏è LAYOUT PRINCIPAL
           ============================================ */
        .app-container {
            display: flex;
            min-height: 100vh;
            position: relative;
        }
        
        /* ============================================
           üì± SIDEBAR NAVIGATION
           ============================================ */
        .sidebar {
            width: var(--sidebar-width);
            background: linear-gradient(145deg, var(--etudia-primary), var(--etudia-secondary));
            color: white;
            position: fixed;
            top: 0;
            left: 0;
            height: 100vh;
            overflow-y: auto;
            transition: all var(--transition-normal);
            z-index: 1000;
            box-shadow: var(--shadow-xl);
            backdrop-filter: var(--glass-backdrop);
        }
        
        .sidebar.collapsed {
            width: var(--sidebar-collapsed);
        }
        
        .sidebar-header {
            padding: 1.5rem;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            position: relative;
        }
        
        .logo {
            display: flex;
            align-items: center;
            gap: 12px;
            transition: all var(--transition-normal);
        }
        
        .logo-icon {
            width: 44px;
            height: 44px;
            background: rgba(255, 255, 255, 0.2);
            border-radius: var(--border-radius);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            flex-shrink: 0;
            backdrop-filter: var(--glass-backdrop);
        }
        
        .logo-text {
            font-size: 1.25rem;
            font-weight: 700;
            opacity: 1;
            transition: all var(--transition-normal);
        }
        
        .sidebar.collapsed .logo-text {
            opacity: 0;
            width: 0;
        }
        
        /* üîÑ Toggle Button */
        .toggle-btn {
            position: absolute;
            top: 50%;
            right: -15px;
            transform: translateY(-50%);
            width: 30px;
            height: 30px;
            background: var(--etudia-primary);
            border: 2px solid white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            font-size: 0.875rem;
            transition: all var(--transition-normal);
            z-index: 1001;
            color: white;
        }
        
        .toggle-btn:hover {
            background: var(--etudia-secondary);
            transform: translateY(-50%) scale(1.1);
            box-shadow: var(--shadow-lg);
        }
        
        /* üë§ Profil Utilisateur */
        .user-profile {
            padding: 1rem 1.5rem;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .user-info {
            display: flex;
            align-items: center;
            gap: 12px;
        }
        
        .user-avatar {
            width: 48px;
            height: 48px;
            background: linear-gradient(45deg, var(--etudia-orange), var(--etudia-success));
            border-radius: var(--border-radius);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.25rem;
            font-weight: 600;
            flex-shrink: 0;
            color: white;
        }
        
        .user-details {
            opacity: 1;
            transition: all var(--transition-normal);
        }
        
        .sidebar.collapsed .user-details {
            opacity: 0;
            width: 0;
        }
        
        .user-name {
            font-size: 0.875rem;
            font-weight: 600;
            margin-bottom: 2px;
        }
        
        .user-role {
            font-size: 0.75rem;
            opacity: 0.8;
        }
        
        .user-stats {
            display: flex;
            gap: 16px;
            margin-top: 8px;
            opacity: 1;
            transition: all var(--transition-normal);
        }
        
        .sidebar.collapsed .user-stats {
            opacity: 0;
        }
        
        .stat-item {
            text-align: center;
        }
        
        .stat-value {
            font-size: 0.875rem;
            font-weight: 600;
            display: block;
        }
        
        .stat-label {
            font-size: 0.625rem;
            opacity: 0.8;
        }
        
        /* üß≠ Navigation Menu */
        .nav-menu {
            padding: 1rem 0;
        }
        
        .nav-section {
            margin-bottom: 1.5rem;
        }
        
        .nav-section-title {
            padding: 0 1.5rem 0.5rem;
            font-size: 0.75rem;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.05em;
            opacity: 0.8;
            transition: all var(--transition-normal);
        }
        
        .sidebar.collapsed .nav-section-title {
            opacity: 0;
            height: 0;
            padding: 0;
            margin: 0;
        }
        
        .nav-item {
            position: relative;
            margin: 2px 8px;
        }
        
        .nav-link {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 12px 16px;
            color: rgba(255, 255, 255, 0.9);
            text-decoration: none;
            border-radius: var(--border-radius);
            transition: all var(--transition-normal);
            cursor: pointer;
            font-size: 0.875rem;
            position: relative;
        }
        
        .nav-link:hover {
            background: rgba(255, 255, 255, 0.1);
            color: white;
            transform: translateX(4px);
            box-shadow: var(--shadow-md);
        }
        
        .nav-link.active {
            background: rgba(255, 255, 255, 0.2);
            color: white;
            box-shadow: var(--shadow-lg);
        }
        
        .nav-link.active::before {
            content: '';
            position: absolute;
            left: 0;
            top: 50%;
            transform: translateY(-50%);
            width: 4px;
            height: 24px;
            background: white;
            border-radius: 0 4px 4px 0;
        }
        
        .nav-icon {
            width: 20px;
            height: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            flex-shrink: 0;
        }
        
        .nav-text {
            opacity: 1;
            transition: all var(--transition-normal);
        }
        
        .sidebar.collapsed .nav-text {
            opacity: 0;
            width: 0;
        }
        
        .nav-badge {
            background: var(--etudia-danger);
            color: white;
            font-size: 0.625rem;
            font-weight: 600;
            padding: 2px 6px;
            border-radius: 10px;
            margin-left: auto;
            opacity: 1;
            transition: all var(--transition-normal);
        }
        
        .sidebar.collapsed .nav-badge {
            opacity: 0;
        }
        
        /* ============================================
           üì± MAIN CONTENT AREA
           ============================================ */
        .main-content {
            flex: 1;
            margin-left: var(--sidebar-width);
            background: var(--bg-secondary);
            min-height: 100vh;
            transition: all var(--transition-normal);
        }
        
        .sidebar.collapsed + .main-content {
            margin-left: var(--sidebar-collapsed);
        }
        
        /* üéØ Header Principal */
        .header {
            background: var(--bg-primary);
            padding: 1.5rem 2rem;
            border-bottom: 1px solid var(--border-color);
            box-shadow: var(--shadow-sm);
            position: sticky;
            top: 0;
            z-index: 100;
            backdrop-filter: var(--glass-backdrop);
        }
        
        .header-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
            gap: 2rem;
        }
        
        .header-info h1 {
            font-size: 1.875rem;
            font-weight: 700;
            color: var(--text-primary);
            margin: 0 0 4px 0;
        }
        
        .header-info p {
            font-size: 1rem;
            color: var(--text-secondary);
            margin: 0;
        }
        
        .header-actions {
            display: flex;
            align-items: center;
            gap: 1rem;
        }
        
        /* üöÄ Quick Actions */
        .quick-actions {
            display: flex;
            gap: 8px;
        }
        
        .quick-action {
            width: 44px;
            height: 44px;
            background: var(--bg-secondary);
            border: 1px solid var(--border-color);
            border-radius: var(--border-radius);
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all var(--transition-fast);
            color: var(--text-secondary);
            position: relative;
        }
        
        .quick-action:hover {
            background: var(--primary-50);
            border-color: var(--primary-200);
            color: var(--etudia-primary);
            transform: translateY(-1px);
            box-shadow: var(--shadow-md);
        }
        
        /* üîî Notification Badge */
        .notification-badge::after {
            content: '';
            position: absolute;
            top: 8px;
            right: 8px;
            width: 8px;
            height: 8px;
            background: var(--etudia-danger);
            border: 2px solid var(--bg-primary);
            border-radius: 50%;
        }
        
        /* üë§ User Dropdown */
        .user-dropdown {
            position: relative;
            cursor: pointer;
        }
        
        .user-dropdown .user-avatar {
            width: 40px;
            height: 40px;
            background: linear-gradient(45deg, var(--etudia-orange), var(--etudia-success));
            border-radius: var(--border-radius);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1rem;
            font-weight: 600;
            color: white;
        }
        
        .dropdown-content {
            position: absolute;
            top: 100%;
            right: 0;
            margin-top: 8px;
            background: var(--bg-primary);
            border: 1px solid var(--border-color);
            border-radius: var(--border-radius);
            box-shadow: var(--shadow-lg);
            min-width: 200px;
            display: none;
            z-index: 1000;
            backdrop-filter: var(--glass-backdrop);
        }
        
        .dropdown-content.show {
            display: block;
            animation: slideDown 0.2s ease;
        }
        
        @keyframes slideDown {
            from { opacity: 0; transform: translateY(-10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .dropdown-content a {
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 12px 16px;
            text-decoration: none;
            color: var(--text-primary);
            transition: all var(--transition-fast);
            border-bottom: 1px solid var(--border-color);
        }
        
        .dropdown-content a:last-child {
            border-bottom: none;
        }
        
        .dropdown-content a:hover {
            background: var(--bg-secondary);
            color: var(--etudia-primary);
        }
        
        /* üìä Progress XP */
        .xp-progress {
            margin-top: 12px;
        }
        
        .progress-info {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 8px;
        }
        
        .xp-text {
            font-size: 0.875rem;
            font-weight: 600;
            color: var(--text-primary);
        }
        
        .xp-points {
            font-size: 0.75rem;
            color: var(--text-secondary);
        }
        
        .progress-bar {
            width: 100%;
            height: 8px;
            background: var(--bg-tertiary);
            border-radius: 4px;
            overflow: hidden;
        }
        
        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--etudia-primary), var(--etudia-secondary));
            border-radius: 4px;
            transition: width var(--transition-normal);
        }
        
        /* ============================================
           üì± RESPONSIVE MOBILE
           ============================================ */
        .mobile-menu-btn {
            display: none;
            width: 44px;
            height: 44px;
            background: var(--bg-secondary);
            border: 1px solid var(--border-color);
            border-radius: var(--border-radius);
            align-items: center;
            justify-content: center;
            cursor: pointer;
            color: var(--text-secondary);
        }
        
        .mobile-overlay {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            background: rgba(0, 0, 0, 0.5);
            z-index: 999;
        }
        
        @media (max-width: 1024px) {
            .header-content {
                gap: 1rem;
            }
            
            .quick-actions {
                gap: 4px;
            }
        }
        
        @media (max-width: 768px) {
            .sidebar {
                transform: translateX(-100%);
            }
            
            .sidebar.mobile-open {
                transform: translateX(0);
            }
            
            .main-content {
                margin-left: 0;
            }
            
            .mobile-menu-btn {
                display: flex;
            }
            
            .mobile-overlay.active {
                display: block;
            }
            
            .header {
                padding: 1rem 1.5rem;
            }
            
            .header-info h1 {
                font-size: 1.5rem;
            }
            
            .quick-actions {
                gap: 4px;
            }
            
            .quick-action {
                width: 40px;
                height: 40px;
            }
        }
        
        @media (max-width: 480px) {
            .header {
                padding: 1rem;
            }
            
            .header-info h1 {
                font-size: 1.25rem;
            }
            
            .header-info p {
                font-size: 0.875rem;
            }
        }
        
        /* ============================================
           üé® ANIMATIONS & EFFECTS
           ============================================ */
        .fade-in {
            animation: fadeIn 0.3s ease;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .slide-up {
            animation: slideUp 0.3s ease;
        }
        
        @keyframes slideUp {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .pulse {
            animation: pulse 2s infinite;
        }
        
        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }
        
        /* ============================================
           üõ†Ô∏è UTILITIES
           ============================================ */
        .hidden {
            display: none !important;
        }
        
        .sr-only {
            position: absolute;
            width: 1px;
            height: 1px;
            padding: 0;
            margin: -1px;
            overflow: hidden;
            clip: rect(0, 0, 0, 0);
            white-space: nowrap;
            border: 0;
        }
        
        .text-center { text-align: center; }
        .text-left { text-align: left; }
        .text-right { text-align: right; }
        
        .fw-light { font-weight: 300; }
        .fw-normal { font-weight: 400; }
        .fw-medium { font-weight: 500; }
        .fw-semibold { font-weight: 600; }
        .fw-bold { font-weight: 700; }
        .fw-black { font-weight: 800; }
        
        .mb-0 { margin-bottom: 0; }
        .mb-1 { margin-bottom: 0.25rem; }
        .mb-2 { margin-bottom: 0.5rem; }
        .mb-3 { margin-bottom: 0.75rem; }
        .mb-4 { margin-bottom: 1rem; }
        .mb-5 { margin-bottom: 1.25rem; }
        .mb-6 { margin-bottom: 1.5rem; }
        
        .mt-0 { margin-top: 0; }
        .mt-1 { margin-top: 0.25rem; }
        .mt-2 { margin-top: 0.5rem; }
        .mt-3 { margin-top: 0.75rem; }
        .mt-4 { margin-top: 1rem; }
        .mt-5 { margin-top: 1.25rem; }
        .mt-6 { margin-top: 1.5rem; }
        
        .p-0 { padding: 0; }
        .p-1 { padding: 0.25rem; }
        .p-2 { padding: 0.5rem; }
        .p-3 { padding: 0.75rem; }
        .p-4 { padding: 1rem; }
        .p-5 { padding: 1.25rem; }
        .p-6 { padding: 1.5rem; }
        
        .rounded { border-radius: var(--border-radius); }
        .rounded-lg { border-radius: var(--border-radius-lg); }
        
        .shadow { box-shadow: var(--shadow-sm); }
        .shadow-md { box-shadow: var(--shadow-md); }
        .shadow-lg { box-shadow: var(--shadow-lg); }
        .shadow-xl { box-shadow: var(--shadow-xl); }
        
        /* ============================================
           üé® SCROLLBARS PERSONNALIS√âES
           ============================================ */
        ::-webkit-scrollbar {
            width: 8px;
        }
        
        ::-webkit-scrollbar-track {
            background: var(--bg-tertiary);
            border-radius: 4px;
        }
        
        ::-webkit-scrollbar-thumb {
            background: var(--border-color);
            border-radius: 4px;
        }
        
        ::-webkit-scrollbar-thumb:hover {
            background: var(--text-tertiary);
        }
    </style>
    
    <!-- ===============================
         üî• FIN PARTIE 1/6 : HTML HEAD + CSS BASE PRODUCTION
         =============================== -->

    <!-- ===============================
         üî• D√âBUT PARTIE 2/6 : STRUCTURE BODY + SIDEBAR
         =============================== -->
</head>
<body data-theme="light">
    <!-- Mobile Overlay -->
    <div class="mobile-overlay" id="mobileOverlay" onclick="closeMobileMenu()"></div>
    
    <!-- App Container -->
    <div class="app-container">
        <!-- Sidebar Navigation -->
        <aside class="sidebar" id="sidebar">
            <!-- Sidebar Header -->
            <div class="sidebar-header">
                <div class="logo">
                    <div class="logo-icon">
                        <i class="fas fa-graduation-cap"></i>
                    </div>
                    <div class="logo-text">√âtudIA V4.1</div>
                </div>
                <button class="toggle-btn" id="toggleSidebar" onclick="toggleSidebar()" title="R√©duire/Agrandir">
                    <i class="fas fa-chevron-left"></i>
                </button>
            </div>
            
            <!-- User Profile -->
            <div class="user-profile">
                <div class="user-info">
                    <div class="user-avatar">P</div>
                    <div class="user-details">
                        <div class="user-name">PACOUSSTAR</div>
                        <div class="user-role">√âl√®ve Premium ‚Ä¢ Level 12</div>
                        <div class="user-stats">
                            <div class="stat-item">
                                <div class="stat-value">2,450</div>
                                <div class="stat-label">Tokens</div>
                            </div>
                            <div class="stat-item">
                                <div class="stat-value">Level 12</div>
                                <div class="stat-label">XP</div>
                            </div>
                            <div class="stat-item">
                                <div class="stat-value">89%</div>
                                <div class="stat-label">Progr√®s</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Navigation Menu -->
            <nav class="nav-menu">
                <!-- Section Principale -->
                <div class="nav-section">
                    <div class="nav-section-title">Principal</div>
                    <div class="nav-item">
                        <a href="#" class="nav-link active" onclick="showSection('dashboard')" data-section="dashboard">
                            <i class="fas fa-home nav-icon"></i>
                            <span class="nav-text">Dashboard</span>
                        </a>
                    </div>
                    <div class="nav-item">
                        <a href="#" class="nav-link" onclick="showSection('chat-ia')" data-section="chat-ia">
                            <i class="fas fa-robot nav-icon"></i>
                            <span class="nav-text">Chat IA DeepSeek</span>
                            <span class="nav-badge">Nouveau</span>
                        </a>
                    </div>
                </div>
                
                <!-- Section Acad√©mique -->
                <div class="nav-section">
                    <div class="nav-section-title">Acad√©mique</div>
                    <div class="nav-item">
                        <a href="#" class="nav-link" onclick="showSection('cours')" data-section="cours">
                            <i class="fas fa-book nav-icon"></i>
                            <span class="nav-text">Mes Cours</span>
                            <span class="nav-badge">12</span>
                        </a>
                    </div>
                    <div class="nav-item">
                        <a href="#" class="nav-link" onclick="showSection('devoirs')" data-section="devoirs">
                            <i class="fas fa-clipboard-check nav-icon"></i>
                            <span class="nav-text">Devoirs</span>
                            <span class="nav-badge">3</span>
                        </a>
                    </div>
                    <div class="nav-item">
                        <a href="#" class="nav-link" onclick="showSection('notes')" data-section="notes">
                            <i class="fas fa-chart-line nav-icon"></i>
                            <span class="nav-text">Notes & R√©sultats</span>
                        </a>
                    </div>
                    <div class="nav-item">
                        <a href="#" class="nav-link" onclick="showSection('planning')" data-section="planning">
                            <i class="fas fa-calendar nav-icon"></i>
                            <span class="nav-text">Planning</span>
                        </a>
                    </div>
                </div>
                
                <!-- Section Outils -->
                <div class="nav-section">
                    <div class="nav-section-title">Outils √âtudIA</div>
                    <div class="nav-item">
                        <a href="#" class="nav-link" onclick="showSection('bibliotheque')" data-section="bibliotheque">
                            <i class="fas fa-books nav-icon"></i>
                            <span class="nav-text">Biblioth√®que</span>
                        </a>
                    </div>
                    <div class="nav-item">
                        <a href="#" class="nav-link" onclick="showSection('documents')" data-section="documents">
                            <i class="fas fa-file-upload nav-icon"></i>
                            <span class="nav-text">Mes Documents</span>
                        </a>
                    </div>
                    <div class="nav-item">
                        <a href="#" class="nav-link" onclick="showSection('gamification')" data-section="gamification">
                            <i class="fas fa-trophy nav-icon"></i>
                            <span class="nav-text">Gamification</span>
                        </a>
                    </div>
                </div>
                
                <!-- Section Social -->
                <div class="nav-section">
                    <div class="nav-section-title">Social & Support</div>
                    <div class="nav-item">
                        <a href="#" class="nav-link" onclick="showSection('parrainage')" data-section="parrainage">
                            <i class="fas fa-users nav-icon"></i>
                            <span class="nav-text">Parrainage</span>
                            <span class="nav-badge">üí∞</span>
                        </a>
                    </div>
                    <div class="nav-item">
                        <a href="#" class="nav-link" onclick="showSection('liaison-parents')" data-section="liaison-parents">
                            <i class="fas fa-user-friends nav-icon"></i>
                            <span class="nav-text">Liaison Parents</span>
                        </a>
                    </div>
                    <div class="nav-item">
                        <a href="#" class="nav-link" onclick="showSection('communaute')" data-section="communaute">
                            <i class="fas fa-comments nav-icon"></i>
                            <span class="nav-text">Communaut√©</span>
                        </a>
                    </div>
                </div>
                
                <!-- Section Navigation Inter-Sites -->
                <div class="nav-section">
                    <div class="nav-section-title">Navigation √âtudIA</div>
                    <div class="nav-item">
                        <a href="https://etudia.gsnexpertises.com" class="nav-link" target="_blank">
                            <i class="fas fa-home nav-icon"></i>
                            <span class="nav-text">üè† Site Principal</span>
                        </a>
                    </div>
                    <div class="nav-item">
                        <a href="https://adminetudia.gsnexpertises.com" class="nav-link" target="_blank">
                            <i class="fas fa-rocket nav-icon"></i>
                            <span class="nav-text">üöÄ Interface IA</span>
                        </a>
                    </div>
                    <div class="nav-item">
                        <a href="https://appetudia.gsnexpertises.com" class="nav-link" target="_blank">
                            <i class="fas fa-mobile-alt nav-icon"></i>
                            <span class="nav-text">üì± App Mobile</span>
                        </a>
                    </div>
                </div>
                
                <!-- Section Param√®tres -->
                <div class="nav-section">
                    <div class="nav-section-title">Compte</div>
                    <div class="nav-item">
                        <a href="#" class="nav-link" onclick="showSection('profil')" data-section="profil">
                            <i class="fas fa-user nav-icon"></i>
                            <span class="nav-text">Mon Profil</span>
                        </a>
                    </div>
                    <div class="nav-item">
                        <a href="#" class="nav-link" onclick="showSection('abonnement')" data-section="abonnement">
                            <i class="fas fa-credit-card nav-icon"></i>
                            <span class="nav-text">Abonnement</span>
                        </a>
                    </div>
                    <div class="nav-item">
                        <a href="#" class="nav-link" onclick="showSection('parametres')" data-section="parametres">
                            <i class="fas fa-cog nav-icon"></i>
                            <span class="nav-text">Param√®tres</span>
                        </a>
                    </div>
                    <div class="nav-item">
                        <a href="#" class="nav-link" onclick="showSection('aide')" data-section="aide">
                            <i class="fas fa-question-circle nav-icon"></i>
                            <span class="nav-text">Aide & Support</span>
                        </a>
                    </div>
                    <div class="nav-item">
                        <a href="/login.html" class="nav-link">
                            <i class="fas fa-sign-out-alt nav-icon"></i>
                            <span class="nav-text">D√©connexion</span>
                        </a>
                    </div>
                </div>
            </nav>
        </aside>
        
        <!-- Main Content -->
        <main class="main-content">
            <!-- Header -->
            <header class="header">
                <div class="header-content">
                    <!-- Mobile Menu Button -->
                    <button class="mobile-menu-btn" id="mobileMenuBtn" onclick="toggleMobileMenu()">
                        <i class="fas fa-bars"></i>
                    </button>
                    
                    <!-- Header Info -->
                    <div class="header-info">
                        <h1>Dashboard Personnel üë®‚Äçüéì</h1>
                        <p>Bienvenue PACOUSSTAR ! Voici votre espace d'apprentissage personnalis√© avec √âtudIA V4.1</p>
                    </div>
                    
                    <!-- Header Actions -->
                    <div class="header-actions">
                        <!-- Quick Actions -->
                        <div class="quick-actions">
                            <button class="quick-action" onclick="showSection('chat-ia')" title="Chat IA Rapide">
                                <i class="fas fa-robot"></i>
                            </button>
                            <button class="quick-action" onclick="showSection('documents')" title="Upload Document">
                                <i class="fas fa-upload"></i>
                            </button>
                            <button class="quick-action notification-badge" onclick="showSection('notifications')" title="Notifications">
                                <i class="fas fa-bell"></i>
                            </button>
                            <button class="quick-action" onclick="toggleTheme()" title="Changer de th√®me">
                                <i class="fas fa-moon" id="themeIcon"></i>
                            </button>
                        </div>
                        
                        <!-- User Dropdown -->
                        <div class="user-dropdown" onclick="toggleUserDropdown()">
                            <div class="user-avatar">P</div>
                            <div class="dropdown-content" id="userDropdown">
                                <a href="#" onclick="showSection('profil')">
                                    <i class="fas fa-user"></i> Mon Profil
                                </a>
                                <a href="#" onclick="showSection('abonnement')">
                                    <i class="fas fa-credit-card"></i> Abonnement
                                </a>
                                <a href="#" onclick="showSection('parametres')">
                                    <i class="fas fa-cog"></i> Param√®tres
                                </a>
                                <a href="/login.html">
                                    <i class="fas fa-sign-out-alt"></i> D√©connexion
                                </a>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Progress Bar (XP) -->
                <div class="xp-progress">
                    <div class="progress-info">
                        <span class="xp-text">Level 12 - Expert √âtudiant</span>
                        <span class="xp-points">2,450 / 3,000 XP</span>
                    </div>
                    <div class="progress-bar">
                        <div class="progress-fill" style="width: 82%"></div>
                    </div>
                </div>
            </header>
            
            <!-- ===============================
                 üî• FIN PARTIE 2/6 : STRUCTURE BODY + SIDEBAR
                 =============================== -->


<!-- ===============================
                 üî• D√âBUT PARTIE 3/6 : DASHBOARD + SECTIONS (DESIGN HARMONIS√â)
                 =============================== -->
            
            <!-- Content Sections -->
            <div class="content-sections">
                <!-- Section Dashboard -->
                <div id="dashboard" class="content-section active">
                    <!-- Stats Section -->
                    <section class="stats-section">
                        <h2 class="section-title">üìä Vue d'ensemble</h2>
                        
                        <div class="stats-grid">
                            <div class="stat-card">
                                <div class="stat-header">
                                    <div class="stat-icon">ü§ñ</div>
                                    <div class="stat-trend">+47 aujourd'hui</div>
                                </div>
                                <div class="stat-value">2,450</div>
                                <div class="stat-label">Tokens Disponibles</div>
                            </div>
                            
                            <div class="stat-card">
                                <div class="stat-header">
                                    <div class="stat-icon">üí¨</div>
                                    <div class="stat-trend">+12 vs hier</div>
                                </div>
                                <div class="stat-value">127</div>
                                <div class="stat-label">Sessions IA DeepSeek</div>
                            </div>
                            
                            <div class="stat-card">
                                <div class="stat-header">
                                    <div class="stat-icon">üèÜ</div>
                                    <div class="stat-trend">550 XP restants</div>
                                </div>
                                <div class="stat-value">Level 12</div>
                                <div class="stat-label">Expert √âtudiant</div>
                            </div>
                            
                            <div class="stat-card">
                                <div class="stat-header">
                                    <div class="stat-icon">üí∞</div>
                                    <div class="stat-trend">+2,100 FCFA</div>
                                </div>
                                <div class="stat-value">12,500F</div>
                                <div class="stat-label">Gains Parrainage</div>
                            </div>
                        </div>
                    </section>

                    <!-- Main Grid -->
                    <div class="main-grid">
                        <!-- Interface IA DeepSeek R1 -->
                        <div class="content-card">
                            <h3 class="card-title">ü§ñ Assistant IA DeepSeek R1</h3>
                            
                            <div class="ai-modes">
                                <button class="btn btn-primary mode-btn active" data-mode="normal">
                                    üí¨ Normal (250 tokens)
                                </button>
                                <button class="btn btn-secondary mode-btn" data-mode="step_by_step">
                                    üìö √âtape par √âtape (180 tokens)
                                </button>
                                <button class="btn btn-info mode-btn" data-mode="direct_solution">
                                    ‚ö° Solution Directe (400 tokens)
                                </button>
                                <button class="btn btn-warning mode-btn" data-mode="audio">
                                    üé§ Mode Audio (200 tokens)
                                </button>
                            </div>
                            
                            <div class="chat-interface">
                                <div class="chat-messages" id="chatMessages">
                                    <div class="message ai-message">
                                        <div class="message-avatar">ü§ñ</div>
                                        <div class="message-content">
                                            <div class="message-text">
                                                Salut PACOUSSTAR ! üëã Je suis DeepSeek R1, votre assistant IA personnel pour l'apprentissage.
                                                <br><br>
                                                <strong>Comment puis-je vous aider aujourd'hui ?</strong>
                                                <br>
                                                ‚Ä¢ Expliquer des concepts difficiles
                                                <br>
                                                ‚Ä¢ R√©soudre des exercices √©tape par √©tape
                                                <br>
                                                ‚Ä¢ Analyser vos documents PDF
                                                <br>
                                                ‚Ä¢ R√©pondre √† vos questions acad√©miques
                                            </div>
                                            <div class="message-time">Maintenant</div>
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="chat-input-area">
                                    <div class="input-tools">
                                        <button class="tool-btn" onclick="attachDocument()" title="Joindre document">
                                            <i class="fas fa-paperclip"></i>
                                        </button>
                                        <button class="tool-btn" onclick="startVoiceInput()" title="Saisie vocale">
                                            <i class="fas fa-microphone"></i>
                                        </button>
                                    </div>
                                    <textarea 
                                        class="chat-input" 
                                        id="chatInput" 
                                        placeholder="Posez votre question √† DeepSeek R1..."
                                        rows="2"
                                    ></textarea>
                                    <button class="btn btn-primary send-btn" onclick="sendMessage()">
                                        <i class="fas fa-paper-plane"></i>
                                    </button>
                                </div>
                            </div>
                        </div>

                        <!-- Stats & Progress -->
                        <div class="content-card">
                            <h3 class="card-title">üìà Progression & Stats</h3>
                            
                            <!-- XP Progress -->
                            <div class="xp-section">
                                <div class="xp-header">
                                    <span class="xp-level">Level 12 - Expert √âtudiant</span>
                                    <span class="xp-points">2,450 / 3,000 XP</span>
                                </div>
                                <div class="progress-bar-large">
                                    <div class="progress-fill-large" style="width: 82%"></div>
                                </div>
                            </div>
                            
                            <!-- Quick Stats -->
                            <div class="quick-stats">
                                <div class="quick-stat-item">
                                    <div class="quick-stat-icon">üìö</div>
                                    <div class="quick-stat-info">
                                        <div class="quick-stat-value">17/20</div>
                                        <div class="quick-stat-label">Chapitres Math</div>
                                    </div>
                                </div>
                                
                                <div class="quick-stat-item">
                                    <div class="quick-stat-icon">‚ö°</div>
                                    <div class="quick-stat-info">
                                        <div class="quick-stat-value">156</div>
                                        <div class="quick-stat-label">Sessions IA</div>
                                    </div>
                                </div>
                                
                                <div class="quick-stat-item">
                                    <div class="quick-stat-icon">üìÑ</div>
                                    <div class="quick-stat-info">
                                        <div class="quick-stat-value">24</div>
                                        <div class="quick-stat-label">Documents</div>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Parrainage Quick View -->
                            <div class="parrainage-summary">
                                <div class="parrainage-header">
                                    <span class="parrainage-title">üí∞ Gains Parrainage</span>
                                    <button class="btn btn-sm btn-secondary" onclick="showSection('parrainage')">
                                        D√©tails
                                    </button>
                                </div>
                                <div class="parrainage-amount">12,500 FCFA</div>
                                <div class="parrainage-detail">23 filleuls ‚Ä¢ 3 niveaux actifs</div>
                            </div>
                        </div>
                    </div>

                    <!-- Quick Actions -->
                    <div class="quick-actions">
                        <div class="action-card" onclick="showSection('documents')">
                            <div class="action-icon">üìÑ</div>
                            <div class="action-title">Analyser Document</div>
                            <div class="action-desc">Upload PDF pour analyse IA</div>
                        </div>
                        
                        <div class="action-card" onclick="showSection('cours')">
                            <div class="action-icon">üìö</div>
                            <div class="action-title">Mes Cours</div>
                            <div class="action-desc">Acc√©der √† vos mati√®res</div>
                        </div>
                        
                        <div class="action-card" onclick="showSection('devoirs')">
                            <div class="action-icon">‚úèÔ∏è</div>
                            <div class="action-title">Devoirs</div>
                            <div class="action-desc">Aide IA pour vos devoirs</div>
                        </div>
                        
                        <div class="action-card" onclick="showSection('parrainage')">
                            <div class="action-icon">üí∞</div>
                            <div class="action-title">Parrainage</div>
                            <div class="action-desc">Gagnez en invitant vos amis</div>
                        </div>
                        
                        <div class="action-card" onclick="showSection('gamification')">
                            <div class="action-icon">üèÜ</div>
                            <div class="action-title">Achievements</div>
                            <div class="action-desc">Badges et r√©compenses</div>
                        </div>
                        
                        <div class="action-card" onclick="showSection('liaison-parents')">
                            <div class="action-icon">üë®‚Äçüë©‚Äçüëß‚Äçüë¶</div>
                            <div class="action-title">Liaison Parents</div>
                            <div class="action-desc">Communication avec vos parents</div>
                        </div>
                    </div>
                </div>
                
                <!-- Section Chat IA -->
                <div id="chat-ia" class="content-section">
                    <section class="chat-ia-section">
                        <h2 class="section-title">ü§ñ Chat IA DeepSeek R1 - Interface Compl√®te</h2>
                        
                        <div class="chat-container-full">
                            <!-- Chat Header -->
                            <div class="chat-header-full">
                                <div class="chat-title-section">
                                    <h3 class="chat-title">
                                        <i class="fas fa-robot"></i>
                                        DeepSeek R1 - Assistant IA Personnel
                                    </h3>
                                    <div class="chat-status">
                                        <span class="status-dot"></span>
                                        Connect√© ‚Ä¢ Tokens: <span id="tokenDisplay">2,450</span>
                                    </div>
                                </div>
                                <div class="chat-actions">
                                    <button class="btn btn-sm btn-secondary" onclick="newChatSession()">
                                        <i class="fas fa-plus"></i> Nouvelle session
                                    </button>
                                    <button class="btn btn-sm btn-secondary" onclick="clearChat()">
                                        <i class="fas fa-trash"></i> Effacer
                                    </button>
                                    <button class="btn btn-sm btn-info" onclick="exportChat()">
                                        <i class="fas fa-download"></i> Export
                                    </button>
                                </div>
                            </div>
                            
                            <!-- Chat Sessions Tabs -->
                            <div class="chat-sessions">
                                <div class="session-tabs" id="sessionTabs">
                                    <div class="session-tab active" data-session="1">
                                        <span class="tab-title">Math√©matiques</span>
                                        <button class="tab-close">√ó</button>
                                    </div>
                                    <div class="session-tab" data-session="2">
                                        <span class="tab-title">Physique</span>
                                        <button class="tab-close">√ó</button>
                                    </div>
                                    <button class="add-session-btn" onclick="newChatSession()">
                                        <i class="fas fa-plus"></i>
                                    </button>
                                </div>
                            </div>
                            
                            <!-- Chat Modes -->
                            <div class="chat-modes-full">
                                <div class="mode-buttons-full">
                                    <button class="mode-btn-full active" data-mode="normal">
                                        üí¨ Normal <small>(250 tokens)</small>
                                    </button>
                                    <button class="mode-btn-full" data-mode="step_by_step">
                                        üìö √âtape par √âtape <small>(180 tokens)</small>
                                    </button>
                                    <button class="mode-btn-full" data-mode="direct_solution">
                                        ‚ö° Solution Directe <small>(400 tokens)</small>
                                    </button>
                                    <button class="mode-btn-full" data-mode="audio">
                                        üé§ Mode Audio <small>(200 tokens)</small>
                                    </button>
                                </div>
                                <div class="mode-description">
                                    <p id="modeDescription">Mode Normal : Conversation √©quilibr√©e avec explications d√©taill√©es et exemples.</p>
                                </div>
                            </div>
                            
                            <!-- Chat Messages Full -->
                            <div class="chat-messages-full" id="chatMessagesFull">
                                <!-- Messages will be populated here -->
                                <div class="message ai-message">
                                    <div class="message-avatar">ü§ñ</div>
                                    <div class="message-content">
                                        <div class="message-text">
                                            Salut PACOUSSTAR ! üëã Nouvelle session d√©marr√©e avec DeepSeek R1.
                                            <br><br>
                                            <strong>Interface compl√®te activ√©e !</strong> Vous pouvez maintenant :
                                            <br>
                                            ‚Ä¢ Cr√©er plusieurs sessions simultan√©es
                                            <br>
                                            ‚Ä¢ Basculer entre 4 modes d'apprentissage
                                            <br>
                                            ‚Ä¢ Joindre des documents √† vos questions
                                            <br>
                                            ‚Ä¢ Exporter vos conversations
                                            <br><br>
                                            <em>Choisissez un mode ci-dessus et posez votre premi√®re question !</em>
                                        </div>
                                        <div class="message-time">Maintenant</div>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Chat Input Full -->
                            <div class="chat-input-full">
                                <div class="input-group-full">
                                    <div class="input-tools-full">
                                        <button class="tool-btn" title="Joindre document">
                                            <i class="fas fa-paperclip"></i>
                                        </button>
                                        <button class="tool-btn" title="Saisie vocale">
                                            <i class="fas fa-microphone"></i>
                                        </button>
                                        <button class="tool-btn" title="Templates rapides">
                                            <i class="fas fa-magic"></i>
                                        </button>
                                    </div>
                                    <textarea 
                                        class="chat-textarea-full" 
                                        id="chatInputFull" 
                                        placeholder="Tapez votre question ici... (Ctrl+Entr√©e pour envoyer)"
                                        rows="3"
                                    ></textarea>
                                    <button class="send-btn-full" onclick="sendMessageFull()">
                                        <i class="fas fa-paper-plane"></i>
                                    </button>
                                </div>
                                <div class="input-footer-full">
                                    <div class="input-stats">
                                        <span class="char-count">0 / 2000 caract√®res</span>
                                        <span class="estimated-tokens">~0 tokens estim√©s</span>
                                    </div>
                                    <div class="quick-prompts">
                                        <button class="quick-prompt" onclick="insertQuickPrompt('Explique-moi')">Explique-moi</button>
                                        <button class="quick-prompt" onclick="insertQuickPrompt('R√©sous cet exercice')">R√©sous cet exercice</button>
                                        <button class="quick-prompt" onclick="insertQuickPrompt('Corrige mes erreurs')">Corrige mes erreurs</button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </section>
                </div>
                
                <!-- Autres sections (placeholders) -->
                <div id="cours" class="content-section">
                    <h2 class="section-title">üìö Mes Cours</h2>
                    <div class="content-card">
                        <div class="coming-soon">
                            <div class="coming-soon-icon">üìö</div>
                            <h3>Section en d√©veloppement</h3>
                            <p>La gestion des cours sera bient√¥t disponible !</p>
                        </div>
                    </div>
                </div>
                
                <div id="devoirs" class="content-section">
                    <h2 class="section-title">‚úèÔ∏è Mes Devoirs</h2>
                    <div class="content-card">
                        <div class="coming-soon">
                            <div class="coming-soon-icon">‚úèÔ∏è</div>
                            <h3>Section en d√©veloppement</h3>
                            <p>La gestion des devoirs sera bient√¥t disponible !</p>
                        </div>
                    </div>
                </div>
                
                <div id="notes" class="content-section">
                    <h2 class="section-title">üìä Notes & R√©sultats</h2>
                    <div class="content-card">
                        <div class="coming-soon">
                            <div class="coming-soon-icon">üìä</div>
                            <h3>Section en d√©veloppement</h3>
                            <p>Le suivi des notes sera bient√¥t disponible !</p>
                        </div>
                    </div>
                </div>
                
                <div id="planning" class="content-section">
                    <h2 class="section-title">üìÖ Planning</h2>
                    <div class="content-card">
                        <div class="coming-soon">
                            <div class="coming-soon-icon">üìÖ</div>
                            <h3>Section en d√©veloppement</h3>
                            <p>La gestion du planning sera bient√¥t disponible !</p>
                        </div>
                    </div>
                </div>
                
                <div id="bibliotheque" class="content-section">
                    <h2 class="section-title">üìñ Biblioth√®que</h2>
                    <div class="content-card">
                        <div class="coming-soon">
                            <div class="coming-soon-icon">üìñ</div>
                            <h3>Section en d√©veloppement</h3>
                            <p>La biblioth√®que num√©rique sera bient√¥t disponible !</p>
                        </div>
                    </div>
                </div>
                
                <div id="documents" class="content-section">
                    <h2 class="section-title">üìÑ Mes Documents</h2>
                    <div class="content-card">
                        <div class="coming-soon">
                            <div class="coming-soon-icon">üìÑ</div>
                            <h3>Section en d√©veloppement</h3>
                            <p>La gestion des documents sera bient√¥t disponible !</p>
                        </div>
                    </div>
                </div>
                
                <div id="gamification" class="content-section">
                    <h2 class="section-title">üèÜ Gamification</h2>
                    <div class="content-card">
                        <div class="coming-soon">
                            <div class="coming-soon-icon">üèÜ</div>
                            <h3>Section en d√©veloppement</h3>
                            <p>Le syst√®me de gamification sera bient√¥t disponible !</p>
                        </div>
                    </div>
                </div>
                
                <div id="parrainage" class="content-section">
                    <h2 class="section-title">üí∞ Syst√®me de Parrainage</h2>
                    <div class="content-card">
                        <div class="coming-soon">
                            <div class="coming-soon-icon">üí∞</div>
                            <h3>Section en d√©veloppement</h3>
                            <p>Le syst√®me de parrainage sera bient√¥t disponible !</p>
                        </div>
                    </div>
                </div>
                
                <div id="liaison-parents" class="content-section">
                    <h2 class="section-title">üë®‚Äçüë©‚Äçüëß‚Äçüë¶ Liaison Parents</h2>
                    <div class="content-card">
                        <div class="coming-soon">
                            <div class="coming-soon-icon">üë®‚Äçüë©‚Äçüëß‚Äçüë¶</div>
                            <h3>Section en d√©veloppement</h3>
                            <p>La liaison avec les parents sera bient√¥t disponible !</p>
                        </div>
                    </div>
                </div>
                
                <div id="communaute" class="content-section">
                    <h2 class="section-title">üí¨ Communaut√©</h2>
                    <div class="content-card">
                        <div class="coming-soon">
                            <div class="coming-soon-icon">üí¨</div>
                            <h3>Section en d√©veloppement</h3>
                            <p>Le forum communautaire sera bient√¥t disponible !</p>
                        </div>
                    </div>
                </div>
                
                <div id="profil" class="content-section">
                    <h2 class="section-title">üë§ Mon Profil</h2>
                    <div class="content-card">
                        <div class="coming-soon">
                            <div class="coming-soon-icon">üë§</div>
                            <h3>Section en d√©veloppement</h3>
                            <p>La gestion du profil sera bient√¥t disponible !</p>
                        </div>
                    </div>
                </div>
                
                <div id="abonnement" class="content-section">
                    <h2 class="section-title">üí≥ Mon Abonnement</h2>
                    <div class="content-card">
                        <div class="coming-soon">
                            <div class="coming-soon-icon">üí≥</div>
                            <h3>Section en d√©veloppement</h3>
                            <p>La gestion des abonnements sera bient√¥t disponible !</p>
                        </div>
                    </div>
                </div>
                
                <div id="parametres" class="content-section">
                    <h2 class="section-title">‚öôÔ∏è Param√®tres</h2>
                    <div class="content-card">
                        <div class="coming-soon">
                            <div class="coming-soon-icon">‚öôÔ∏è</div>
                            <h3>Section en d√©veloppement</h3>
                            <p>Les param√®tres seront bient√¥t disponibles !</p>
                        </div>
                    </div>
                </div>
                
                <div id="aide" class="content-section">
                    <h2 class="section-title">‚ùì Aide & Support</h2>
                    <div class="content-card">
                        <div class="coming-soon">
                            <div class="coming-soon-icon">‚ùì</div>
                            <h3>Section en d√©veloppement</h3>
                            <p>Le support sera bient√¥t disponible !</p>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- ===============================
                 üî• FIN PARTIE 3/6 : DASHBOARD + SECTIONS (DESIGN HARMONIS√â)
                 =============================== -->


<!-- ===============================
         üî• D√âBUT PARTIE 4/6 : CSS HARMONIS√â + 4 CARDS ALIGN√âES
         =============================== -->
    
    <style>
        /* ============================================
           üé® OVERRIDE VARIABLES - HARMONISATION FORC√âE
           ============================================ */
        :root {
            --etudia-primary: #FF6B35 !important;
            --etudia-success: #10B981 !important;
            --etudia-danger: #EF4444 !important;
            --etudia-info: #3B82F6 !important;
            --etudia-warning: #F59E0B !important;
            --etudia-dark: #1F2937 !important;
            --etudia-white: #FFFFFF !important;
            --gradient-primary: linear-gradient(135deg, #FF6B35, #EF4444) !important;
            --gradient-secondary: linear-gradient(135deg, #10B981, #3B82F6) !important;
            --glassmorphism: rgba(255, 255, 255, 0.1) !important;
            --glassmorphism-border: rgba(255, 255, 255, 0.2) !important;
        }
        
        /* ============================================
           üèóÔ∏è BODY OVERRIDE - BACKGROUND TESLA
           ============================================ */
        body {
            background: linear-gradient(135deg, #1F2937, #111827) !important;
            color: var(--etudia-white) !important;
            font-family: 'Inter', 'Segoe UI', sans-serif !important;
        }
        
        /* ============================================
           üìä STATS GRID - 4 CARDS M√äME LIGNE FORC√â
           ============================================ */
        .stats-grid {
            display: grid !important;
            grid-template-columns: repeat(4, 1fr) !important;
            gap: 0.8rem !important;
            margin-bottom: 2rem !important;
            max-width: 100% !important;
        }
        
        /* üì± Responsive pour 4 cards */
        @media (max-width: 1200px) {
            .stats-grid {
                grid-template-columns: repeat(2, 1fr) !important;
            }
        }
        
        @media (max-width: 640px) {
            .stats-grid {
                grid-template-columns: 1fr !important;
            }
        }
        
        /* ============================================
           üìä STAT CARDS - TAILLE R√âDUITE + POLICE OPTIMIS√âE
           ============================================ */
        .stat-card {
            background: var(--glassmorphism) !important;
            backdrop-filter: blur(20px) !important;
            border: 1px solid var(--glassmorphism-border) !important;
            border-radius: 16px !important;
            padding: 1rem !important;
            transition: all 0.3s ease !important;
            position: relative !important;
            overflow: hidden !important;
            min-height: 100px !important;
            max-height: 120px !important;
        }
        
        .stat-card::before {
            content: '' !important;
            position: absolute !important;
            top: 0 !important;
            left: -100% !important;
            width: 100% !important;
            height: 100% !important;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.1), transparent) !important;
            transition: all 0.5s ease !important;
        }
        
        .stat-card:hover::before {
            left: 100% !important;
        }
        
        .stat-card:hover {
            transform: translateY(-3px) !important;
            box-shadow: 0 12px 20px rgba(255, 107, 53, 0.3) !important;
        }
        
        /* ============================================
           üìä STAT HEADER - LAYOUT OPTIMIS√â
           ============================================ */
        .stat-header {
            display: flex !important;
            justify-content: space-between !important;
            align-items: center !important;
            margin-bottom: 0.6rem !important;
        }
        
        .stat-icon {
            font-size: 1.4rem !important;
            background: var(--gradient-primary) !important;
            -webkit-background-clip: text !important;
            -webkit-text-fill-color: transparent !important;
            background-clip: text !important;
            filter: drop-shadow(0 0 6px rgba(255, 107, 53, 0.6)) !important;
        }
        
        .stat-trend {
            font-size: 0.65rem !important;
            padding: 0.2rem 0.5rem !important;
            border-radius: 8px !important;
            background: var(--gradient-secondary) !important;
            color: var(--etudia-white) !important;
            font-weight: 600 !important;
            box-shadow: 0 2px 6px rgba(16, 185, 129, 0.4) !important;
            white-space: nowrap !important;
        }
        
        /* ============================================
           üìä STAT VALUES - POLICE R√âDUITE + COULEURS TESLA
           ============================================ */
        .stat-value {
            font-size: 1.6rem !important;
            font-weight: 800 !important;
            background: var(--gradient-secondary) !important;
            -webkit-background-clip: text !important;
            -webkit-text-fill-color: transparent !important;
            background-clip: text !important;
            margin-bottom: 0.2rem !important;
            line-height: 1 !important;
        }
        
        .stat-label {
            opacity: 0.95 !important;
            font-size: 0.75rem !important;
            color: var(--etudia-white) !important;
            font-weight: 500 !important;
            line-height: 1.2 !important;
        }
        
        /* ============================================
           üìä SECTION TITLE - HARMONIS√â
           ============================================ */
        .section-title {
            font-size: 1.6rem !important;
            font-weight: bold !important;
            margin-bottom: 1.2rem !important;
            background: var(--gradient-primary) !important;
            -webkit-background-clip: text !important;
            -webkit-text-fill-color: transparent !important;
            background-clip: text !important;
            padding: 0 2rem !important;
        }
        
        /* ============================================
           ü§ñ CONTENT CARDS - HARMONIS√âES
           ============================================ */
        .content-card {
            background: var(--glassmorphism) !important;
            backdrop-filter: blur(20px) !important;
            border: 1px solid var(--glassmorphism-border) !important;
            border-radius: 16px !important;
            padding: 1.5rem !important;
            transition: all 0.3s ease !important;
        }
        
        .content-card:hover {
            transform: translateY(-2px) !important;
            box-shadow: 0 10px 25px rgba(255, 107, 53, 0.2) !important;
        }
        
        .card-title {
            font-size: 1.2rem !important;
            font-weight: bold !important;
            margin-bottom: 1rem !important;
            color: var(--etudia-primary) !important;
            display: flex !important;
            align-items: center !important;
            gap: 0.5rem !important;
        }
        
        /* ============================================
           üöÄ QUICK ACTIONS - 3 COLONNES FORC√â
           ============================================ */
        .quick-actions {
            display: grid !important;
            grid-template-columns: repeat(3, 1fr) !important;
            gap: 1rem !important;
            margin-top: 2rem !important;
            padding: 0 2rem !important;
        }
        
        @media (max-width: 1024px) {
            .quick-actions {
                grid-template-columns: repeat(2, 1fr) !important;
            }
        }
        
        @media (max-width: 640px) {
            .quick-actions {
                grid-template-columns: 1fr !important;
            }
        }
        
        .action-card {
            background: var(--glassmorphism) !important;
            backdrop-filter: blur(20px) !important;
            border: 1px solid var(--glassmorphism-border) !important;
            border-radius: 16px !important;
            padding: 1.2rem !important;
            text-align: center !important;
            cursor: pointer !important;
            transition: all 0.3s ease !important;
            position: relative !important;
            overflow: hidden !important;
            min-height: 110px !important;
            display: flex !important;
            flex-direction: column !important;
            justify-content: center !important;
        }
        
        .action-card::before {
            content: '' !important;
            position: absolute !important;
            top: 0 !important;
            left: -100% !important;
            width: 100% !important;
            height: 100% !important;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.1), transparent) !important;
            transition: all 0.5s ease !important;
        }
        
        .action-card:hover::before {
            left: 100% !important;
        }
        
        .action-card:hover {
            transform: translateY(-4px) !important;
            box-shadow: 0 15px 25px rgba(255, 107, 53, 0.3) !important;
        }
        
        .action-icon {
            font-size: 1.8rem !important;
            margin-bottom: 0.6rem !important;
            background: var(--gradient-primary) !important;
            -webkit-background-clip: text !important;
            -webkit-text-fill-color: transparent !important;
            background-clip: text !important;
        }
        
        .action-title {
            font-weight: 600 !important;
            margin-bottom: 0.3rem !important;
            font-size: 0.9rem !important;
            color: var(--etudia-white) !important;
        }
        
        .action-desc {
            font-size: 0.75rem !important;
            opacity: 0.8 !important;
            color: var(--etudia-white) !important;
        }
        
        /* ============================================
           üîò BUTTONS - STYLE TESLA
           ============================================ */
        .btn {
            padding: 0.6rem 1rem !important;
            border: none !important;
            border-radius: 12px !important;
            font-weight: 600 !important;
            cursor: pointer !important;
            transition: all 0.3s ease !important;
            text-decoration: none !important;
            display: inline-flex !important;
            align-items: center !important;
            gap: 0.4rem !important;
            font-size: 0.8rem !important;
        }
        
        .btn-primary {
            background: var(--gradient-primary) !important;
            color: var(--etudia-white) !important;
        }
        
        .btn-secondary {
            background: var(--gradient-secondary) !important;
            color: var(--etudia-white) !important;
        }
        
        .btn-info {
            background: linear-gradient(135deg, #3B82F6, #8B5CF6) !important;
            color: var(--etudia-white) !important;
        }
        
        .btn-warning {
            background: var(--etudia-warning) !important;
            color: var(--etudia-white) !important;
        }
        
        .btn-sm {
            padding: 0.4rem 0.8rem !important;
            font-size: 0.7rem !important;
        }
        
        .btn:hover {
            transform: translateY(-2px) !important;
            box-shadow: 0 6px 15px rgba(255, 107, 53, 0.4) !important;
        }
        
        /* ============================================
           ü§ñ CHAT INTERFACE - HARMONIS√âE
           ============================================ */
        .ai-modes {
            display: grid !important;
            grid-template-columns: repeat(2, 1fr) !important;
            gap: 0.6rem !important;
            margin-bottom: 1.2rem !important;
        }
        
        @media (max-width: 640px) {
            .ai-modes {
                grid-template-columns: 1fr !important;
            }
        }
        
        .mode-btn {
            padding: 0.7rem 0.8rem !important;
            border: 1px solid var(--glassmorphism-border) !important;
            border-radius: 10px !important;
            background: var(--glassmorphism) !important;
            color: var(--etudia-white) !important;
            font-size: 0.75rem !important;
            cursor: pointer !important;
            transition: all 0.3s ease !important;
            text-align: center !important;
        }
        
        .mode-btn:hover {
            border-color: var(--etudia-primary) !important;
            background: rgba(255, 107, 53, 0.2) !important;
        }
        
        .mode-btn.active {
            background: var(--gradient-primary) !important;
            border-color: var(--etudia-primary) !important;
            color: var(--etudia-white) !important;
        }
        
        .chat-interface {
            background: rgba(31, 41, 55, 0.8) !important;
            border-radius: 12px !important;
            overflow: hidden !important;
            border: 1px solid var(--glassmorphism-border) !important;
        }
        
        .chat-messages {
            height: 280px !important;
            overflow-y: auto !important;
            padding: 1rem !important;
            background: rgba(15, 23, 42, 0.6) !important;
        }
        
        .message {
            margin-bottom: 1rem !important;
            display: flex !important;
            align-items: flex-start !important;
            gap: 0.7rem !important;
        }
        
        .message-avatar {
            width: 30px !important;
            height: 30px !important;
            border-radius: 50% !important;
            background: var(--gradient-primary) !important;
            display: flex !important;
            align-items: center !important;
            justify-content: center !important;
            font-size: 0.8rem !important;
            flex-shrink: 0 !important;
        }
        
        .message-content {
            background: var(--glassmorphism) !important;
            border-radius: 12px !important;
            padding: 0.8rem 1rem !important;
            max-width: 80% !important;
            backdrop-filter: blur(10px) !important;
            border: 1px solid var(--glassmorphism-border) !important;
        }
        
        .message-text {
            font-size: 0.8rem !important;
            line-height: 1.4 !important;
            margin-bottom: 0.3rem !important;
            color: var(--etudia-white) !important;
        }
        
        .message-time {
            font-size: 0.65rem !important;
            opacity: 0.6 !important;
            color: var(--etudia-white) !important;
        }
        
        .chat-input-area {
            padding: 1rem !important;
            background: rgba(31, 41, 55, 0.9) !important;
            display: flex !important;
            gap: 0.6rem !important;
            align-items: flex-end !important;
        }
        
        .input-tools {
            display: flex !important;
            gap: 0.4rem !important;
        }
        
        .tool-btn {
            width: 32px !important;
            height: 32px !important;
            background: var(--glassmorphism) !important;
            border: 1px solid var(--glassmorphism-border) !important;
            border-radius: 8px !important;
            color: var(--etudia-white) !important;
            cursor: pointer !important;
            display: flex !important;
            align-items: center !important;
            justify-content: center !important;
            transition: all 0.3s ease !important;
        }
        
        .tool-btn:hover {
            background: var(--etudia-primary) !important;
        }
        
        .chat-input {
            flex: 1 !important;
            background: var(--glassmorphism) !important;
            border: 1px solid var(--glassmorphism-border) !important;
            border-radius: 8px !important;
            padding: 0.7rem !important;
            color: var(--etudia-white) !important;
            resize: none !important;
            font-family: inherit !important;
            font-size: 0.8rem !important;
        }
        
        .chat-input:focus {
            outline: none !important;
            border-color: var(--etudia-primary) !important;
            box-shadow: 0 0 0 2px rgba(255, 107, 53, 0.2) !important;
        }
        
        .chat-input::placeholder {
            color: rgba(255, 255, 255, 0.5) !important;
        }
        
        .send-btn {
            background: var(--gradient-primary) !important;
            border: none !important;
            border-radius: 8px !important;
            padding: 0.7rem 1rem !important;
            color: var(--etudia-white) !important;
            cursor: pointer !important;
            transition: all 0.3s ease !important;
        }
        
        .send-btn:hover {
            transform: translateY(-1px) !important;
            box-shadow: 0 5px 15px rgba(255, 107, 53, 0.4) !important;
        }
        
        /* ============================================
           üì± RESPONSIVE FINAL
           ============================================ */
        @media (max-width: 768px) {
            .main-content {
                padding: 1rem !important;
            }
            
            .stats-section,
            .main-grid,
            .quick-actions {
                padding: 0 1rem !important;
            }
            
            .section-title {
                padding: 0 1rem !important;
                font-size: 1.4rem !important;
            }
            
            .stat-card,
            .content-card,
            .action-card {
                padding: 1rem !important;
            }
            
            .chat-messages {
                height: 220px !important;
            }
        }
    </style>
    
    <!-- ===============================
         üî• FIN PARTIE 4/6 : CSS HARMONIS√â + 4 CARDS ALIGN√âES
         =============================== -->


<!-- ===============================
                 üî• D√âBUT PARTIE 5/6 : WIDGET IA FLOTTANT + JAVASCRIPT COMPLET
                 =============================== -->
            
            <!-- Widget IA Flottant - OBLIGATOIRE DANS TOUS LES BACKOFFICES -->
            <div id="aiFloatingWidget" class="ai-floating-widget">
                <button class="ai-toggle-btn" id="aiToggleBtn" onclick="toggleAIWidget()">
                    <i class="fas fa-robot"></i>
                    <div class="ai-status-indicator"></div>
                </button>
                
                <div class="ai-widget-container" id="aiWidgetContainer" style="display: none;">
                    <!-- Widget Header -->
                    <div class="ai-widget-header">
                        <div class="ai-widget-title">
                            <i class="fas fa-robot"></i>
                            <span>DeepSeek R1</span>
                        </div>
                        <div class="ai-widget-actions">
                            <button class="widget-action-btn" onclick="minimizeAIWidget()" title="R√©duire">
                                <i class="fas fa-minus"></i>
                            </button>
                            <button class="widget-action-btn" onclick="closeAIWidget()" title="Fermer">
                                <i class="fas fa-times"></i>
                            </button>
                        </div>
                    </div>
                    
                    <!-- Widget Modes -->
                    <div class="ai-widget-modes">
                        <button class="ai-mode-btn active" data-mode="normal" onclick="setWidgetMode('normal')">
                            üí¨ <small>250t</small>
                        </button>
                        <button class="ai-mode-btn" data-mode="step_by_step" onclick="setWidgetMode('step_by_step')">
                            üìö <small>180t</small>
                        </button>
                        <button class="ai-mode-btn" data-mode="direct_solution" onclick="setWidgetMode('direct_solution')">
                            ‚ö° <small>400t</small>
                        </button>
                        <button class="ai-mode-btn" data-mode="audio" onclick="setWidgetMode('audio')">
                            üé§ <small>200t</small>
                        </button>
                    </div>
                    
                    <!-- Widget Messages -->
                    <div class="ai-widget-messages" id="aiWidgetMessages">
                        <div class="ai-widget-message ai">
                            <div class="ai-message-avatar">ü§ñ</div>
                            <div class="ai-message-content">
                                Salut PACOUSSTAR ! Widget IA pr√™t. Comment puis-je t'aider ?
                            </div>
                        </div>
                    </div>
                    
                    <!-- Widget Input -->
                    <div class="ai-widget-input">
                        <div class="ai-input-group">
                            <textarea 
                                id="aiWidgetTextarea" 
                                placeholder="Pose ta question..."
                                rows="2"
                                onkeydown="handleWidgetKeyDown(event)"
                                oninput="autoResizeWidget(this)"
                            ></textarea>
                            <button class="ai-send-btn" id="aiWidgetSendBtn" onclick="sendWidgetMessage()" disabled>
                                <i class="fas fa-paper-plane"></i>
                            </button>
                        </div>
                        <div class="ai-widget-footer">
                            <span class="tokens-left">Tokens: 2,450</span>
                            <button class="expand-chat-btn" onclick="expandToFullChat()">
                                <i class="fas fa-expand"></i> Chat complet
                            </button>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Toast Container -->
            <div class="toast-container" id="toastContainer"></div>
        </main>
    </div>
    
    <style>
        /* ============================================
           ü§ñ WIDGET IA FLOTTANT - STYLE TESLA
           ============================================ */
        .ai-floating-widget {
            position: fixed !important;
            bottom: 20px !important;
            right: 20px !important;
            z-index: 10000 !important;
            font-family: 'Inter', sans-serif !important;
        }
        
        .ai-toggle-btn {
            width: 60px !important;
            height: 60px !important;
            background: var(--gradient-primary) !important;
            border: none !important;
            border-radius: 50% !important;
            color: white !important;
            font-size: 1.5rem !important;
            cursor: pointer !important;
            box-shadow: 0 8px 25px rgba(255, 107, 53, 0.4) !important;
            transition: all 0.3s ease !important;
            position: relative !important;
            display: flex !important;
            align-items: center !important;
            justify-content: center !important;
        }
        
        .ai-toggle-btn:hover {
            transform: scale(1.1) !important;
            box-shadow: 0 12px 30px rgba(255, 107, 53, 0.6) !important;
        }
        
        .ai-status-indicator {
            position: absolute !important;
            top: 8px !important;
            right: 8px !important;
            width: 12px !important;
            height: 12px !important;
            background: #22c55e !important;
            border: 2px solid white !important;
            border-radius: 50% !important;
            animation: pulse 2s infinite !important;
        }
        
        .ai-widget-container {
            position: absolute !important;
            bottom: 80px !important;
            right: 0 !important;
            width: 350px !important;
            height: 500px !important;
            background: var(--glassmorphism) !important;
            backdrop-filter: blur(20px) !important;
            border: 1px solid var(--glassmorphism-border) !important;
            border-radius: 16px !important;
            box-shadow: 0 25px 50px rgba(0, 0, 0, 0.3) !important;
            display: flex !important;
            flex-direction: column !important;
            overflow: hidden !important;
            animation: slideUp 0.3s ease !important;
        }
        
        @keyframes slideUp {
            from { 
                opacity: 0; 
                transform: translateY(20px); 
            }
            to { 
                opacity: 1; 
                transform: translateY(0); 
            }
        }
        
        .ai-widget-header {
            background: var(--gradient-primary) !important;
            color: white !important;
            padding: 12px 16px !important;
            display: flex !important;
            align-items: center !important;
            justify-content: space-between !important;
        }
        
        .ai-widget-title {
            display: flex !important;
            align-items: center !important;
            gap: 8px !important;
            font-weight: 600 !important;
            font-size: 0.9rem !important;
        }
        
        .ai-widget-actions {
            display: flex !important;
            gap: 4px !important;
        }
        
        .widget-action-btn {
            width: 24px !important;
            height: 24px !important;
            background: rgba(255, 255, 255, 0.2) !important;
            border: none !important;
            border-radius: 6px !important;
            color: white !important;
            cursor: pointer !important;
            display: flex !important;
            align-items: center !important;
            justify-content: center !important;
            font-size: 0.75rem !important;
            transition: all 0.2s ease !important;
        }
        
        .widget-action-btn:hover {
            background: rgba(255, 255, 255, 0.3) !important;
        }
        
        .ai-widget-modes {
            padding: 8px 12px !important;
            background: rgba(31, 41, 55, 0.8) !important;
            border-bottom: 1px solid var(--glassmorphism-border) !important;
            display: flex !important;
            gap: 4px !important;
        }
        
        .ai-mode-btn {
            flex: 1 !important;
            padding: 6px 4px !important;
            border: 1px solid var(--glassmorphism-border) !important;
            border-radius: 8px !important;
            background: var(--glassmorphism) !important;
            color: var(--etudia-white) !important;
            font-size: 0.7rem !important;
            cursor: pointer !important;
            transition: all 0.2s ease !important;
            display: flex !important;
            flex-direction: column !important;
            align-items: center !important;
            gap: 2px !important;
        }
        
        .ai-mode-btn:hover {
            border-color: var(--etudia-primary) !important;
            background: rgba(255, 107, 53, 0.2) !important;
        }
        
        .ai-mode-btn.active {
            background: var(--gradient-primary) !important;
            border-color: var(--etudia-primary) !important;
            color: white !important;
        }
        
        .ai-widget-messages {
            flex: 1 !important;
            overflow-y: auto !important;
            padding: 12px !important;
            background: rgba(15, 23, 42, 0.6) !important;
        }
        
        .ai-widget-message {
            margin-bottom: 12px !important;
            display: flex !important;
            align-items: flex-start !important;
            gap: 8px !important;
        }
        
        .ai-widget-message.user {
            flex-direction: row-reverse !important;
        }
        
        .ai-message-avatar {
            width: 28px !important;
            height: 28px !important;
            border-radius: 50% !important;
            background: var(--gradient-primary) !important;
            color: white !important;
            display: flex !important;
            align-items: center !important;
            justify-content: center !important;
            font-size: 0.75rem !important;
            flex-shrink: 0 !important;
        }
        
        .ai-widget-message.user .ai-message-avatar {
            background: var(--gradient-secondary) !important;
        }
        
        .ai-message-content {
            background: var(--glassmorphism) !important;
            border: 1px solid var(--glassmorphism-border) !important;
            border-radius: 12px !important;
            padding: 8px 12px !important;
            font-size: 0.8rem !important;
            line-height: 1.4 !important;
            max-width: 80% !important;
            color: var(--etudia-white) !important;
            backdrop-filter: blur(10px) !important;
        }
        
        .ai-widget-message.user .ai-message-content {
            background: var(--gradient-primary) !important;
            border-color: var(--etudia-primary) !important;
            color: white !important;
        }
        
        .ai-widget-input {
            padding: 12px !important;
            background: rgba(31, 41, 55, 0.9) !important;
            border-top: 1px solid var(--glassmorphism-border) !important;
        }
        
        .ai-input-group {
            display: flex !important;
            gap: 8px !important;
            align-items: flex-end !important;
            margin-bottom: 8px !important;
        }
        
        #aiWidgetTextarea {
            flex: 1 !important;
            min-height: 36px !important;
            max-height: 80px !important;
            padding: 8px 12px !important;
            border: 1px solid var(--glassmorphism-border) !important;
            border-radius: 8px !important;
            background: var(--glassmorphism) !important;
            color: var(--etudia-white) !important;
            font-size: 0.8rem !important;
            font-family: inherit !important;
            resize: none !important;
            transition: all 0.2s ease !important;
        }
        
        #aiWidgetTextarea:focus {
            outline: none !important;
            border-color: var(--etudia-primary) !important;
            box-shadow: 0 0 0 2px rgba(255, 107, 53, 0.2) !important;
        }
        
        #aiWidgetTextarea::placeholder {
            color: rgba(255, 255, 255, 0.5) !important;
        }
        
        .ai-send-btn {
            width: 36px !important;
            height: 36px !important;
            background: var(--gradient-primary) !important;
            border: none !important;
            border-radius: 8px !important;
            color: white !important;
            cursor: pointer !important;
            display: flex !important;
            align-items: center !important;
            justify-content: center !important;
            transition: all 0.2s ease !important;
        }
        
        .ai-send-btn:hover:not(:disabled) {
            background: linear-gradient(135deg, #ff8c42, #ff6b35) !important;
            transform: translateY(-1px) !important;
        }
        
        .ai-send-btn:disabled {
            background: rgba(255, 255, 255, 0.2) !important;
            cursor: not-allowed !important;
        }
        
        .ai-widget-footer {
            display: flex !important;
            justify-content: space-between !important;
            align-items: center !important;
            font-size: 0.7rem !important;
            color: rgba(255, 255, 255, 0.7) !important;
        }
        
        .expand-chat-btn {
            background: none !important;
            border: none !important;
            color: var(--etudia-primary) !important;
            cursor: pointer !important;
            font-size: 0.7rem !important;
            display: flex !important;
            align-items: center !important;
            gap: 4px !important;
            transition: all 0.2s ease !important;
        }
        
        .expand-chat-btn:hover {
            color: #ff8c42 !important;
        }
        
        /* ============================================
           üîî TOAST NOTIFICATIONS
           ============================================ */
        .toast-container {
            position: fixed !important;
            top: 20px !important;
            right: 20px !important;
            z-index: 10001 !important;
            display: flex !important;
            flex-direction: column !important;
            gap: 12px !important;
        }
        
        .toast {
            min-width: 320px !important;
            padding: 16px !important;
            background: var(--glassmorphism) !important;
            backdrop-filter: blur(20px) !important;
            border: 1px solid var(--glassmorphism-border) !important;
            border-radius: 12px !important;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.2) !important;
            transform: translateX(100%) !important;
            opacity: 0 !important;
            transition: all 0.3s ease !important;
            color: var(--etudia-white) !important;
        }
        
        .toast.show {
            transform: translateX(0) !important;
            opacity: 1 !important;
        }
        
        .toast.success {
            border-left: 4px solid var(--etudia-success) !important;
        }
        
        .toast.error {
            border-left: 4px solid var(--etudia-danger) !important;
        }
        
        .toast.warning {
            border-left: 4px solid var(--etudia-warning) !important;
        }
        
        .toast.info {
            border-left: 4px solid var(--etudia-info) !important;
        }
        
        /* ============================================
           üì± RESPONSIVE WIDGET
           ============================================ */
        @media (max-width: 768px) {
            .ai-widget-container {
                width: 300px !important;
                height: 400px !important;
                bottom: 70px !important;
            }
        }
        
        @media (max-width: 480px) {
            .ai-floating-widget {
                bottom: 80px !important;
                right: 15px !important;
            }
            
            .ai-widget-container {
                width: 280px !important;
                height: 350px !important;
                bottom: 60px !important;
            }
        }
    </style>
    
    <script>
        /* ============================================
           üî• VARIABLES GLOBALES - PRODUCTION
           ============================================ */
        const API_BASE_URL = 'https://etudia-v41-api.onrender.com';
        let currentSection = 'dashboard';
        let sidebarCollapsed = false;
        let currentAIMode = 'normal';
        let aiWidgetOpen = false;
        let userTokens = 2450;
        let chatSessions = {};
        let currentSession = 1;
        let sessionCounter = 1;
        
        /* ============================================
           üß≠ FONCTIONS DE NAVIGATION
           ============================================ */
        function showSection(sectionId) {
            // Cacher toutes les sections
            document.querySelectorAll('.content-section').forEach(section => {
                section.classList.remove('active');
            });
            
            // Afficher la section demand√©e
            const targetSection = document.getElementById(sectionId);
            if (targetSection) {
                targetSection.classList.add('active');
            }
            
            // Mettre √† jour la navigation
            document.querySelectorAll('.nav-link').forEach(link => {
                link.classList.remove('active');
            });
            
            const activeLink = document.querySelector(`[data-section="${sectionId}"]`);
            if (activeLink) {
                activeLink.classList.add('active');
            }
            
            currentSection = sectionId;
            
            // Fermer le menu mobile si ouvert
            closeMobileMenu();
            
            // Toast de notification
            showToast(`Section ${getSectionName(sectionId)} ouverte`, 'success');
        }
        
        function getSectionName(sectionId) {
            const names = {
                'dashboard': 'Dashboard',
                'chat-ia': 'Chat IA',
                'cours': 'Mes Cours',
                'devoirs': 'Devoirs',
                'notes': 'Notes & R√©sultats',
                'planning': 'Planning',
                'bibliotheque': 'Biblioth√®que',
                'documents': 'Mes Documents',
                'gamification': 'Gamification',
                'parrainage': 'Parrainage',
                'liaison-parents': 'Liaison Parents',
                'communaute': 'Communaut√©',
                'profil': 'Mon Profil',
                'abonnement': 'Abonnement',
                'parametres': 'Param√®tres',
                'aide': 'Aide & Support'
            };
            return names[sectionId] || sectionId;
        }
        
        /* ============================================
           üì± FONCTIONS SIDEBAR
           ============================================ */
        function toggleSidebar() {
            const sidebar = document.getElementById('sidebar');
            const toggleBtn = document.getElementById('toggleSidebar');
            
            sidebar.classList.toggle('collapsed');
            sidebarCollapsed = !sidebarCollapsed;
            
            // Changer l'ic√¥ne
            const icon = toggleBtn.querySelector('i');
            icon.className = sidebarCollapsed ? 'fas fa-chevron-right' : 'fas fa-chevron-left';
        }
        
        function toggleMobileMenu() {
            const sidebar = document.getElementById('sidebar');
            const overlay = document.getElementById('mobileOverlay');
            
            sidebar.classList.toggle('mobile-open');
            overlay.classList.toggle('active');
        }
        
        function closeMobileMenu() {
            const sidebar = document.getElementById('sidebar');
            const overlay = document.getElementById('mobileOverlay');
            
            sidebar.classList.remove('mobile-open');
            overlay.classList.remove('active');
        }
        
        /* ============================================
           ü§ñ WIDGET IA FLOTTANT - FONCTIONS PRINCIPALES
           ============================================ */
        function toggleAIWidget() {
            const widget = document.getElementById('aiWidgetContainer');
            const toggleBtn = document.getElementById('aiToggleBtn');
            
            if (aiWidgetOpen) {
                widget.style.display = 'none';
                toggleBtn.innerHTML = '<i class="fas fa-robot"></i><div class="ai-status-indicator"></div>';
                aiWidgetOpen = false;
                showToast('Widget IA ferm√©', 'info');
            } else {
                widget.style.display = 'flex';
                toggleBtn.innerHTML = '<i class="fas fa-times"></i><div class="ai-status-indicator"></div>';
                aiWidgetOpen = true;
                showToast('Widget IA ouvert', 'success');
                
                // Focus sur l'input
                setTimeout(() => {
                    document.getElementById('aiWidgetTextarea').focus();
                }, 100);
            }
        }
        
        function minimizeAIWidget() {
            const widget = document.getElementById('aiWidgetContainer');
            widget.style.display = 'none';
            aiWidgetOpen = false;
            
            const toggleBtn = document.getElementById('aiToggleBtn');
            toggleBtn.innerHTML = '<i class="fas fa-robot"></i><div class="ai-status-indicator"></div>';
        }
        
        function closeAIWidget() {
            minimizeAIWidget();
        }
        
        function setWidgetMode(mode) {
            currentAIMode = mode;
            
            // Mettre √† jour les boutons
            document.querySelectorAll('.ai-mode-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            document.querySelector(`[data-mode="${mode}"]`).classList.add('active');
            
            // Descriptions des modes
            const descriptions = {
                'normal': 'Mode Normal : Conversation √©quilibr√©e',
                'step_by_step': 'Mode √âtape par √âtape : R√©solution progressive',
                'direct_solution': 'Mode Solution Directe : R√©ponse compl√®te',
                'audio': 'Mode Audio : R√©ponses pour synth√®se vocale'
            };
            
            showToast(`${descriptions[mode]} activ√©`, 'success');
        }
        
        function handleWidgetKeyDown(event) {
            if (event.key === 'Enter' && !event.shiftKey) {
                event.preventDefault();
                sendWidgetMessage();
            }
        }
        
        function autoResizeWidget(textarea) {
            textarea.style.height = 'auto';
            textarea.style.height = Math.min(textarea.scrollHeight, 80) + 'px';
            
            // Activer/d√©sactiver le bouton d'envoi
            const sendBtn = document.getElementById('aiWidgetSendBtn');
            sendBtn.disabled = textarea.value.trim() === '';
        }
        
        /* ============================================
           üîå FONCTIONS API - PRODUCTION R√âELLE
           ============================================ */
        async function sendWidgetMessage() {
            const textarea = document.getElementById('aiWidgetTextarea');
            const message = textarea.value.trim();
            
            if (!message) return;
            
            // Ajouter le message utilisateur
            addWidgetMessage(message, 'user');
            
            // Vider et r√©initialiser l'input
            textarea.value = '';
            textarea.style.height = 'auto';
            document.getElementById('aiWidgetSendBtn').disabled = true;
            
            // Simuler la frappe de l'IA
            addWidgetMessage('IA en train d\'√©crire...', 'ai', true);
            
            try {
                // üî• APPEL API R√âEL VERS NOTRE BACKEND
                const response = await fetch(`${API_BASE_URL}/api/chat`, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({
                        message: message,
                        mode: currentAIMode,
                        userId: 'PACOUSSTAR',
                        sessionId: currentSession
                    })
                });
                
                if (response.ok) {
                    const data = await response.json();
                    const aiResponse = data.response || data.message || 'R√©ponse re√ßue !';
                    
                    // Remplacer le message de frappe par la vraie r√©ponse
                    replaceLastWidgetMessage(aiResponse);
                    
                    // D√©compter les tokens
                    const tokensUsed = getTokensForMode();
                    userTokens -= tokensUsed;
                    updateTokensDisplay();
                    
                    // Toast de succ√®s
                    showToast(`R√©ponse IA re√ßue (-${tokensUsed} tokens)`, 'success');
                } else {
                    throw new Error(`Erreur API: ${response.status}`);
                }
            } catch (error) {
                console.error('Erreur API:', error);
                
                // Fallback avec r√©ponse intelligente
                const aiResponse = generateSmartResponse(message);
                replaceLastWidgetMessage(aiResponse);
                
                // D√©compter les tokens m√™me en simulation
                const tokensUsed = getTokensForMode();
                userTokens -= tokensUsed;
                updateTokensDisplay();
                
                showToast(`Mode offline - R√©ponse simul√©e (-${tokensUsed} tokens)`, 'warning');
            }
        }
        
        function addWidgetMessage(message, sender, isTyping = false) {
            const messagesContainer = document.getElementById('aiWidgetMessages');
            
            const messageElement = document.createElement('div');
            messageElement.className = `ai-widget-message ${sender}`;
            
            const avatar = sender === 'ai' ? 'ü§ñ' : 'P';
            
            messageElement.innerHTML = `
                <div class="ai-message-avatar">${avatar}</div>
                <div class="ai-message-content ${isTyping ? 'typing' : ''}">${message}</div>
            `;
            
            messagesContainer.appendChild(messageElement);
            messagesContainer.scrollTop = messagesContainer.scrollHeight;
        }
        
        function replaceLastWidgetMessage(newMessage) {
            const messagesContainer = document.getElementById('aiWidgetMessages');
            const lastMessage = messagesContainer.lastElementChild;
            
            if (lastMessage) {
                const contentElement = lastMessage.querySelector('.ai-message-content');
                contentElement.textContent = newMessage;
                contentElement.classList.remove('typing');
            }
        }
        
        function expandToFullChat() {
            showSection('chat-ia');
            closeAIWidget();
            showToast('Chat complet ouvert', 'info');
        }
        
        /* ============================================
           üîß FONCTIONS UTILITAIRES
           ============================================ */
        function getTokensForMode() {
            const tokens = {
                'normal': 250,
                'step_by_step': 180,
                'direct_solution': 400,
                'audio': 200
            };
            return tokens[currentAIMode] || 250;
        }
        
        function generateSmartResponse(userMessage) {
            const responses = [
                `Excellente question sur "${userMessage.substring(0, 30)}..." ! En mode ${currentAIMode}, voici mon analyse d√©taill√©e. Cette question n√©cessite une approche m√©thodique pour bien comprendre les concepts cl√©s...`,
                `Pour r√©pondre √† "${userMessage.substring(0, 30)}...", je vais utiliser le mode ${currentAIMode}. Les √©l√©ments importants √† retenir sont la logique, la structure et l'application pratique...`,
                `Votre question "${userMessage.substring(0, 30)}..." est tr√®s pertinente ! En mode ${currentAIMode}, voici comment nous pouvons l'aborder de mani√®re efficace...`,
                `Int√©ressant ! Pour "${userMessage.substring(0, 30)}...", je recommande cette m√©thode d'analyse qui vous permettra de bien ma√Ætriser le sujet...`
            ];
            
            return responses[Math.floor(Math.random() * responses.length)];
        }
        
        function updateTokensDisplay() {
            // Mettre √† jour tous les affichages de tokens
            const displays = ['tokenDisplay', 'tokenCount'];
            displays.forEach(id => {
                const element = document.getElementById(id);
                if (element) {
                    element.textContent = userTokens;
                }
            });
            
            // Mettre √† jour le widget footer
            const tokensLeft = document.querySelector('.tokens-left');
            if (tokensLeft) {
                tokensLeft.textContent = `Tokens: ${userTokens}`;
            }
        }
        
        function toggleTheme() {
            const body = document.body;
            const currentTheme = body.getAttribute('data-theme');
            const newTheme = currentTheme === 'dark' ? 'light' : 'dark';
            
            body.setAttribute('data-theme', newTheme);
            
            const themeIcon = document.getElementById('themeIcon');
            if (themeIcon) {
                themeIcon.className = newTheme === 'dark' ? 'fas fa-sun' : 'fas fa-moon';
            }
            
            showToast(`Th√®me ${newTheme === 'dark' ? 'sombre' : 'clair'} activ√©`, 'info');
        }
        
        function toggleUserDropdown() {
            const dropdown = document.getElementById('userDropdown');
            if (dropdown) {
                dropdown.classList.toggle('show');
            }
        }
        
        /* ============================================
           üîî SYST√àME TOAST NOTIFICATIONS
           ============================================ */
        function showToast(message, type = 'info') {
            const container = document.getElementById('toastContainer');
            
            const toast = document.createElement('div');
            toast.className = `toast ${type}`;
            toast.innerHTML = `
                <div class="toast-header">
                    <h4 class="toast-title">${getToastTitle(type)}</h4>
                    <button class="toast-close" onclick="this.parentElement.parentElement.remove()">√ó</button>
                </div>
                <p class="toast-message">${message}</p>
            `;
            
            container.appendChild(toast);
            
            // Animer l'apparition
            setTimeout(() => toast.classList.add('show'), 100);
            
            // Auto-suppression apr√®s 4 secondes
            setTimeout(() => {
                toast.classList.remove('show');
                setTimeout(() => toast.remove(), 300);
            }, 4000);
        }
        
        function getToastTitle(type) {
            const titles = {
                'success': '‚úÖ Succ√®s',
                'error': '‚ùå Erreur',
                'warning': '‚ö†Ô∏è Attention',
                'info': '‚ÑπÔ∏è Information'
            };
            return titles[type] || 'Notification';
        }
        
        /* ============================================
           üéÆ FONCTIONS INTERACTIVES
           ============================================ */
        function attachDocument() {
            showToast('Fonction upload document - Bient√¥t disponible !', 'info');
        }
        
        function startVoiceInput() {
            showToast('Saisie vocale - Bient√¥t disponible !', 'info');
        }
        
        function sendMessage() {
            const textarea = document.getElementById('chatInputFull');
            if (textarea && textarea.value.trim()) {
                const message = textarea.value.trim();
                showToast(`Message envoy√©: ${message.substring(0, 30)}...`, 'success');
                textarea.value = '';
            }
        }
        
        function sendMessageFull() {
            sendMessage();
        }
        
        function insertQuickPrompt(prompt) {
            const textarea = document.getElementById('chatInputFull');
            if (textarea) {
                textarea.value = prompt + ' ';
                textarea.focus();
            }
        }
        
        function newChatSession() {
            sessionCounter++;
            showToast(`Nouvelle session ${sessionCounter} cr√©√©e`, 'success');
        }
        
        function clearChat() {
            showToast('Chat effac√©', 'info');
        }
        
        function exportChat() {
            showToast('Export du chat - Fonctionnalit√© bient√¥t disponible !', 'info');
        }
        
        /* ============================================
           üìä ANIMATIONS DES STATISTIQUES
           ============================================ */
        function animateStats() {
            document.querySelectorAll('.stat-value').forEach(stat => {
                const text = stat.textContent;
                let numericValue;
                
                if (text.includes('F') || text.includes('FCFA')) {
                    numericValue = parseFloat(text.replace(/[^0-9.]/g, ''));
                } else if (text.includes('Level')) {
                    numericValue = parseFloat(text.replace('Level ', ''));
                } else {
                    numericValue = parseFloat(text.replace(/[^0-9.]/g, ''));
                }
                
                if (!isNaN(numericValue) && numericValue > 0) {
                    let current = 0;
                    const increment = numericValue / 50;
                    
                    const timer = setInterval(() => {
                        current += increment;
                        if (current >= numericValue) {
                            current = numericValue;
                            clearInterval(timer);
                            stat.textContent = text;
                        } else {
                            if (text.includes('F') || text.includes('FCFA')) {
                                stat.textContent = Math.floor(current).toLocaleString() + 'F';
                            } else if (text.includes('Level')) {
                                stat.textContent = 'Level ' + Math.floor(current);
                            } else {
                                stat.textContent = Math.floor(current);
                            }
                        }
                    }, 30);
                }
            });
        }
        
        /* ============================================
           üîÑ FONCTIONS DE SAUVEGARDE ET PERSISTENCE
           ============================================ */
        function saveUserData() {
            const userData = {
                tokens: userTokens,
                currentMode: currentAIMode,
                sidebarCollapsed: sidebarCollapsed,
                lastSection: currentSection,
                timestamp: Date.now()
            };
            
            try {
                localStorage.setItem('etudia_user_data', JSON.stringify(userData));
            } catch (error) {
                console.log('Sauvegarde en m√©moire uniquement');
                window.etudiaUserData = userData;
            }
        }
        
        function loadUserData() {
            try {
                const saved = localStorage.getItem('etudia_user_data');
                if (saved) {
                    const userData = JSON.parse(saved);
                    userTokens = userData.tokens || 2450;
                    currentAIMode = userData.currentMode || 'normal';
                    sidebarCollapsed = userData.sidebarCollapsed || false;
                    currentSection = userData.lastSection || 'dashboard';
                    updateTokensDisplay();
                }
            } catch (error) {
                console.log('Chargement depuis m√©moire');
                if (window.etudiaUserData) {
                    const userData = window.etudiaUserData;
                    userTokens = userData.tokens || 2450;
                    currentAIMode = userData.currentMode || 'normal';
                }
            }
        }
        
        /* ============================================
           üì± GESTION RESPONSIVE
           ============================================ */
        function handleResize() {
            const isMobile = window.innerWidth <= 768;
            const sidebar = document.getElementById('sidebar');
            
            if (isMobile && sidebar) {
                sidebar.classList.remove('mobile-open');
            }
            
            // Ajuster le widget IA selon la taille d'√©cran
            const widget = document.getElementById('aiWidgetContainer');
            if (widget && aiWidgetOpen) {
                if (isMobile) {
                    widget.style.width = '280px';
                    widget.style.height = '350px';
                } else {
                    widget.style.width = '350px';
                    widget.style.height = '500px';
                }
            }
        }
        
        /* ============================================
           üéØ FONCTIONS D'INITIALISATION
           ============================================ */
        function initializeBackoffice() {
            // Charger les donn√©es utilisateur
            loadUserData();
            
            // Afficher la section par d√©faut
            showSection(currentSection);
            
            // Configurer les event listeners
            setupEventListeners();
            
            // Animer les stats
            setTimeout(animateStats, 500);
            
            // Notification de bienvenue
            setTimeout(() => {
                showToast('üéì Bienvenue sur √âtudIA V4.1 ! Assistant IA pr√™t.', 'success');
            }, 1000);
            
            // Sauvegarde automatique toutes les 30 secondes
            setInterval(saveUserData, 30000);
            
            console.log('üöÄ √âtudIA V4.1 Backoffice √âl√®ves initialis√© avec succ√®s !');
        }
        
        function setupEventListeners() {
            // Mobile menu
            const mobileMenuBtn = document.getElementById('mobileMenuBtn');
            if (mobileMenuBtn) {
                mobileMenuBtn.addEventListener('click', toggleMobileMenu);
            }
            
            const mobileOverlay = document.getElementById('mobileOverlay');
            if (mobileOverlay) {
                mobileOverlay.addEventListener('click', closeMobileMenu);
            }
            
            // Auto-resize pour les textareas
            const chatInput = document.getElementById('chatInputFull');
            if (chatInput) {
                chatInput.addEventListener('input', function() {
                    this.style.height = 'auto';
                    this.style.height = Math.min(this.scrollHeight, 120) + 'px';
                });
                
                chatInput.addEventListener('keydown', function(event) {
                    if (event.key === 'Enter' && event.ctrlKey) {
                        event.preventDefault();
                        sendMessage();
                    }
                });
            }
            
            // Fermer dropdown si clic ailleurs
            document.addEventListener('click', function(event) {
                if (!event.target.closest('.user-dropdown')) {
                    const dropdown = document.getElementById('userDropdown');
                    if (dropdown) {
                        dropdown.classList.remove('show');
                    }
                }
            });
            
            // Responsive
            window.addEventListener('resize', handleResize);
            
            // Raccourcis clavier
            document.addEventListener('keydown', function(event) {
                // Ctrl+K : Focus sur widget IA
                if (event.ctrlKey && event.key === 'k') {
                    event.preventDefault();
                    if (!aiWidgetOpen) {
                        toggleAIWidget();
                    }
                    document.getElementById('aiWidgetTextarea')?.focus();
                }
                
                // Ctrl+1 √† Ctrl+4 : Modes IA
                if (event.ctrlKey && event.key >= '1' && event.key <= '4') {
                    event.preventDefault();
                    const modes = ['normal', 'step_by_step', 'direct_solution', 'audio'];
                    setWidgetMode(modes[parseInt(event.key) - 1]);
                }
                
                // Ctrl+D : Dashboard
                if (event.ctrlKey && event.key === 'd') {
                    event.preventDefault();
                    showSection('dashboard');
                }
                
                // Ctrl+Shift+C : Chat IA
                if (event.ctrlKey && event.shiftKey && event.key === 'C') {
                    event.preventDefault();
                    showSection('chat-ia');
                }
                
                // Escape : Fermer widget IA
                if (event.key === 'Escape' && aiWidgetOpen) {
                    closeAIWidget();
                }
            });
        }
        
        /* ============================================
           üéâ NOTIFICATIONS AUTOMATIQUES
           ============================================ */
        function startNotifications() {
            // Notification de tokens
            setTimeout(() => {
                if (userTokens < 500) {
                    showToast('‚ö†Ô∏è Attention : Il vous reste moins de 500 tokens !', 'warning');
                }
            }, 5000);
            
            // Notification de parrainage
            setTimeout(() => {
                showToast('üí∞ Nouveau gain de parrainage : +500 FCFA !', 'success');
            }, 15000);
            
            // Notification de progression
            setTimeout(() => {
                showToast('üèÜ Bravo ! Vous avez gagn√© 50 XP !', 'success');
            }, 25000);
        }
        
        /* ============================================
           üöÄ INITIALISATION AU CHARGEMENT
           ============================================ */
        document.addEventListener('DOMContentLoaded', function() {
            initializeBackoffice();
            startNotifications();
        });
        
        // Sauvegarde avant fermeture
        window.addEventListener('beforeunload', function() {
            saveUserData();
        });
        
        /* ============================================
           üîß FONCTIONS PUBLIQUES EXPOS√âES
           ============================================ */
        window.EtudIA = {
            showSection,
            toggleAIWidget,
            setWidgetMode,
            sendWidgetMessage,
            showToast,
            updateTokensDisplay,
            toggleTheme,
            toggleSidebar,
            version: '4.1.0',
            mode: 'production'
        };
        
        console.log('üéì √âtudIA V4.1 - Backoffice √âl√®ves charg√© !');
        console.log('ü§ñ Widget IA DeepSeek R1 op√©rationnel !');
        console.log('üîó API Backend:', API_BASE_URL);
    </script>
    
    <!-- ===============================
         üî• FIN PARTIE 5/6 : WIDGET IA FLOTTANT + JAVASCRIPT COMPLET
         =============================== -->
