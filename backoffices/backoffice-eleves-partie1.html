<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ü§ñ Interface IA - √âtudIA V4.1</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        :root {
            --etudia-dark: #0a0e1a;
            --etudia-card: #1a1f2e;
            --etudia-primary: #FF6B35;
            --etudia-secondary: #10B981;
            --etudia-accent: #3B82F6;
            --etudia-warning: #F59E0B;
            --etudia-success: #10B981;
            --etudia-white: #FFFFFF;
            --glass-bg: rgba(255, 255, 255, 0.1);
            --glass-border: rgba(255, 255, 255, 0.2);
            --border-radius: 12px;
            --transition: all 0.3s ease;
            --gradient-primary: linear-gradient(135deg, #FF6B35, #EF4444);
            --gradient-secondary: linear-gradient(135deg, #10B981, #3B82F6);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #0a0e1a 0%, #1a1f2e 100%);
            color: var(--etudia-white);
            min-height: 100vh;
            padding: 2rem;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
        }

        .section-title {
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--etudia-white);
            margin-bottom: 1.5rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        /* Interface IA Container */
        .ia-interface-container {
            background: var(--glass-bg);
            backdrop-filter: blur(20px);
            border: 1px solid var(--glass-border);
            border-radius: 20px;
            padding: 1.5rem;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.3);
            position: relative;
        }

        /* Chat Header avec Stats */
        .chat-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 1rem;
            background: rgba(0, 0, 0, 0.2);
            border-radius: var(--border-radius);
            margin-bottom: 1rem;
        }

        .ia-info {
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        .ia-avatar {
            width: 50px;
            height: 50px;
            background: var(--gradient-primary);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.8rem;
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }

        .ia-details h3 {
            font-size: 1.1rem;
            margin-bottom: 0.3rem;
        }

        .ia-status {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            font-size: 0.85rem;
            color: rgba(255, 255, 255, 0.7);
        }

        .status-dot {
            width: 8px;
            height: 8px;
            background: var(--etudia-success);
            border-radius: 50%;
            animation: blink 2s infinite;
        }

        @keyframes blink {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }

        .tokens-display {
            background: rgba(255, 107, 53, 0.1);
            border: 1px solid rgba(255, 107, 53, 0.3);
            border-radius: var(--border-radius);
            padding: 0.8rem 1.2rem;
            text-align: center;
        }

        .tokens-count {
            font-size: 1.4rem;
            font-weight: 700;
            color: var(--etudia-primary);
            margin-bottom: 0.2rem;
        }

        .tokens-label {
            font-size: 0.8rem;
            color: rgba(255, 255, 255, 0.7);
        }

        /* Modes d'apprentissage */
        .learning-modes {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 0.8rem;
            margin-bottom: 1.5rem;
        }

        .mode-card {
            background: rgba(255, 255, 255, 0.05);
            border: 2px solid transparent;
            border-radius: var(--border-radius);
            padding: 1rem;
            cursor: pointer;
            transition: var(--transition);
            text-align: center;
            position: relative;
            overflow: hidden;
        }

        .mode-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.1), transparent);
            transition: left 0.5s;
        }

        .mode-card:hover::before {
            left: 100%;
        }

        .mode-card.active {
            border-color: var(--etudia-primary);
            background: rgba(255, 107, 53, 0.1);
            transform: scale(1.02);
        }

        .mode-card:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
        }

        .mode-icon {
            font-size: 2rem;
            margin-bottom: 0.5rem;
            display: block;
        }

        .mode-title {
            font-weight: 600;
            margin-bottom: 0.3rem;
            font-size: 0.9rem;
        }

        .mode-desc {
            font-size: 0.75rem;
            color: rgba(255, 255, 255, 0.7);
            margin-bottom: 0.5rem;
        }

        .mode-tokens {
            background: rgba(0, 0, 0, 0.3);
            padding: 0.2rem 0.5rem;
            border-radius: 20px;
            font-size: 0.7rem;
            color: var(--etudia-warning);
            font-weight: 600;
        }

        /* Chat Messages Area */
        .chat-area {
            background: rgba(0, 0, 0, 0.2);
            border-radius: var(--border-radius);
            height: 400px;
            margin-bottom: 1rem;
            display: flex;
            flex-direction: column;
        }

        .messages-container {
            flex: 1;
            overflow-y: auto;
            padding: 1rem;
            display: flex;
            flex-direction: column;
            gap: 1rem;
        }

        .message {
            display: flex;
            gap: 0.8rem;
            animation: slideIn 0.3s ease;
        }

        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .message.user {
            flex-direction: row-reverse;
        }

        .message-avatar {
            width: 35px;
            height: 35px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.2rem;
            flex-shrink: 0;
        }

        .message.ai .message-avatar {
            background: var(--gradient-primary);
        }

        .message.user .message-avatar {
            background: var(--gradient-secondary);
        }

        .message-content {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 15px;
            padding: 0.8rem 1rem;
            max-width: 80%;
            word-wrap: break-word;
        }

        .message.user .message-content {
            background: rgba(255, 107, 53, 0.2);
            border: 1px solid rgba(255, 107, 53, 0.3);
        }

        .message-text {
            font-size: 0.9rem;
            line-height: 1.4;
        }

        .message-time {
            font-size: 0.7rem;
            color: rgba(255, 255, 255, 0.5);
            margin-top: 0.3rem;
        }

        /* Input Area */
        .input-area {
            display: flex;
            gap: 0.8rem;
            padding: 1rem;
            background: rgba(0, 0, 0, 0.1);
            border-radius: 0 0 var(--border-radius) var(--border-radius);
        }

        .input-container {
            flex: 1;
            position: relative;
        }

        .message-input {
            width: 100%;
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid var(--glass-border);
            border-radius: 25px;
            padding: 0.8rem 1rem;
            color: var(--etudia-white);
            font-size: 0.9rem;
            resize: none;
            min-height: 45px;
            max-height: 120px;
        }

        .message-input::placeholder {
            color: rgba(255, 255, 255, 0.5);
        }

        .message-input:focus {
            outline: none;
            border-color: var(--etudia-primary);
            box-shadow: 0 0 0 2px rgba(255, 107, 53, 0.2);
        }

        .send-button {
            background: var(--gradient-primary);
            border: none;
            border-radius: 50%;
            width: 45px;
            height: 45px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: var(--transition);
            color: white;
            font-size: 1.1rem;
        }

        .send-button:hover {
            transform: scale(1.1) rotate(10deg);
            box-shadow: 0 5px 20px rgba(255, 107, 53, 0.4);
        }

        .send-button:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none;
        }

        /* Bouton Flottant IA */
        .floating-ai-button {
            position: fixed;
            bottom: 20px;
            right: 20px;
            width: 60px;
            height: 60px;
            background: var(--gradient-primary);
            border: none;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            box-shadow: 0 10px 30px rgba(255, 107, 53, 0.4);
            z-index: 1000;
            transition: var(--transition);
            font-size: 1.8rem;
            animation: pulse 2s infinite;
        }

        .floating-ai-button:hover {
            transform: scale(1.1) rotate(10deg);
            box-shadow: 0 15px 40px rgba(255, 107, 53, 0.6);
        }

        /* Actions Rapides */
        .quick-actions {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 0.8rem;
            margin-top: 1.5rem;
        }

        .quick-action {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid var(--glass-border);
            border-radius: var(--border-radius);
            padding: 1rem;
            text-align: center;
            cursor: pointer;
            transition: var(--transition);
        }

        .quick-action:hover {
            transform: translateY(-2px);
            border-color: var(--etudia-primary);
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.2);
        }

        .quick-action-icon {
            font-size: 1.5rem;
            margin-bottom: 0.5rem;
            display: block;
        }

        .quick-action-title {
            font-weight: 600;
            margin-bottom: 0.3rem;
            font-size: 0.9rem;
        }

        .quick-action-desc {
            font-size: 0.75rem;
            color: rgba(255, 255, 255, 0.7);
        }

        @media (max-width: 768px) {
            body {
                padding: 1rem;
            }
            
            .learning-modes {
                grid-template-columns: 1fr;
            }
            
            .chat-header {
                flex-direction: column;
                gap: 1rem;
            }
            
            .quick-actions {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- ===== D√âBUT SECTION INTERFACE IA V4.1 ===== -->
        <!-- üéØ √Ä INS√âRER : Remplacer le contenu de <section id="ia-chat" class="content-section"> -->

        <section id="ia-chat" class="content-section">
            <h2 class="section-title">ü§ñ Interface IA - DeepSeek R1</h2>
            
            <div class="ia-interface-container">
                <!-- Chat Header avec informations -->
                <div class="chat-header">
                    <div class="ia-info">
                        <div class="ia-avatar">ü§ñ</div>
                        <div class="ia-details">
                            <h3>Assistant √âtudIA DeepSeek R1</h3>
                            <div class="ia-status">
                                <div class="status-dot"></div>
                                <span>En ligne ‚Ä¢ Multi-sessions ‚Ä¢ API Directe</span>
                            </div>
                        </div>
                    </div>
                    <div class="tokens-display">
                        <div class="tokens-count">847</div>
                        <div class="tokens-label">Tokens Restants</div>
                    </div>
                </div>

                <!-- Modes d'apprentissage -->
                <div class="learning-modes">
                    <div class="mode-card active" data-mode="normal">
                        <span class="mode-icon">üí¨</span>
                        <div class="mode-title">Mode Normal</div>
                        <div class="mode-desc">Conversation √©quilibr√©e et naturelle</div>
                        <div class="mode-tokens">250 tokens</div>
                    </div>
                    
                    <div class="mode-card" data-mode="step">
                        <span class="mode-icon">üìä</span>
                        <div class="mode-title">√âtape par √âtape</div>
                        <div class="mode-desc">D√©composition p√©dagogique progressive</div>
                        <div class="mode-tokens">180 tokens</div>
                    </div>
                    
                    <div class="mode-card" data-mode="direct">
                        <span class="mode-icon">‚ö°</span>
                        <div class="mode-title">Solution Directe</div>
                        <div class="mode-desc">R√©ponse imm√©diate et efficace</div>
                        <div class="mode-tokens">400 tokens</div>
                    </div>
                    
                    <div class="mode-card" data-mode="audio">
                        <span class="mode-icon">üé§</span>
                        <div class="mode-title">Mode Audio</div>
                        <div class="mode-desc">Optimis√© pour synth√®se vocale</div>
                        <div class="mode-tokens">200 tokens</div>
                    </div>
                </div>

                <!-- Zone de chat -->
                <div class="chat-area">
                    <div class="messages-container" id="messagesContainer">
                        <!-- Message de bienvenue -->
                        <div class="message ai">
                            <div class="message-avatar">ü§ñ</div>
                            <div class="message-content">
                                <div class="message-text">
                                    <strong>Salut Aya ! üëã</strong><br><br>
                                    Je suis ton assistant IA √âtudIA avec DeepSeek R1 üöÄ<br><br>
                                    <strong>Interface Multi-Sessions V4.1 maintenant active !</strong><br><br>
                                    <strong>üÜï Nouvelles fonctionnalit√©s :</strong>
                                    <ul style="margin: 0.5rem 0; padding-left: 1rem;">
                                        <li>üí¨ <strong>Multi-sessions</strong> : Organise tes conversations par mati√®re</li>
                                        <li>üìÅ <strong>Gestion documents</strong> : Upload et analyse tes fichiers</li>
                                        <li>üîó <strong>API directe</strong> : Connexion OpenRouter ultra-rapide</li>
                                        <li>üéØ <strong>4 modes adaptatifs</strong> : IA qui s'adapte √† ton apprentissage</li>
                                    </ul>
                                    <em>Commence par s√©lectionner un mode d'apprentissage ou pose-moi une question !</em>
                                </div>
                                <div class="message-time">Maintenant</div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Zone de saisie -->
                    <div class="input-area">
                        <div class="input-container">
                            <textarea 
                                class="message-input" 
                                id="messageInput"
                                placeholder="Pose ta question √† DeepSeek R1... (Ctrl+Entr√©e pour envoyer)"
                                rows="1"
                            ></textarea>
                        </div>
                        <button class="send-button" id="sendButton" onclick="sendMessage()">
                            <i class="fas fa-paper-plane"></i>
                        </button>
                    </div>
                </div>

                <!-- Actions rapides -->
                <div class="quick-actions">
                    <div class="quick-action" onclick="quickQuestion('aide moi avec mes devoirs de math√©matiques')">
                        <span class="quick-action-icon">üìê</span>
                        <div class="quick-action-title">Aide Math√©matiques</div>
                        <div class="quick-action-desc">R√©solution d'exercices et explications</div>
                    </div>
                    
                    <div class="quick-action" onclick="quickQuestion('explique moi ce cours de physique')">
                        <span class="quick-action-icon">‚öóÔ∏è</span>
                        <div class="quick-action-title">Cours de Physique</div>
                        <div class="quick-action-desc">Explication de concepts scientifiques</div>
                    </div>
                    
                    <div class="quick-action" onclick="quickQuestion('corrige ma r√©daction fran√ßaise')">
                        <span class="quick-action-icon">‚úçÔ∏è</span>
                        <div class="quick-action-title">Aide Fran√ßais</div>
                        <div class="quick-action-desc">Correction et am√©lioration de textes</div>
                    </div>
                    
                    <div class="quick-action" onclick="showSection('documents')">
                        <span class="quick-action-icon">üìÑ</span>
                        <div class="quick-action-title">Upload Document</div>
                        <div class="quick-action-desc">Analyser un PDF ou une image</div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Bouton Flottant IA -->
        <button class="floating-ai-button" onclick="scrollToChat()" title="Retour au Chat IA">
            ü§ñ
        </button>

        <!-- ===== FIN SECTION INTERFACE IA V4.1 ===== -->
    </div>

    <script>
        let currentMode = 'normal';
        let isLoading = false;

        // Gestion des modes d'apprentissage
        document.querySelectorAll('.mode-card').forEach(card => {
            card.addEventListener('click', function() {
                const mode = this.dataset.mode;
                switchMode(mode);
            });
        });

        function switchMode(mode) {
            currentMode = mode;
            
            // Mise √† jour visuelle des modes
            document.querySelectorAll('.mode-card').forEach(card => {
                card.classList.remove('active');
            });
            document.querySelector(`[data-mode="${mode}"]`).classList.add('active');
            
            // Feedback utilisateur
            showNotification(`Mode ${getModeDisplayName(mode)} activ√© !`);
        }

        function getModeDisplayName(mode) {
            const names = {
                'normal': 'Normal',
                'step': '√âtape par √âtape',
                'direct': 'Solution Directe',
                'audio': 'Audio'
            };
            return names[mode] || 'Normal';
        }

        // Gestion des messages
        function sendMessage() {
            const input = document.getElementById('messageInput');
            const message = input.value.trim();
            
            if (!message || isLoading) return;
            
            // Ajouter le message utilisateur
            addMessage('user', message);
            input.value = '';
            
            // Simuler la r√©ponse IA
            simulateAIResponse(message);
        }

        function addMessage(type, content) {
            const container = document.getElementById('messagesContainer');
            const messageDiv = document.createElement('div');
            messageDiv.className = `message ${type}`;
            
            const avatar = type === 'ai' ? 'ü§ñ' : 'üë®‚Äçüéì';
            const time = new Date().toLocaleTimeString('fr-FR', { 
                hour: '2-digit', 
                minute: '2-digit' 
            });
            
            messageDiv.innerHTML = `
                <div class="message-avatar">${avatar}</div>
                <div class="message-content">
                    <div class="message-text">${content}</div>
                    <div class="message-time">${time}</div>
                </div>
            `;
            
            container.appendChild(messageDiv);
            container.scrollTop = container.scrollHeight;
        }

        function simulateAIResponse(userMessage) {
            isLoading = true;
            document.getElementById('sendButton').disabled = true;
            
            // Ajouter indicateur de frappe
            const typingDiv = document.createElement('div');
            typingDiv.className = 'message ai typing';
            typingDiv.innerHTML = `
                <div class="message-avatar">ü§ñ</div>
                <div class="message-content">
                    <div class="message-text">√âtudIA r√©fl√©chit... ü§î</div>
                </div>
            `;
            
            const container = document.getElementById('messagesContainer');
            container.appendChild(typingDiv);
            container.scrollTop = container.scrollHeight;
            
            // Simuler le temps de r√©ponse
            setTimeout(() => {
                container.removeChild(typingDiv);
                
                // G√©n√©rer une r√©ponse bas√©e sur le mode actuel
                let response = generateModeSpecificResponse(userMessage, currentMode);
                addMessage('ai', response);
                
                // D√©cr√©menter les tokens (simulation)
                updateTokenCount();
                
                isLoading = false;
                document.getElementById('sendButton').disabled = false;
            }, 2000);
        }

        function generateModeSpecificResponse(message, mode) {
            const responses = {
                'normal': `Excellente question ! Voici ma r√©ponse en mode conversationnel normal. Je vais t'expliquer cela de mani√®re √©quilibr√©e et naturelle.`,
                'step': `üìä **√âtape 1 :** Analysons ton probl√®me\nüìä **√âtape 2 :** Identifions la m√©thode\nüìä **√âtape 3 :** Appliquons la solution\nüìä **√âtape 4 :** V√©rifions le r√©sultat`,
                'direct': `‚ö° **R√©ponse directe :** Voici la solution imm√©diate √† ta question. La r√©ponse est claire et sans d√©tours.`,
                'audio': `üé§ Voici ma r√©ponse optimis√©e pour l'audio. Je parle clairement et distinctement pour que tu puisses bien comprendre.`
            };
            
            return responses[mode] || responses['normal'];
        }

        function updateTokenCount() {
            const tokenElement = document.querySelector('.tokens-count');
            let currentTokens = parseInt(tokenElement.textContent);
            
            const tokenCosts = {
                'normal': 25,
                'step': 18,
                'direct': 40,
                'audio': 20
            };
            
            currentTokens -= tokenCosts[currentMode] || 25;
            tokenElement.textContent = Math.max(0, currentTokens);
            
            if (currentTokens < 100) {
                tokenElement.style.color = '#EF4444';
                showNotification('‚ö†Ô∏è Attention : Il te reste peu de tokens !');
            }
        }

        function quickQuestion(question) {
            document.getElementById('messageInput').value = question;
            sendMessage();
        }

        function scrollToChat() {
            document.querySelector('.chat-area').scrollIntoView({ 
                behavior: 'smooth' 
            });
        }

        function showNotification(message) {
            const notification = document.createElement('div');
            notification.style.cssText = `
                position: fixed;
                top: 20px;
                right: 20px;
                background: var(--gradient-primary);
                color: white;
                padding: 1rem 1.5rem;
                border-radius: 12px;
                font-weight: 600;
                z-index: 9999;
                animation: slideIn 0.3s ease;
                max-width: 300px;
            `;
            notification.textContent = message;
            document.body.appendChild(notification);
            
            setTimeout(() => {
                notification.remove();
            }, 3000);
        }

        function showSection(sectionId) {
            console.log(`Navigation vers ${sectionId}`);
            showNotification(`Redirection vers ${sectionId}...`);
        }

        // Gestion du clavier
        document.getElementById('messageInput').addEventListener('keydown', function(e) {
            if (e.ctrlKey && e.key === 'Enter') {
                sendMessage();
            }
            
            // Auto-resize
            this.style.height = 'auto';
            this.style.height = Math.min(this.scrollHeight, 120) + 'px';
        });

        // Animation d'entr√©e
        document.addEventListener('DOMContentLoaded', function() {
            const elements = document.querySelectorAll('.mode-card, .quick-action');
            elements.forEach((el, index) => {
                el.style.opacity = '0';
                el.style.transform = 'translateY(20px)';
                setTimeout(() => {
                    el.style.transition = 'all 0.6s ease';
                    el.style.opacity = '1';
                    el.style.transform = 'translateY(0)';
                }, index * 100);
            });
        });
    </script>
</body>
</html>
