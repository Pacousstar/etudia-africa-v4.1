<button onclick="quickAction('M√©thode r√©vision')" style="padding: 0.5rem 1rem; background: var(--bg-tertiary); border: 1px solid var(--border-color); border-radius: var(--radius-md); color: var(--text-primary); cursor: pointer; font-size: 0.875rem; transition: all var(--transition-base);">
                                üéØ M√©thode r√©vision
                            </button>
                        </div>

                    </div>
                </div>

            </section>

            <!-- üìä DASHBOARD PRINCIPAL -->
            <section class="content-section active" id="dashboard-section">
                
                <!-- üéâ MESSAGE BIENVENUE -->
                <div class="welcome-message slide-up">
                    <h2 style="font-size: 1.5rem; font-weight: 700; margin-bottom: 0.5rem; position: relative; z-index: 2;">
                        üåü Bienvenue Jean-Baptiste !
                    </h2>
                    <p style="font-size: 1rem; opacity: 0.9; position: relative; z-index: 2;">
                        Pr√™t √† r√©volutionner ton apprentissage avec √âtudIA ? D√©couvre tes statistiques et commence √† gagner avec le parrainage !
                    </p>
                </div>

                <!-- üìä STATS GRID PRINCIPAL -->
                <div class="stats-grid fade-in">
                    
                    <!-- üíé ABONNEMENT ACTUEL -->
                    <div class="stat-card hover-lift">
                        <span class="stat-icon">üíé</span>
                        <span class="stat-value" id="planValue">Premium</span>
                        <span class="stat-label">Mon Plan</span>
                        <span class="stat-change positive">6,500 F/mois</span>
                    </div>

                    <!-- ü§ñ INTERACTIONS -->
                    <div class="stat-card hover-lift">
                        <span class="stat-icon">ü§ñ</span>
                        <span class="stat-value" id="interactionsValue">1,247</span>
                        <span class="stat-label">Interactions Restantes</span>
                        <span class="stat-change positive">+23 aujourd'hui</span>
                    </div>

                    <!-- üí∞ GAINS PARRAINAGE -->
                    <div class="stat-card hover-lift">
                        <span class="stat-icon">üí∞</span>
                        <span class="stat-value" id="earningsValue">12,450</span>
                        <span class="stat-label">Gains Parrainage (F)</span>
                        <span class="stat-change positive">+850 F ce mois</span>
                    </div>

                    <!-- üë• FILLEULS ACTIFS -->
                    <div class="stat-card hover-lift">
                        <span class="stat-icon">üë•</span>
                        <span class="stat-value" id="referralsValue">8</span>
                        <span class="stat-label">Filleuls Actifs</span>
                        <span class="stat-change positive">+2 cette semaine</span>
                    </div>

                    <!-- üìö COURS SUIVIS -->
                    <div class="stat-card hover-lift">
                        <span class="stat-icon">üìö</span>
                        <span class="stat-value" id="coursesValue">12</span>
                        <span class="stat-label">Cours Suivis</span>
                        <span class="stat-change positive">3 en cours</span>
                    </div>

                    <!-- üìä MOYENNE G√âN√âRALE -->
                    <div class="stat-card hover-lift">
                        <span class="stat-icon">üìä</span>
                        <span class="stat-value" id="averageValue">14.8</span>
                        <span class="stat-label">Moyenne G√©n√©rale</span>
                        <span class="stat-change positive">+1.2 ce trimestre</span>
                    </div>

                </div>

                <!-- üèÜ SECTION GAMIFICATION -->
                <div class="gamification-preview" style="background: var(--bg-card); border: 1px solid var(--border-color); border-radius: var(--radius-lg); padding: 2rem; margin: 2rem 0; position: relative; overflow: hidden;">
                    
                    <!-- ‚ú® EFFET BRILLANT -->
                    <div class="hologram" style="position: absolute; top: 0; left: 0; right: 0; bottom: 0; pointer-events: none;"></div>
                    
                    <div style="position: relative; z-index: 2;">
                        <h3 style="font-size: 1.5rem; font-weight: 700; color: var(--text-primary); margin-bottom: 1rem; display: flex; align-items: center; gap: 0.5rem;">
                            üèÜ Mes R√©compenses & Badges
                        </h3>
                        
                        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 1rem;">
                            
                            <!-- ü•á BADGES OBTENUS -->
                            <div class="achievement-card" style="background: var(--bg-tertiary); padding: 1.5rem; border-radius: var(--radius-md); text-align: center; border: 1px solid var(--border-color);">
                                <div style="font-size: 3rem; margin-bottom: 0.5rem;">ü•á</div>
                                <h4 style="color: var(--text-primary); font-weight: 600; margin-bottom: 0.5rem;">Premi√®re √âtoile</h4>
                                <p style="color: var(--text-secondary); font-size: 0.875rem;">Premier filleul parrain√©</p>
                            </div>

                            <div class="achievement-card" style="background: var(--bg-tertiary); padding: 1.5rem; border-radius: var(--radius-md); text-align: center; border: 1px solid var(--border-color);">
                                <div style="font-size: 3rem; margin-bottom: 0.5rem;">üéØ</div>
                                <h4 style="color: var(--text-primary); font-weight: 600; margin-bottom: 0.5rem;">Expert IA</h4>
                                <p style="color: var(--text-secondary); font-size: 0.875rem;">100+ interactions IA</p>
                            </div>

                            <div class="achievement-card" style="background: var(--bg-tertiary); padding: 1.5rem; border-radius: var(--radius-md); text-align: center; border: 1px solid var(--border-color); opacity: 0.5;">
                                <div style="font-size: 3rem; margin-bottom: 0.5rem;">üíé</div>
                                <h4 style="color: var(--text-secondary); font-weight: 600; margin-bottom: 0.5rem;">Ambassadeur</h4>
                                <p style="color: var(--text-tertiary); font-size: 0.875rem;">10 filleuls (7/10)</p>
                            </div>

                        </div>

                        <!-- üéØ PROGRESSION -->
                        <div style="margin-top: 1.5rem;">
                            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 0.5rem;">
                                <span style="font-size: 0.875rem; color: var(--text-primary); font-weight: 600;">Niveau actuel : Expert IA</span>
                                <span style="font-size: 0.875rem; color: var(--text-secondary);">1,247 / 2,000 XP</span>
                            </div>
                            <div style="background: var(--bg-tertiary); height: 8px; border-radius: var(--radius-full); overflow: hidden;">
                                <div style="width: 62%; height: 100%; background: linear-gradient(90deg, var(--primary-color), var(--secondary-color)); border-radius: var(--radius-full); transition: width 1s ease-out;"></div>
                            </div>
                        </div>

                    </div>
                </div>

                <!-- üí∞ APER√áU PARRAINAGE -->
                <div class="referral-preview" style="background: linear-gradient(135deg, var(--accent-color), #FCD34D); border-radius: var(--radius-lg); padding: 2rem; margin: 2rem 0; color: var(--bg-primary);">
                    <h3 style="font-size: 1.5rem; font-weight: 700; margin-bottom: 1rem; display: flex; align-items: center; gap: 0.5rem;">
                        üí∞ Mon Syst√®me de Parrainage
                    </h3>
                    
                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(180px, 1fr)); gap: 1rem; margin-bottom: 1.5rem;">
                        <div style="text-align: center;">
                            <div style="font-size: 2rem; font-weight: 800;">12,450 F</div>
                            <div style="opacity: 0.8;">Gains totaux</div>
                        </div>
                        <div style="text-align: center;">
                            <div style="font-size: 2rem; font-weight: 800;">8</div>
                            <div style="opacity: 0.8;">Filleuls actifs</div>
                        </div>
                        <div style="text-align: center;">
                            <div style="font-size: 2rem; font-weight: 800;">850 F</div>
                            <div style="opacity: 0.8;">Ce mois</div>
                        </div>
                    </div>

                    <button onclick="showSection('parrainage')" style="background: var(--bg-primary); color: var(--accent-color); padding: 0.75rem 1.5rem; border: none; border-radius: var(--radius-md); font-weight: 600; cursor: pointer; transition: all var(--transition-base);">
                        üöÄ G√©rer mon parrainage
                    </button>
                </div>

            </section>

            <!-- üéì SECTION MON PROFIL -->
            <section class="content-section" id="profil-section">
                <h2 class="section-title">
                    <span>üë§</span>
                    Mon Profil
                </h2>

                <div class="dashboard-grid">
                    
                    <!-- üìù INFORMATIONS PERSONNELLES -->
                    <div class="card">
                        <div class="card-header">
                            <h3 class="card-title">Informations Personnelles</h3>
                        </div>
                        <div class="form-group">
                            <label class="form-label">Nom complet</label>
                            <input type="text" class="form-input" value="Jean-Baptiste DOSSO" id="fullName">
                        </div>
                        <div class="form-group">
                            <label class="form-label">Email</label>
                            <input type="email" class="form-input" value="jean.baptiste@example.com" id="userEmail">
                        </div>
                        <div class="form-group">
                            <label class="form-label">T√©l√©phone</label>
                            <input type="tel" class="form-input" value="+225 07 07 07 07 07" id="userPhone">
                        </div>
                        <div class="form-group">
                            <label class="form-label">Classe/Niveau</label>
                            <select class="form-select" id="userClass">
                                <option value="terminale-d">Terminale D</option>
                                <option value="terminale-c">Terminale C</option>
                                <option value="premiere-d">Premi√®re D</option>
                                <option value="premiere-c">Premi√®re C</option>
                            </select>
                        </div>
                        <button class="btn btn-primary" onclick="updateProfile()">
                            üíæ Sauvegarder
                        </button>
                    </div>

                    <!-- üè´ √âTABLISSEMENT -->
                    <div class="card">
                        <div class="card-header">
                            <h3 class="card-title">Mon √âtablissement</h3>
                        </div>
                        <div class="form-group">
                            <label class="form-label">√âtablissement</label>
                            <select class="form-select" id="userSchool">
                                <option value="lycee-mamie-adjoua">Lyc√©e Mamie Adjoua</option>
                                <option value="college-notre-dame">Coll√®ge Notre-Dame</option>
                                <option value="groupe-excellence">Groupe Scolaire Excellence</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label class="form-label">Ville</label>
                            <input type="text" class="form-input" value="Abidjan" id="userCity">
                        </div>
                        <div class="form-group">
                            <label class="form-label">Code liaison parents</label>
                            <div style="display: flex; gap: 0.5rem; align-items: center;">
                                <input type="text" class="form-input" placeholder="Code de liaison parent" id="parentCode">
                                <button class="btn btn-secondary" onclick="linkParent()" style="white-space: nowrap;">
                                    üîó Lier
                                </button>
                            </div>
                            <small style="color: var(--text-secondary); font-size: 0.75rem; margin-top: 0.25rem; display: block;">
                                Entrez le code fourni par votre parent pour recevoir ses gains de parrainage
                            </small>
                        </div>
                    </div>

                </div>
            </section>

            <!-- üí∞ SECTION PARRAINAGE COMPLET -->
            <section class="content-section" id="parrainage-section">
                <h2 class="section-title">
                    <span>üí∞</span>
                    Mon Syst√®me de Parrainage
                </h2>

                <!-- üìä OVERVIEW GAINS -->
                <div class="stats-grid" style="margin-bottom: 2rem;">
                    <div class="stat-card">
                        <span class="stat-icon">üí∞</span>
                        <span class="stat-value" id="totalEarnings">12,450</span>
                        <span class="stat-label">Gains Totaux (F)</span>
                        <span class="stat-change positive">+850 F ce mois</span>
                    </div>
                    <div class="stat-card">
                        <span class="stat-icon">üë•</span>
                        <span class="stat-value" id="activeReferrals">8</span>
                        <span class="stat-label">Filleuls Actifs</span>
                        <span class="stat-change positive">+2 cette semaine</span>
                    </div>
                    <div class="stat-card">
                        <span class="stat-icon">üí∏</span>
                        <span class="stat-value" id="withdrawableAmount">5,950</span>
                        <span class="stat-label">Montant Retirable (F)</span>
                        <span class="stat-change positive">Apr√®s r√©abonnement</span>
                    </div>
                    <div class="stat-card">
                        <span class="stat-icon">üéØ</span>
                        <span class="stat-value" id="conversionRate">15.8%</span>
                        <span class="stat-label">Taux de Conversion</span>
                        <span class="stat-change positive">+3.2% vs moyenne</span>
                    </div>
                </div>

                <div class="dashboard-grid">
                    
                    <!-- üîó MON LIEN DE PARRAINAGE -->
                    <div class="card">
                        <div class="card-header">
                            <h3 class="card-title">üîó Mon Lien de Parrainage</h3>
                        </div>
                        <div class="form-group">
                            <label class="form-label">Lien personnalis√©</label>
                            <div style="display: flex; gap: 0.5rem;">
                                <input type="text" class="form-input" value="https://etudia.com/ref/jean-baptiste-d" id="referralLink" readonly>
                                <button class="btn btn-secondary" onclick="copyReferralLink()" title="Copier le lien">
                                    üìã
                                </button>
                            </div>
                        </div>
                        
                        <!-- üì± PARTAGE RAPIDE -->
                        <div style="margin-top: 1.5rem;">
                            <h4 style="color: var(--text-primary); margin-bottom: 1rem;">Partage rapide :</h4>
                            <div style="display: flex; gap: 0.5rem; flex-wrap: wrap;">
                                <button class="btn btn-success" onclick="shareWhatsApp()" style="font-size: 0.875rem;">
                                    üì± WhatsApp
                                </button>
                                <button class="btn btn-info" onclick="shareFacebook()" style="font-size: 0.875rem;">
                                    üìò Facebook
                                </button>
                                <button class="btn btn-secondary" onclick="shareInstagram()" style="font-size: 0.875rem;">
                                    üì∑ Instagram
                                </button>
                                <button class="btn btn-secondary" onclick="generateQRCode()" style="font-size: 0.875rem;">
                                    üî≤ QR Code
                                </button>
                            </div>
                        </div>
                    </div>

                    <!-- üí∏ GESTION RETRAIT -->
                    <div class="card">
                        <div class="card-header">
                            <h3 class="card-title">üí∏ Gestion des Retraits</h3>
                        </div>
                        
                        <!-- üìä CALCUL AUTO-R√âABONNEMENT -->
                        <div class="alert alert-info" style="margin-bottom: 1rem;">
                            <span>‚ÑπÔ∏è</span>
                            <div>
                                <strong>R√©abonnement automatique :</strong><br>
                                Plan actuel : 6,500 F √ó 3 mois = 19,500 F r√©serv√©s<br>
                                Montant disponible : <strong>5,950 F</strong> (apr√®s frais 10%)
                            </div>
                        </div>

                        <div class="form-group">
                            <label class="form-label">Montant √† retirer (F)</label>
                            <input type="number" class="form-input" placeholder="Min: 1,000 F ‚Ä¢ Max: 5,950 F" id="withdrawAmount" max="5950" min="1000">
                        </div>
                        
                        <div class="form-group">
                            <label class="form-label">Mode de paiement</label>
                            <select class="form-select" id="paymentMethod">
                                <option value="orange-money">Orange Money</option>
                                <option value="mtn-money">MTN Money</option>
                                <option value="moov-money">Moov Money</option>
                                <option value="wave">Wave</option>
                            </select>
                        </div>

                        <div class="form-group">
                            <label class="form-label">Num√©ro de t√©l√©phone</label>
                            <input type="tel" class="form-input" placeholder="+225 XX XX XX XX XX" id="withdrawPhone">
                        </div>

                        <button class="btn btn-primary" onclick="requestWithdrawal()" style="width: 100%;">
                            üí∏ Demander le retrait
                        </button>
                    </div>

                </div>
            </section>

            <!-- AUTRES SECTIONS SIMPLIFI√âES -->
            <section class="content-section" id="abonnement-section">
                <h2 class="section-title"><span>üíé</span> Mon Abonnement</h2>
                <div class="card">
                    <div class="card-header"><h3 class="card-title">Plan Premium Actuel</h3></div>
                    <p style="color: var(--text-secondary); padding: 1rem;">Plan Premium : 6,500 F/mois ‚Ä¢ 1,247 interactions restantes</p>
                </div>
            </section>

            <section class="content-section" id="chat-ia-section">
                <h2 class="section-title"><span>ü§ñ</span> Chat IA DeepSeek</h2>
                <div class="card">
                    <div class="card-header"><h3 class="card-title">Interface IA Int√©gr√©e</h3></div>
                    <p style="color: var(--text-secondary); padding: 1rem;">L'interface IA est disponible en haut de cette page. Faites d√©filer vers le haut pour l'utiliser !</p>
                </div>
            </section>

            <section class="content-section" id="gamification-section">
                <h2 class="section-title"><span>üèÜ</span> Mes R√©compenses</h2>
                <div class="card">
                    <div class="card-header"><h3 class="card-title">Badges & Progression</h3></div>
                    <p style="color: var(--text-secondary); padding: 1rem;">Niveau Expert IA ‚Ä¢ 1,247/2,000 XP ‚Ä¢ 2 badges obtenus</p>
                </div>
            </section>

            <section class="content-section" id="cours-section">
                <h2 class="section-title"><span>üìö</span> Mes Cours</h2>
                <div class="card">
                    <div class="card-header"><h3 class="card-title">üöß Section en d√©veloppement</h3></div>
                    <p style="color: var(--text-secondary); text-align: center; padding: 2rem;">
                        Cette section sera d√©velopp√©e dans les prochaines versions d'√âtudIA.<br>
                        En attendant, utilisez l'interface IA pour toutes vos questions de cours !
                    </p>
                </div>
            </section>

            <section class="content-section" id="devoirs-section">
                <h2 class="section-title"><span>üìù</span> Mes Devoirs</h2>
                <div class="card">
                    <div class="card-header"><h3 class="card-title">üöß Section en d√©veloppement</h3></div>
                    <p style="color: var(--text-secondary); text-align: center; padding: 2rem;">
                        Cette section sera d√©velopp√©e dans les prochaines versions d'√âtudIA.<br>
                        En attendant, uploadez vos devoirs directement dans le chat IA pour correction !
                    </p>
                </div>
            </section>

            <section class="content-section" id="notes-section">
                <h2 class="section-title"><span>üìä</span> Mes Notes</h2>
                <div class="card">
                    <div class="card-header"><h3 class="card-title">üöß Section en d√©veloppement</h3></div>
                    <p style="color: var(--text-secondary); text-align: center; padding: 2rem;">
                        Cette section sera d√©velopp√©e dans les prochaines versions d'√âtudIA.<br>
                        Vos moyennes actuelles sont affich√©es dans le dashboard principal.
                    </p>
                </div>
            </section>

            <section class="content-section" id="planning-section">
                <h2 class="section-title"><span>üìÖ</span> Mon Planning</h2>
                <div class="card">
                    <div class="card-header"><h3 class="card-title">üöß Section en d√©veloppement</h3></div>
                    <p style="color: var(--text-secondary); text-align: center; padding: 2rem;">
                        Cette section sera d√©velopp√©e dans les prochaines versions d'√âtudIA.<br>
                        En attendant, organisez vos r√©visions avec l'assistant IA !
                    </p>
                </div>
            </section>

            <section class="content-section" id="bibliotheque-section">
                <h2 class="section-title"><span>üìñ</span> Ma Biblioth√®que</h2>
                <div class="card">
                    <div class="card-header"><h3 class="card-title">üöß Section en d√©veloppement</h3></div>
                    <p style="color: var(--text-secondary); text-align: center; padding: 2rem;">
                        Cette section sera d√©velopp√©e dans les prochaines versions d'√âtudIA.<br>
                        En attendant, uploadez directement vos documents dans le chat IA !
                    </p>
                </div>
            </section>

            <section class="content-section" id="liaison-parents-section">
                <h2 class="section-title"><span>üë®‚Äçüë©‚Äçüëß‚Äçüë¶</span> Liaison Parents</h2>
                <div class="card">
                    <div class="card-header"><h3 class="card-title">Parents Li√©s</h3></div>
                    <p style="color: var(--text-secondary); padding: 1rem;">Papa & Maman li√©s ‚Ä¢ 4,190 F re√ßus au total</p>
                </div>
            </section>

            <section class="content-section" id="statistiques-section">
                <h2 class="section-title"><span>üìà</span> Mes Statistiques</h2>
                <div class="card">
                    <div class="card-header"><h3 class="card-title">√âvolution Performances</h3></div>
                    <p style="color: var(--text-secondary); padding: 1rem;">4h32m √©tude/jour ‚Ä¢ 87% r√©ussite QCM ‚Ä¢ 12 jours cons√©cutifs</p>
                </div>
            </section>

            <section class="content-section" id="notifications-section">
                <h2 class="section-title"><span>üîî</span> Notifications</h2>
                <div class="card">
                    <div class="card-header"><h3 class="card-title">Centre de Notifications</h3></div>
                    <p style="color: var(--text-secondary); padding: 1rem;">3 nouvelles notifications ‚Ä¢ Derni√®re : Gain +500F (Yao THOMAS)</p>
                </div>
            </section>

            <section class="content-section" id="support-section">
                <h2 class="section-title"><span>üìû</span> Support</h2>
                <div class="card">
                    <div class="card-header"><h3 class="card-title">Besoin d'aide ?</h3></div>
                    <div style="padding: 1rem; display: flex; gap: 1rem; flex-wrap: wrap;">
                        <button class="btn btn-success" onclick="openWhatsAppSupport()">üì± WhatsApp</button>
                        <button class="btn btn-info" onclick="openEmailSupport()">üìß Email</button>
                        <button class="btn btn-primary" onclick="openLiveChat()">üí¨ Chat Live</button>
                    </div>
                </div>
            </section>

            <section class="content-section" id="parametres-section">
                <h2 class="section-title"><span>‚öôÔ∏è</span> Param√®tres</h2>
                <div class="card">
                    <div class="card-header"><h3 class="card-title">Configuration</h3></div>
                    <div style="padding: 1rem;">
                        <label class="form-label">Th√®me</label>
                        <select class="form-select" id="themeSelect" onchange="changeTheme()">
                            <option value="dark">üåô Sombre (actuel)</option>
                            <option value="light">‚òÄÔ∏è Clair</option>
                            <option value="auto">üîÑ Automatique</option>
                        </select>
                    </div>
                </div>
            </section>

        </main>

        <!-- üéØ MODAL PROFILE MENU -->
        <div class="profile-menu" id="profileMenu" style="position: absolute; top: 80px; right: 20px; background: var(--bg-card); border: 1px solid var(--border-color); border-radius: var(--radius-lg); padding: 1rem; z-index: var(--z-dropdown); display: none; min-width: 200px; box-shadow: var(--shadow-lg);">
            <div style="margin-bottom: 1rem; padding-bottom: 1rem; border-bottom: 1px solid var(--border-color);">
                <div style="font-weight: 600; color: var(--text-primary);">Jean-Baptiste DOSSO</div>
                <div style="font-size: 0.875rem; color: var(--text-secondary);">Plan Premium ‚Ä¢ 1,247 interactions</div>
            </div>
            <div style="space-y: 0.5rem;">
                <button onclick="showSection('profil')" style="width: 100%; text-align: left; background: none; border: none; color: var(--text-primary); padding: 0.5rem; border-radius: var(--radius-sm); cursor: pointer; transition: background var(--transition-base);">
                    üë§ Mon Profil
                </button>
                <button onclick="showSection('parametres')" style="width: 100%; text-align: left; background: none; border: none; color: var(--text-primary); padding: 0.5rem; border-radius: var(--radius-sm); cursor: pointer; transition: background var(--transition-base);">
                    ‚öôÔ∏è Param√®tres
                </button>
                <button onclick="logout()" style="width: 100%; text-align: left; background: none; border: none; color: var(--danger-color); padding: 0.5rem; border-radius: var(--radius-sm); cursor: pointer; transition: background var(--transition-base);">
                    üö™ D√©connexion
                </button>
            </div>
        </div>

    </div>

    <!-- üìé INPUT FILE CACH√â -->
    <input type="file" id="fileInput" style="display: none;" accept=".pdf,.doc,.docx,.txt,.jpg,.jpeg,.png" multiple onchange="handleFileUpload(event)">

    <!-- üîî TOAST NOTIFICATIONS CONTAINER -->
    <div class="toast-container" id="toastContainer"></div>

    <!-- üöÄ JAVASCRIPT COMPLET PARTIE 5/5 -->
    <script>
        /* ===================================================================
        üöÄ √âtudIA V4.1 - JAVASCRIPT COMPLET BACKOFFICE √âL√àVES
        Fonctionnalit√©s compl√®tes avec IA DeepSeek R1 + Syst√®me Parrainage
        Cr√©√© par @Pacousstar - Optimis√© par MonAP Chief Project Officer
        =================================================================== */

        // üéØ VARIABLES GLOBALES
        let currentSection = 'dashboard';
        let currentLearningMode = 'revision';
        let uploadedDocuments = [];
        let aiConversationHistory = [];
        let userSessionData = {
            interactions: 1247,
            todayInteractions: 23,
            totalEarnings: 12450,
            activeReferrals: 8,
            plan: 'premium'
        };

        // üîß UTILITAIRES
        function showToast(message, type = 'info', duration = 5000) {
            const toast = document.createElement('div');
            toast.className = `toast ${type}`;
            toast.innerHTML = `
                <div style="display: flex; align-items: center; gap: 0.5rem;">
                    <span>${type === 'success' ? '‚úÖ' : type === 'error' ? '‚ùå' : type === 'warning' ? '‚ö†Ô∏è' : '‚ÑπÔ∏è'}</span>
                    <span>${message}</span>
                </div>
            `;
            
            document.getElementById('toastContainer').appendChild(toast);
            
            setTimeout(() => {
                toast.style.animation = 'slideOutRight 0.3s ease-out forwards';
                setTimeout(() => toast.remove(), 300);
            }, duration);
        }

        function updateUserStats() {
            document.getElementById('remainingInteractions').textContent = userSessionData.interactions;
            document.getElementById('todayInteractions').textContent = userSessionData.todayInteractions;
            document.getElementById('remainingDaily').textContent = 50 - userSessionData.todayInteractions;
            document.getElementById('referralEarnings').textContent = `${userSessionData.totalEarnings.toLocaleString()} F`;
            document.getElementById('headerEarnings').textContent = `${userSessionData.totalEarnings.toLocaleString()} F`;
        }

        // üîß SIDEBAR & NAVIGATION
        function toggleSidebar() {
            const sidebar = document.getElementById('sidebar');
            const isMobile = window.innerWidth <= 1024;
            
            if (isMobile) {
                sidebar.classList.toggle('show');
            } else {
                sidebar.classList.toggle('collapsed');
            }
            
            const icon = document.getElementById('toggleIcon');
            if (sidebar.classList.contains('show') || sidebar.classList.contains('collapsed')) {
                icon.textContent = '‚úï';
            } else {
                icon.textContent = '‚ò∞';
            }
        }

        function showSection(sectionName) {
            // Masquer toutes les sections
            document.querySelectorAll('.content-section').forEach(section => {
                section.classList.remove('active');
            });
            
            // Afficher la section demand√©e
            const targetSection = document.getElementById(`${sectionName}-section`);
            if (targetSection) {
                targetSection.classList.add('active');
            }
            
            // Mettre √† jour navigation active
            document.querySelectorAll('.nav-link').forEach(link => {
                link.classList.remove('active');
            });
            
            const activeLink = document.querySelector(`[data-section="${sectionName}"]`);
            if (activeLink) {
                activeLink.classList.add('active');
            }
            
            currentSection = sectionName;
            
            // Masquer profile menu si ouvert
            document.getElementById('profileMenu').style.display = 'none';
            
            // Actions sp√©cifiques par section
            switch(sectionName) {
                case 'chat-ia':
                    document.getElementById('messageInput').focus();
                    break;
                case 'parrainage':
                    updateReferralStats();
                    break;
            }
            
            showToast(`Section "${sectionName}" ouverte`, 'info', 2000);
        }

        function toggleProfileMenu() {
            const menu = document.getElementById('profileMenu');
            menu.style.display = menu.style.display === 'none' || !menu.style.display ? 'block' : 'none';
        }

        function toggleChat() {
            showSection('chat-ia');
            showToast('Interface IA activ√©e ! ü§ñ', 'success');
        }

        // ü§ñ INTERFACE IA DEEPSEEK R1
        function setLearningMode(mode) {
            currentLearningMode = mode;
            
            // Mettre √† jour boutons visuellement
            document.querySelectorAll('.mode-btn').forEach(btn => {
                btn.classList.remove('active');
                btn.style.background = 'var(--bg-tertiary)';
                btn.style.color = 'var(--text-primary)';
            });
            
            const activeBtn = document.querySelector(`[data-mode="${mode}"]`);
            if (activeBtn) {
                activeBtn.classList.add('active');
                activeBtn.style.background = 'var(--primary-color)';
                activeBtn.style.color = 'white';
            }
            
            const modeNames = {
                'revision': 'R√©vision',
                'qcm': 'QCM',
                'exercices': 'Exercices',
                'redaction': 'R√©daction'
            };
            
            showToast(`Mode ${modeNames[mode]} activ√©`, 'success', 2000);
        }

        function autoResize(textarea) {
            textarea.style.height = 'auto';
            textarea.style.height = Math.min(textarea.scrollHeight, 120) + 'px';
        }

        function handleKeyDown(event) {
            if (event.ctrlKey && event.key === 'Enter') {
                event.preventDefault();
                sendMessage();
            }
        }

        async function sendMessage() {
            const input = document.getElementById('messageInput');
            const message = input.value.trim();
            
            if (!message) {
                showToast('Veuillez saisir un message', 'warning');
                return;
            }
            
            // V√©rifier limite interactions
            if (userSessionData.todayInteractions >= 50) {
                showToast('Limite quotidienne atteinte ! Passez au plan Excellence pour plus d\'interactions.', 'warning');
                return;
            }
            
            // Afficher message utilisateur
            addMessageToChat(message, 'user');
            
            // Vider l'input
            input.value = '';
            input.style.height = 'auto';
            
            // Afficher typing indicator
            const typingId = addTypingIndicator();
            
            try {
                // Appel API DeepSeek R1
                const response = await callDeepSeekAPI(message);
                
                // Supprimer typing indicator
                removeTypingIndicator(typingId);
                
                // Afficher r√©ponse IA
                addMessageToChat(response, 'ai');
                
                // Mettre √† jour stats
                userSessionData.todayInteractions++;
                userSessionData.interactions--;
                updateUserStats();
                
                showToast('R√©ponse re√ßue ! ü§ñ', 'success', 2000);
                
            } catch (error) {
                removeTypingIndicator(typingId);
                showToast('Erreur de connexion. R√©essayez dans un moment.', 'error');
                
                // R√©ponse de fallback
                const fallbackResponse = generateFallbackResponse(message);
                addMessageToChat(fallbackResponse, 'ai');
            }
        }

        async function callDeepSeekAPI(message) {
            // Construction du contexte avec documents upload√©s
            let contextualMessage = message;
            if (uploadedDocuments.length > 0) {
                contextualMessage = `[Documents fournis: ${uploadedDocuments.map(d => d.name).join(', ')}]\n\n${message}`;
            }
            
            // Syst√®me de prompt selon le mode
            const systemPrompts = {
                'revision': 'Tu es un assistant p√©dagogique sp√©cialis√© en r√©vision. Aide l\'√©l√®ve √† comprendre et m√©moriser ses cours en expliquant clairement et en posant des questions pour v√©rifier sa compr√©hension.',
                'qcm': 'Tu es un cr√©ateur de QCM √©ducatifs. Cr√©e des questions √† choix multiples pertinentes avec 4 options et explique les bonnes r√©ponses.',
                'exercices': 'Tu es un professeur qui donne des exercices pratiques. Propose des exercices adapt√©s au niveau et guide l\'√©l√®ve √©tape par √©tape.',
                'redaction': 'Tu es un assistant en r√©daction. Aide √† structurer les id√©es, corriger la grammaire et am√©liorer le style d\'√©criture.'
            };
            
            const payload = {
                model: "deepseek/deepseek-r1",
                messages: [
                    {
                        role: "system",
                        content: systemPrompts[currentLearningMode] + " Tu r√©ponds en fran√ßais et tu t'adaptes au contexte √©ducatif africain, particuli√®rement ivoirien."
                    },
                    ...aiConversationHistory,
                    {
                        role: "user",
                        content: contextualMessage
                    }
                ],
                max_tokens: 1000,
                temperature: 0.7
            };
            
            const response = await fetch("https://openrouter.ai/api/v1/chat/completions", {
                method: "POST",
                headers: {
                    "Content-Type": "application/json",
                    "Authorization": "Bearer YOUR_API_KEY", // √Ä remplacer par la vraie cl√©
                },
                body: JSON.stringify(payload)
            });
            
            if (!response.ok) {
                throw new Error(`API Error: ${response.status}`);
            }
            
            const data = await response.json();
            const aiResponse = data.choices[0].message.content;
            
            // Sauvegarder dans l'historique
            aiConversationHistory.push(
                { role: "user", content: message },
                { role: "assistant", content: aiResponse }
            );
            
            // Limiter l'historique √† 20 messages
            if (aiConversationHistory.length > 20) {
                aiConversationHistory = aiConversationHistory.slice(-20);
            }
            
            return aiResponse;
        }

        function generateFallbackResponse(message) {
            const responses = [
                "Je comprends votre question. Pouvez-vous me donner plus de d√©tails pour que je puisse mieux vous aider ?",
                "C'est une excellente question ! Laissez-moi vous expliquer √©tape par √©tape...",
                "Pour bien r√©pondre √† cette question, il faudrait que je connaisse votre niveau d'√©tude et le contexte pr√©cis.",
                "Je vais vous aider avec cela. Commen√ßons par les bases importantes √† retenir...",
                "Cette question touche √† un concept important. Permettez-moi de vous l'expliquer clairement."
            ];
            
            return responses[Math.floor(Math.random() * responses.length)];
        }

        function addMessageToChat(message, sender) {
            const container = document.getElementById('messagesContainer');
            const messageDiv = document.createElement('div');
            
            const isUser = sender === 'user';
            const avatar = isUser ? 'JD' : 'ü§ñ';
            const senderName = isUser ? 'Vous' : '√âtudIA DeepSeek R1';
            const bgColor = isUser ? 'var(--bg-tertiary)' : 'var(--bg-card)';
            
            messageDiv.className = 'message-item';
            messageDiv.style.display = 'flex';
            messageDiv.style.gap = '1rem';
            messageDiv.style.marginBottom = '1rem';
            messageDiv.style.alignItems = 'flex-start';
            
            messageDiv.innerHTML = `
                <div style="width: 40px; height: 40px; border-radius: var(--radius-full); background: ${isUser ? 'var(--bg-tertiary)' : 'linear-gradient(135deg, var(--primary-color), var(--secondary-color))'}; display: flex; align-items: center; justify-content: center; font-size: 1.25rem; flex-shrink: 0; color: ${isUser ? 'var(--text-primary)' : 'white'}; font-weight: 600;">
                    ${avatar}
                </div>
                <div style="flex: 1; background: ${bgColor}; padding: 1rem; border-radius: var(--radius-lg); border: 1px solid var(--border-color);">
                    <div style="font-weight: 600; color: ${isUser ? 'var(--text-primary)' : 'var(--primary-color)'}; margin-bottom: 0.5rem; font-size: 0.875rem;">
                        ${senderName}
                    </div>
                    <div style="color: var(--text-primary); line-height: 1.6;">
                        ${message.replace(/\n/g, '<br>')}
                    </div>
                </div>
            `;
            
            container.appendChild(messageDiv);
            container.scrollTop = container.scrollHeight;
        }

        function addTypingIndicator() {
            const container = document.getElementById('messagesContainer');
            const typingDiv = document.createElement('div');
            const typingId = 'typing-' + Date.now();
            
            typingDiv.id = typingId;
            typingDiv.className = 'message-item typing-indicator';
            typingDiv.style.display = 'flex';
            typingDiv.style.gap = '1rem';
            typingDiv.style.marginBottom = '1rem';
            typingDiv.style.alignItems = 'flex-start';
            
            typingDiv.innerHTML = `
                <div style="width: 40px; height: 40px; border-radius: var(--radius-full); background: linear-gradient(135deg, var(--primary-color), var(--secondary-color)); display: flex; align-items: center; justify-content: center; font-size: 1.25rem; flex-shrink: 0;">
                    ü§ñ
                </div>
                <div style="flex: 1; background: var(--bg-card); padding: 1rem; border-radius: var(--radius-lg); border: 1px solid var(--border-color);">
                    <div style="font-weight: 600; color: var(--primary-color); margin-bottom: 0.5rem; font-size: 0.875rem;">
                        √âtudIA DeepSeek R1
                    </div>
                    <div style="color: var(--text-secondary); display: flex; align-items: center; gap: 0.5rem;">
                        <span class="loading"></span>
                        <span>En cours de r√©flexion...</span>
                    </div>
                </div>
            `;
            
            container.appendChild(typingDiv);
            container.scrollTop = container.scrollHeight;
            
            return typingId;
        }

        function removeTypingIndicator(typingId) {
            const typingDiv = document.getElementById(typingId);
            if (typingDiv) {
                typingDiv.remove();
            }
        }

        function quickAction(text) {
            document.getElementById('messageInput').value = text;
            sendMessage();
        }

        // üìé UPLOAD DE DOCUMENTS
        function uploadDocument() {
            document.getElementById('fileInput').click();
        }

        function handleFileUpload(event) {
            const files = Array.from(event.target.files);
            
            files.forEach(file => {
                if (file.size > 10 * 1024 * 1024) { // 10MB limit
                    showToast(`Fichier "${file.name}" trop volumineux (max 10MB)`, 'error');
                    return;
                }
                
                // Simuler OCR/traitement
                const docData = {
                    id: Date.now() + Math.random(),
                    name: file.name,
                    size: file.size,
                    type: file.type,
                    uploadDate: new Date(),
                    processed: false
                };
                
                uploadedDocuments.push(docData);
                
                // Afficher le document
                displayUploadedDocument(docData);
                
                // Simuler traitement OCR
                setTimeout(() => {
                    docData.processed = true;
                    showToast(`Document "${file.name}" trait√© avec succ√®s !`, 'success');
                }, 2000);
            });
            
            // Afficher la zone documents
            document.getElementById('uploadedDocs').style.display = 'block';
            
            showToast(`${files.length} document(s) upload√©(s)`, 'success');
        }

        function displayUploadedDocument(doc) {
            const docsList = document.getElementById('docsList');
            const docElement = document.createElement('div');
            
            docElement.style.display = 'flex';
            docElement.style.alignItems = 'center';
            docElement.style.gap = '0.5rem';
            docElement.style.background = 'var(--bg-tertiary)';
            docElement.style.padding = '0.5rem';
            docElement.style.borderRadius = 'var(--radius-sm)';
            docElement.style.border = '1px solid var(--border-color)';
            
            docElement.innerHTML = `
                <span>üìÑ</span>
                <span style="font-size: 0.875rem; color: var(--text-primary);">${doc.name}</span>
                <button onclick="removeDocument('${doc.id}')" style="background: var(--danger-color); color: white; border: none; border-radius: var(--radius-sm); padding: 0.25rem 0.5rem; font-size: 0.75rem; cursor: pointer;">
                    ‚úï
                </button>
            `;
            
            docElement.id = `doc-${doc.id}`;
            docsList.appendChild(docElement);
        }

        function removeDocument(docId) {
            uploadedDocuments = uploadedDocuments.filter(doc => doc.id != docId);
            document.getElementById(`doc-${docId}`).remove();
            
            if (uploadedDocuments.length === 0) {
                document.getElementById('uploadedDocs').style.display = 'none';
            }
            
            showToast('Document supprim√©', 'info', 2000);
        }

        // üí∞ SYST√àME PARRAINAGE
        function updateReferralStats() {
            // Simulation mise √† jour donn√©es en temps r√©el
            const stats = {
                totalEarnings: 12450,
                activeReferrals: 8,
                withdrawableAmount: 5950,
                conversionRate: 15.8
            };
            
            document.getElementById('totalEarnings').textContent = stats.totalEarnings.toLocaleString();
            document.getElementById('activeReferrals').textContent = stats.activeReferrals;
            document.getElementById('withdrawableAmount').textContent = stats.withdrawableAmount.toLocaleString();
            document.getElementById('conversionRate').textContent = stats.conversionRate + '%';
        }

        function copyReferralLink() {
            const link = document.getElementById('referralLink').value;
            navigator.clipboard.writeText(link).then(() => {
                showToast('Lien copi√© dans le presse-papier ! üìã', 'success');
            }).catch(() => {
                showToast('Erreur lors de la copie', 'error');
            });
        }

        function shareWhatsApp() {
            const link = document.getElementById('referralLink').value;
            const message = `üéì Rejoins-moi sur √âtudIA, la plateforme IA √©ducative r√©volutionnaire pour l'Afrique ! üöÄ\n\n${link}`;
            const whatsappURL = `https://wa.me/?text=${encodeURIComponent(message)}`;
            window.open(whatsappURL, '_blank');
            showToast('WhatsApp ouvert ! üì±', 'success');
        }

        function shareFacebook() {
            const link = document.getElementById('referralLink').value;
            const facebookURL = `https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent(link)}`;
            window.open(facebookURL, '_blank');
            showToast('Facebook ouvert ! üìò', 'success');
        }

        function shareInstagram() {
            showToast('Copiez le lien et partagez-le dans votre story Instagram ! üì∑', 'info');
            copyReferralLink();
        }

        function generateQRCode() {
            showToast('QR Code g√©n√©r√© ! Scannez pour partager facilement üî≤', 'success');
            // Ici on int√©grerait une librairie QR Code
        }

        function requestWithdrawal() {
            const amount = document.getElementById('withdrawAmount').value;
            const method = document.getElementById('paymentMethod').value;
            const phone = document.getElementById('withdrawPhone').value;
            
            if (!amount || amount < 1000) {
                showToast('Montant minimum : 1,000 F', 'warning');
                return;
            }
            
            if (!phone) {
                showToast('Num√©ro de t√©l√©phone requis', 'warning');
                return;
            }
            
            showToast(`Demande de retrait de ${parseInt(amount).toLocaleString()} F envoy√©e ! üí∏`, 'success');
            
            // R√©initialiser le formulaire
            document.getElementById('withdrawAmount').value = '';
            document.getElementById('withdrawPhone').value = '';
        }

        // üë§ PROFIL & PARAM√àTRES
        function updateProfile() {
            const name = document.getElementById('fullName').value;
            const email = document.getElementById('userEmail').value;
            
            if (!name || !email) {
                showToast('Veuillez remplir tous les champs obligatoires', 'warning');
                return;
            }
            
            showToast('Profil mis √† jour avec succ√®s ! üíæ', 'success');
        }

        function linkParent() {
            const code = document.getElementById('parentCode').value;
            
            if (!code) {
                showToast('Veuillez saisir le code de liaison', 'warning');
                return;
            }
            
            showToast('Liaison parent √©tablie avec succ√®s ! üë®‚Äçüë©‚Äçüëß‚Äçüë¶', 'success');
            document.getElementById('parentCode').value = '';
        }

        function changeTheme() {
            const theme = document.getElementById('themeSelect').value;
            showToast(`Th√®me "${theme}" appliqu√© ! üé®`, 'success');
        }

        // üìû SUPPORT
        function openWhatsAppSupport() {
            const supportURL = 'https://wa.me/2250707070707?text=Bonjour,%20j\'ai%20besoin%20d\'aide%20avec%20√âtudIA';
            window.open(supportURL, '_blank');
            showToast('WhatsApp Support ouvert ! üì±', 'success');
        }

        function openEmailSupport() {
            const emailURL = 'mailto:support@etudia.com?subject=Demande de support √âtudIA';
            window.open(emailURL);
            showToast('Email ouvert ! üìß', 'success');
        }

        function openLiveChat() {
            showToast('Chat live sera disponible prochainement ! üí¨', 'info');
        }

        function showNotifications() {
            showSection('notifications');
        }

        function logout() {
            if (confirm('üö™ √ätes-vous s√ªr de vouloir vous d√©connecter ?')) {
                showToast('D√©connexion en cours...', 'info');
                setTimeout(() => {
                    window.location.href = '/login';
                }, 2000);
            }
        }

        // üì± RESPONSIVE & EVENTS
        window.addEventListener('resize', function() {
            const sidebar = document.getElementById('sidebar');
            const isMobile = window.innerWidth <= 1024;
            
            if (!isMobile) {
                sidebar.classList.remove('show');
                document.getElementById('toggleIcon').textContent = '‚ò∞';
            }
        });

        // Fermer profile menu si clic ailleurs
        document.addEventListener('click', function(event) {
            const profileMenu = document.getElementById('profileMenu');
            const profileTrigger = document.querySelector('.profile-trigger');
            
            if (!profileTrigger.contains(event.target)) {
                profileMenu.style.display = 'none';
            }
        });

        // üöÄ INITIALISATION
        document.addEventListener('DOMContentLoaded', function() {
            console.log('üöÄ √âtudIA V4.1 Backoffice √âl√®ves charg√© avec succ√®s !');
            
            // Animation fade-in
            document.body.style.opacity = '0';
            setTimeout(() => {
                document.body.style.transition = 'opacity 0.5s ease-out';
                document.body.style.opacity = '1';
            }, 100);
            
            // Mise √† jour initiale des stats
            updateUserStats();
            
            // Focus sur input chat si section IA
            if (currentSection === 'chat-ia') {
                document.getElementById('messageInput').focus();
            }
            
            // Message de bienvenue
            setTimeout(() => {
                showToast('üéì Bienvenue sur √âtudIA V4.1 ! Pr√™t √† r√©volutionner ton apprentissage ?', 'success', 4000);
            }, 1000);
        });

        // üîÑ SAUVEGARDE AUTOMATIQUE
        setInterval(() => {
            // Simuler sauvegarde des donn√©es utilisateur
            localStorage.setItem('etudia_session', JSON.stringify({
                currentSection,
                userSessionData,
                lastSave: Date.now()
            }));
        }, 30000); // Toutes les 30 secondes

        // üìä MISE √Ä JOUR STATS AUTO
        setInterval(() => {
            // Simuler mise √† jour temps r√©el (normalement via WebSocket)
            if (Math.random() > 0.9) {
                userSessionData.totalEarnings += Math.floor(Math.random() * 100);
                updateUserStats();
            }
        }, 120000); // Toutes les 2 minutes

        console.log('‚úÖ √âtudIA V4.1 - Toutes les fonctionnalit√©s charg√©es !');
        console.log('üá®üáÆ Made with ‚ù§Ô∏è in C√¥te d\'Ivoire by @Pacousstar & MonAP');
    </script>

</body>
</html>        .badge-warning {
            background: rgba(245, 158, 11, 0.2);
            color: var(--warning-color);
        }

        .badge-info {
            background: rgba(59, 130, 246, 0.2);
            color: var(--info-color);
        }

        .badge-primary {
            background: rgba(255, 107, 53, 0.2);
            color: var(--primary-color);
        }

        /* üåü WELCOME MESSAGE */
        .welcome-message {
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            color: white;
            padding: var(--spacing-xl);
            border-radius: var(--radius-lg);
            margin-bottom: var(--spacing-xl);
            text-align: center;
            position: relative;
            overflow: hidden;
        }

        .welcome-message::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: linear-gradient(45deg, transparent, rgba(255, 255, 255, 0.1), transparent);
            animation: shimmer 3s ease-in-out infinite;
        }

        @keyframes shimmer {
            0% { transform: translateX(-100%) translateY(-100%) rotate(45deg); }
            100% { transform: translateX(100%) translateY(100%) rotate(45deg); }
        }

        .emoji-float {
            display: inline-block;
            animation: float 3s ease-in-out infinite;
        }

        @keyframes float {
            0%, 100% { transform: translateY(0px); }
            50% { transform: translateY(-10px); }
        }

        /* üé≠ HOVER EFFECTS */
        .hover-lift {
            transition: transform var(--transition-base);
        }

        .hover-lift:hover {
            transform: translateY(-4px);
        }

        .hover-scale {
            transition: transform var(--transition-base);
        }

        .hover-scale:hover {
            transform: scale(1.05);
        }

        .hover-glow {
            transition: box-shadow var(--transition-base);
        }

        .hover-glow:hover {
            box-shadow: 0 0 20px rgba(255, 107, 53, 0.3);
        }

        /* üé® HOLOGRAM EFFECT */
        .hologram {
            background: linear-gradient(45deg, transparent 30%, rgba(255, 107, 53, 0.1) 50%, transparent 70%);
            animation: hologram 3s linear infinite;
        }

        @keyframes hologram {
            0% { background-position: -200px 0; }
            100% { background-position: 200px 0; }
        }

        /* üéØ LOADING STATES */
        .loading {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 2px solid var(--border-color);
            border-radius: 50%;
            border-top: 2px solid var(--primary-color);
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        /* üîß TOAST NOTIFICATIONS */
        .toast-container {
            position: fixed;
            top: 20px;
            right: 20px;
            z-index: var(--z-toast);
            display: flex;
            flex-direction: column;
            gap: var(--spacing-sm);
        }

        .toast {
            background: var(--bg-card);
            border: 1px solid var(--border-color);
            border-radius: var(--radius-md);
            padding: var(--spacing-md);
            box-shadow: var(--shadow-lg);
            max-width: 350px;
            animation: slideInRight 0.3s ease-out;
        }

        @keyframes slideInRight {
            from {
                transform: translateX(100%);
                opacity: 0;
            }
            to {
                transform: translateX(0);
                opacity: 1;
            }
        }

        .toast.success {
            border-left: 4px solid var(--success-color);
        }

        .toast.error {
            border-left: 4px solid var(--danger-color);
        }

        .toast.info {
            border-left: 4px solid var(--info-color);
        }

        .toast.warning {
            border-left: 4px solid var(--warning-color);
        }
    </style>
</head>

<body>
    <!-- üîß TOGGLES MOBILES -->
    <button class="mobile-toggle" id="mobileToggle" onclick="toggleSidebar()" aria-label="Ouvrir/Fermer menu">
        <i id="toggleIcon">‚ò∞</i>
    </button>

    <button class="chat-toggle" id="chatToggle" onclick="toggleChat()" aria-label="Ouvrir/Fermer chat IA">
        <i>ü§ñ</i>
    </button>

    <!-- üì± APP CONTAINER -->
    <div class="app-container">
        
        <!-- üéØ SIDEBAR NAVIGATION -->
        <aside class="sidebar" id="sidebar">
            
            <!-- üé® HEADER SIDEBAR -->
            <div class="sidebar-header">
                <a href="https://etudia.gsnexpertises.com" class="logo" title="Retour accueil √âtudIA">
                    √â
                </a>
                <h1 class="sidebar-title">√âtudIA V4.1</h1>
            </div>

            <!-- üåê NAVIGATION INTER-SITES √âTUDIA -->
            <nav class="etudia-quick-nav">
                <div class="nav-wrapper">
                    <a href="https://etudia.gsnexpertises.com" class="nav-btn home" title="Accueil √âtudIA">
                        üè† Accueil
                    </a>
                    <a href="https://adminetudia.gsnexpertises.com" class="nav-btn admin" target="_blank" title="Interface IA avanc√©e">
                        üöÄ Interface IA
                    </a>
                    <a href="https://appetudia.gsnexpertises.com" class="nav-btn mobile" target="_blank" title="Version mobile">
                        üì± App Mobile
                    </a>
                </div>
            </nav>

            <!-- üìã MENU PRINCIPAL NAVIGATION -->
            <ul class="nav-menu">
                
                <!-- üè† DASHBOARD -->
                <li class="nav-item">
                    <a href="#" class="nav-link active" onclick="showSection('dashboard')" data-section="dashboard">
                        <span class="nav-icon">üè†</span>
                        <span class="nav-text">Dashboard</span>
                    </a>
                </li>

                <!-- üéì MON PROFIL -->
                <li class="nav-item">
                    <a href="#" class="nav-link" onclick="showSection('profil')" data-section="profil">
                        <span class="nav-icon">üë§</span>
                        <span class="nav-text">Mon Profil</span>
                    </a>
                </li>

                <!-- üìä MON ABONNEMENT -->
                <li class="nav-item">
                    <a href="#" class="nav-link" onclick="showSection('abonnement')" data-section="abonnement">
                        <span class="nav-icon">üíé</span>
                        <span class="nav-text">Mon Abonnement</span>
                    </a>
                </li>

                <!-- ü§ñ CHAT IA DEEPSEEK R1 -->
                <li class="nav-item">
                    <a href="#" class="nav-link" onclick="showSection('chat-ia')" data-section="chat-ia">
                        <span class="nav-icon">ü§ñ</span>
                        <span class="nav-text">Chat IA DeepSeek</span>
                    </a>
                </li>

                <!-- üìö MES COURS -->
                <li class="nav-item">
                    <a href="#" class="nav-link" onclick="showSection('cours')" data-section="cours">
                        <span class="nav-icon">üìö</span>
                        <span class="nav-text">Mes Cours</span>
                    </a>
                </li>

                <!-- üìù MES DEVOIRS -->
                <li class="nav-item">
                    <a href="#" class="nav-link" onclick="showSection('devoirs')" data-section="devoirs">
                        <span class="nav-icon">üìù</span>
                        <span class="nav-text">Mes Devoirs</span>
                    </a>
                </li>

                <!-- üìä MES NOTES -->
                <li class="nav-item">
                    <a href="#" class="nav-link" onclick="showSection('notes')" data-section="notes">
                        <span class="nav-icon">üìä</span>
                        <span class="nav-text">Mes Notes</span>
                    </a>
                </li>

                <!-- üìÖ MON PLANNING -->
                <li class="nav-item">
                    <a href="#" class="nav-link" onclick="showSection('planning')" data-section="planning">
                        <span class="nav-icon">üìÖ</span>
                        <span class="nav-text">Mon Planning</span>
                    </a>
                </li>

                <!-- üí∞ PARRAINAGE -->
                <li class="nav-item">
                    <a href="#" class="nav-link" onclick="showSection('parrainage')" data-section="parrainage">
                        <span class="nav-icon">üí∞</span>
                        <span class="nav-text">Mon Parrainage</span>
                    </a>
                </li>

                <!-- üèÜ GAMIFICATION -->
                <li class="nav-item">
                    <a href="#" class="nav-link" onclick="showSection('gamification')" data-section="gamification">
                        <span class="nav-icon">üèÜ</span>
                        <span class="nav-text">Mes R√©compenses</span>
                    </a>
                </li>

                <!-- üìñ BIBLIOTH√àQUE -->
                <li class="nav-item">
                    <a href="#" class="nav-link" onclick="showSection('bibliotheque')" data-section="bibliotheque">
                        <span class="nav-icon">üìñ</span>
                        <span class="nav-text">Biblioth√®que</span>
                    </a>
                </li>

                <!-- üë®‚Äçüë©‚Äçüëß‚Äçüë¶ LIAISON PARENTS -->
                <li class="nav-item">
                    <a href="#" class="nav-link" onclick="showSection('liaison-parents')" data-section="liaison-parents">
                        <span class="nav-icon">üë®‚Äçüë©‚Äçüëß‚Äçüë¶</span>
                        <span class="nav-text">Liaison Parents</span>
                    </a>
                </li>

                <!-- üìä MES STATISTIQUES -->
                <li class="nav-item">
                    <a href="#" class="nav-link" onclick="showSection('statistiques')" data-section="statistiques">
                        <span class="nav-icon">üìà</span>
                        <span class="nav-text">Mes Statistiques</span>
                    </a>
                </li>

                <!-- üîî NOTIFICATIONS -->
                <li class="nav-item">
                    <a href="#" class="nav-link" onclick="showSection('notifications')" data-section="notifications">
                        <span class="nav-icon">üîî</span>
                        <span class="nav-text">Notifications</span>
                        <span class="badge badge-warning" style="margin-left: auto;">3</span>
                    </a>
                </li>

                <!-- üìû SUPPORT -->
                <li class="nav-item">
                    <a href="#" class="nav-link" onclick="showSection('support')" data-section="support">
                        <span class="nav-icon">üìû</span>
                        <span class="nav-text">Support</span>
                    </a>
                </li>

                <!-- ‚öôÔ∏è PARAM√àTRES -->
                <li class="nav-item">
                    <a href="#" class="nav-link" onclick="showSection('parametres')" data-section="parametres">
                        <span class="nav-icon">‚öôÔ∏è</span>
                        <span class="nav-text">Param√®tres</span>
                    </a>
                </li>

            </ul>

            <!-- üéØ SECTION INFORMATIONS UTILISATEUR -->
            <div class="user-info" style="padding: var(--spacing-lg); border-top: 1px solid var(--border-color); margin-top: auto;">
                
                <!-- üìä STATS RAPIDES -->
                <div class="quick-stats" style="margin-bottom: var(--spacing-lg);">
                    <div class="stat-item" style="display: flex; justify-content: space-between; align-items: center; margin-bottom: var(--spacing-sm);">
                        <span style="font-size: var(--font-size-sm); color: var(--text-secondary);">Plan actuel</span>
                        <span id="currentPlan" style="font-size: var(--font-size-sm); color: var(--primary-color); font-weight: 600;">Premium</span>
                    </div>
                    <div class="stat-item" style="display: flex; justify-content: space-between; align-items: center; margin-bottom: var(--spacing-sm);">
                        <span style="font-size: var(--font-size-sm); color: var(--text-secondary);">Interactions restantes</span>
                        <span id="remainingInteractions" style="font-size: var(--font-size-sm); color: var(--success-color); font-weight: 600;">1,247</span>
                    </div>
                    <div class="stat-item" style="display: flex; justify-content: space-between; align-items: center; margin-bottom: var(--spacing-sm);">
                        <span style="font-size: var(--font-size-sm); color: var(--text-secondary);">Gains parrainage</span>
                        <span id="referralEarnings" style="font-size: var(--font-size-sm); color: var(--accent-color); font-weight: 600;">12,450 F</span>
                    </div>
                </div>

                <!-- üë§ PROFIL UTILISATEUR -->
                <div class="user-profile" style="display: flex; align-items: center; gap: var(--spacing-sm); padding: var(--spacing-md); background: var(--bg-tertiary); border-radius: var(--radius-md);">
                    <div class="profile-avatar" style="width: 48px; height: 48px; background: linear-gradient(135deg, var(--primary-color), var(--secondary-color)); border-radius: var(--radius-full); display: flex; align-items: center; justify-content: center; font-weight: 700; color: white; font-size: var(--font-size-lg);">
                        JD
                    </div>
                    <div class="profile-info" style="flex: 1; min-width: 0;">
                        <div class="profile-name" style="font-weight: 600; color: var(--text-primary); font-size: var(--font-size-sm); line-height: 1.4;" id="userName">
                            Jean-Baptiste DOSSO
                        </div>
                        <div class="profile-status" style="font-size: var(--font-size-xs); color: var(--text-secondary); display: flex; align-items: center; gap: var(--spacing-xs);">
                            <span class="status-dot" style="width: 6px; height: 6px; background: var(--success-color); border-radius: var(--radius-full);"></span>
                            En ligne
                        </div>
                    </div>
                </div>

                <!-- üö™ BOUTON D√âCONNEXION -->
                <button class="logout-btn" onclick="logout()" style="width: 100%; margin-top: var(--spacing-md); padding: var(--spacing-sm); background: var(--bg-tertiary); border: 1px solid var(--border-color); border-radius: var(--radius-md); color: var(--text-secondary); font-size: var(--font-size-sm); cursor: pointer; transition: all var(--transition-base); display: flex; align-items: center; justify-content: center; gap: var(--spacing-sm);">
                    <span>üö™</span>
                    <span class="nav-text">D√©connexion</span>
                </button>

            </div>

        </aside>

        <!-- üìä CONTENU PRINCIPAL -->
        <main class="main-content">
            
            <!-- üéØ HEADER DASHBOARD -->
            <header class="header">
                <div class="header-left">
                    <h1 class="header-title">
                        <span class="emoji-float">üéì</span>
                        Mon Espace √âtudIA
                        <span class="badge badge-success" style="font-size: 0.75rem; margin-left: 1rem;">V4.1</span>
                    </h1>
                </div>
                
                <div class="header-actions">
                    <!-- üîî NOTIFICATIONS -->
                    <div class="notification-badge" onclick="showNotifications()" title="Notifications">
                        <span style="font-size: 1.5rem;">üîî</span>
                        <span class="badge-count">3</span>
                    </div>
                    
                    <!-- üí∞ GAINS RAPIDES -->
                    <div class="quick-earnings" style="display: flex; align-items: center; gap: 0.5rem; padding: 0.5rem 1rem; background: var(--bg-tertiary); border-radius: var(--radius-md); cursor: pointer;" onclick="showSection('parrainage')">
                        <span>üí∞</span>
                        <span style="font-size: 0.875rem; font-weight: 600; color: var(--accent-color);" id="headerEarnings">12,450 F</span>
                    </div>
                    
                    <!-- üë§ PROFIL DROPDOWN -->
                    <div class="profile-dropdown">
                        <div class="profile-trigger" onclick="toggleProfileMenu()">
                            <div class="profile-avatar">JD</div>
                            <div style="display: flex; flex-direction: column; align-items: flex-start;">
                                <span style="font-size: 0.875rem; font-weight: 600; color: var(--text-primary);">Jean-Baptiste</span>
                                <span style="font-size: 0.75rem; color: var(--text-secondary);">Premium</span>
                            </div>
                            <span style="font-size: 1rem; color: var(--text-secondary);">‚ñº</span>
                        </div>
                    </div>
                </div>
            </header>

            <!-- üåü INTERFACE IA DEEPSEEK R1 INT√âGR√âE -->
            <section class="ai-interface fade-in">
                
                <!-- üé® HEADER IA -->
                <div class="ai-header">
                    <div class="ai-title">
                        <span>ü§ñ</span>
                        Assistant IA DeepSeek R1
                    </div>
                    <div class="ai-status">
                        <span class="status-dot"></span>
                        Op√©rationnel
                    </div>
                </div>

                <!-- üìä STATISTIQUES IA -->
                <div class="ai-stats" style="display: flex; gap: 1rem; padding: 1rem; background: var(--bg-tertiary); border-bottom: 1px solid var(--border-color);">
                    <div class="ai-stat">
                        <span style="font-size: 0.75rem; color: var(--text-secondary);">Interactions aujourd'hui</span>
                        <span style="font-size: 1.25rem; font-weight: 700; color: var(--primary-color);" id="todayInteractions">23</span>
                    </div>
                    <div class="ai-stat">
                        <span style="font-size: 0.75rem; color: var(--text-secondary);">Restantes</span>
                        <span style="font-size: 1.25rem; font-weight: 700; color: var(--success-color);" id="remainingDaily">27</span>
                    </div>
                    <div class="ai-stat">
                        <span style="font-size: 0.75rem; color: var(--text-secondary);">Pr√©cision</span>
                        <span style="font-size: 1.25rem; font-weight: 700; color: var(--info-color);">94%</span>
                    </div>
                </div>

                <!-- üéØ MODES D'APPRENTISSAGE -->
                <div class="learning-modes" style="padding: 1rem; background: var(--bg-card); border-bottom: 1px solid var(--border-color);">
                    <div style="margin-bottom: 1rem;">
                        <span style="font-size: 0.875rem; font-weight: 600; color: var(--text-primary);">Mode d'apprentissage :</span>
                    </div>
                    <div style="display: flex; gap: 0.5rem; flex-wrap: wrap;">
                        <button class="mode-btn active" data-mode="revision" onclick="setLearningMode('revision')" style="padding: 0.5rem 1rem; border: 1px solid var(--border-color); background: var(--primary-color); color: white; border-radius: var(--radius-md); cursor: pointer; font-size: 0.875rem; font-weight: 500; transition: all var(--transition-base);">
                            üîÑ R√©vision
                        </button>
                        <button class="mode-btn" data-mode="qcm" onclick="setLearningMode('qcm')" style="padding: 0.5rem 1rem; border: 1px solid var(--border-color); background: var(--bg-tertiary); color: var(--text-primary); border-radius: var(--radius-md); cursor: pointer; font-size: 0.875rem; font-weight: 500; transition: all var(--transition-base);">
                            üìù QCM
                        </button>
                        <button class="mode-btn" data-mode="exercices" onclick="setLearningMode('exercices')" style="padding: 0.5rem 1rem; border: 1px solid var(--border-color); background: var(--bg-tertiary); color: var(--text-primary); border-radius: var(--radius-md); cursor: pointer; font-size: 0.875rem; font-weight: 500; transition: all var(--transition-base);">
                            ‚úçÔ∏è Exercices
                        </button>
                        <button class="mode-btn" data-mode="redaction" onclick="setLearningMode('redaction')" style="padding: 0.5rem 1rem; border: 1px solid var(--border-color); background: var(--bg-tertiary); color: var(--text-primary); border-radius: var(--radius-md); cursor: pointer; font-size: 0.875rem; font-weight: 500; transition: all var(--transition-base);">
                            üìñ R√©daction
                        </button>
                    </div>
                </div>

                <!-- üí¨ CHAT INTERFACE -->
                <div class="chat-container" style="display: flex; flex-direction: column; height: 500px;">
                    
                    <!-- üìú MESSAGES CONTAINER -->
                    <div class="messages-container" style="flex: 1; overflow-y: auto; padding: 1rem; background: var(--bg-primary);" id="messagesContainer">
                        
                        <!-- üëã MESSAGE BIENVENUE -->
                        <div class="message-item ai-message" style="display: flex; gap: 1rem; margin-bottom: 1rem; align-items: flex-start;">
                            <div class="message-avatar" style="width: 40px; height: 40px; border-radius: var(--radius-full); background: linear-gradient(135deg, var(--primary-color), var(--secondary-color)); display: flex; align-items: center; justify-content: center; font-size: 1.25rem; flex-shrink: 0;">
                                ü§ñ
                            </div>
                            <div class="message-content" style="flex: 1; background: var(--bg-card); padding: 1rem; border-radius: var(--radius-lg); border: 1px solid var(--border-color);">
                                <div style="font-weight: 600; color: var(--primary-color); margin-bottom: 0.5rem; font-size: 0.875rem;">
                                    √âtudIA DeepSeek R1
                                </div>
                                <div style="color: var(--text-primary); line-height: 1.6;">
                                    üëã Salut Jean-Baptiste ! Je suis ton assistant IA personnel. Je peux t'aider avec :
                                    <br><br>
                                    ‚Ä¢ üìö Explications de cours d√©taill√©es
                                    <br>‚Ä¢ üìù Correction de devoirs
                                    <br>‚Ä¢ üß† M√©thodes d'apprentissage
                                    <br>‚Ä¢ üìä Analyse de documents
                                    <br><br>
                                    <strong>Pose-moi ta premi√®re question ! üöÄ</strong>
                                </div>
                            </div>
                        </div>

                    </div>

                    <!-- üì§ INPUT CONTAINER -->
                    <div class="input-container" style="border-top: 1px solid var(--border-color); background: var(--bg-card); padding: 1rem;">
                        
                        <!-- üìé DOCUMENTS UPLOAD√âS -->
                        <div class="uploaded-docs" id="uploadedDocs" style="margin-bottom: 1rem; display: none;">
                            <div style="font-size: 0.875rem; color: var(--text-secondary); margin-bottom: 0.5rem;">Documents s√©lectionn√©s :</div>
                            <div id="docsList" style="display: flex; flex-wrap: wrap; gap: 0.5rem;"></div>
                        </div>

                        <!-- üé§ INPUT PRINCIPAL -->
                        <div style="display: flex; gap: 1rem; align-items: flex-end;">
                            
                            <!-- üìù TEXTAREA -->
                            <div style="flex: 1;">
                                <textarea 
                                    id="messageInput" 
                                    placeholder="Pose ta question √† √âtudIA... (Ctrl+Entr√©e pour envoyer)"
                                    style="width: 100%; min-height: 60px; max-height: 120px; padding: 1rem; background: var(--bg-tertiary); border: 1px solid var(--border-color); border-radius: var(--radius-md); color: var(--text-primary); font-family: inherit; font-size: 1rem; resize: vertical; transition: all var(--transition-base);"
                                    onkeydown="handleKeyDown(event)"
                                    oninput="autoResize(this)"
                                ></textarea>
                            </div>

                            <!-- üîß ACTIONS CONTAINER -->
                            <div style="display: flex; flex-direction: column; gap: 0.5rem;">
                                
                                <!-- üìé UPLOAD DOCS -->
                                <button onclick="uploadDocument()" style="width: 48px; height: 48px; border: 1px solid var(--border-color); background: var(--bg-tertiary); border-radius: var(--radius-md); cursor: pointer; display: flex; align-items: center; justify-content: center; font-size: 1.25rem; transition: all var(--transition-base);" title="Uploader document">
                                    üìé
                                </button>
                                
                                <!-- üì§ SEND BUTTON -->
                                <button onclick="sendMessage()" id="sendBtn" style="width: 48px; height: 48px; border: none; background: var(--primary-color); border-radius: var(--radius-md); cursor: pointer; display: flex; align-items: center; justify-content: center; font-size: 1.25rem; color: white; transition: all var(--transition-base);" title="Envoyer message">
                                    üì§
                                </button>
                                
                            </div>
                        </div>

                        <!-- ‚ö° ACTIONS RAPIDES -->
                        <div class="quick-actions" style="margin-top: 1rem; display: flex; gap: 0.5rem; flex-wrap: wrap;">
                            <button onclick="quickAction('Explique-moi ce cours')" style="padding: 0.5rem 1rem; background: var(--bg-tertiary); border: 1px solid var(--border-color); border-radius: var(--radius-md); color: var(--text-primary); cursor: pointer; font-size: 0.875rem; transition: all var(--transition-base);">
                                üí° Explique ce cours
                            </button>
                            <button onclick="quickAction('Corrige mon devoir')" style="padding: 0.5rem 1rem; background: var(--bg-tertiary); border: 1px solid var(--border-color); border-radius: var(--radius-md); color: var(--text-primary); cursor: pointer; font-size: 0.875rem; transition: all var(--transition-base);">
                                ‚úÖ Corrige mon devoir
                            </button>
                            <button onclick="quickAction('Cr√©er un QCM')" style="padding: 0.5rem 1rem; background: var(--bg-tertiary); border: 1px solid var(--border-color); border-radius: var(--radius-md); color: var(--text-primary); cursor: pointer; font-size: 0.875rem; transition: all var(--transition-base);">
                                üìù Cr√©er un QCM
                            </button>
                            <button onclick="quickAction('M√©thode r√©vision')" style="padding: 0.5rem 1rem; background: var(--bg-tertiary); border: 1px solid var(--border-<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="√âtudIA V4.1 - Backoffice √âl√®ves avec IA DeepSeek R1 int√©gr√©e et syst√®me parrainage">
    <meta name="keywords" content="√âtudIA, √©ducation, intelligence artificielle, Afrique, √©l√®ves, backoffice">
    <meta name="author" content="Pacousstar & MonAP - Made in C√¥te d'Ivoire">
    <title>üéì Mon Espace √âtudIA - Dashboard √âl√®ve V4.1</title>
    
    <!-- Favicons -->
    <link rel="icon" type="image/x-icon" href="/favicon.ico">
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
    
    <!-- Progressive Web App -->
    <meta name="theme-color" content="#FF6B35">
    <link rel="manifest" href="/manifest.json">
    
    <!-- Fonts Pr√©charg√©es -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    
    <style>
        /* ===================================================================
        üé® √âtudIA V4.1 - CSS COMPLET BACKOFFICE √âL√àVES
        Design Tesla-inspired avec int√©gration IA DeepSeek R1
        Cr√©√© par @Pacousstar - Optimis√© par MonAP Chief Project Officer
        =================================================================== */

        /* üéØ CSS VARIABLES - TH√àME √âTUDIA */
        :root {
            --primary-color: #FF6B35;
            --secondary-color: #10B981;
            --accent-color: #F59E0B;
            --danger-color: #EF4444;
            --success-color: #22C55E;
            --warning-color: #F59E0B;
            --info-color: #3B82F6;
            
            --bg-primary: #0F0F0F;
            --bg-secondary: #1A1A1A;
            --bg-tertiary: #2A2A2A;
            --bg-card: #1E1E1E;
            --bg-modal: rgba(0, 0, 0, 0.9);
            
            --text-primary: #FFFFFF;
            --text-secondary: #B3B3B3;
            --text-tertiary: #666666;
            --text-accent: var(--primary-color);
            
            --border-color: #333333;
            --border-hover: #444444;
            --shadow-sm: 0 2px 8px rgba(255, 107, 53, 0.1);
            --shadow-md: 0 4px 16px rgba(255, 107, 53, 0.15);
            --shadow-lg: 0 8px 32px rgba(255, 107, 53, 0.2);
            --shadow-xl: 0 16px 64px rgba(255, 107, 53, 0.25);
            
            --spacing-xs: 0.25rem;
            --spacing-sm: 0.5rem;
            --spacing-md: 1rem;
            --spacing-lg: 1.5rem;
            --spacing-xl: 2rem;
            --spacing-2xl: 3rem;
            
            --font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', system-ui, sans-serif;
            --font-size-xs: 0.75rem;
            --font-size-sm: 0.875rem;
            --font-size-base: 1rem;
            --font-size-lg: 1.125rem;
            --font-size-xl: 1.25rem;
            --font-size-2xl: 1.5rem;
            --font-size-3xl: 1.875rem;
            --font-size-4xl: 2.25rem;
            
            --transition-fast: 0.15s ease-in-out;
            --transition-base: 0.3s ease-in-out;
            --transition-slow: 0.5s ease-in-out;
            
            --z-dropdown: 1000;
            --z-sticky: 1020;
            --z-fixed: 1030;
            --z-modal-backdrop: 1040;
            --z-modal: 1050;
            --z-popover: 1060;
            --z-tooltip: 1070;
            --z-toast: 1080;
            
            --sidebar-width: 280px;
            --sidebar-collapsed: 80px;
            --header-height: 70px;
            --chat-width: 400px;
            
            --radius-sm: 6px;
            --radius-md: 12px;
            --radius-lg: 16px;
            --radius-xl: 20px;
            --radius-full: 9999px;
        }

        /* üîÑ RESET & BASE STYLES */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        html {
            scroll-behavior: smooth;
            font-size: 16px;
        }

        body {
            font-family: var(--font-family);
            background: var(--bg-primary);
            color: var(--text-primary);
            line-height: 1.6;
            overflow-x: hidden;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
            font-feature-settings: "cv02", "cv03", "cv04", "cv11";
        }

        /* üéØ SCROLLBAR STYLING */
        ::-webkit-scrollbar {
            width: 8px;
            height: 8px;
        }

        ::-webkit-scrollbar-track {
            background: var(--bg-secondary);
            border-radius: var(--radius-sm);
        }

        ::-webkit-scrollbar-thumb {
            background: var(--primary-color);
            border-radius: var(--radius-sm);
            transition: background var(--transition-fast);
        }

        ::-webkit-scrollbar-thumb:hover {
            background: #E55A2B;
        }

        /* üì± LAYOUT PRINCIPAL */
        .app-container {
            display: flex;
            min-height: 100vh;
            position: relative;
        }

        /* üîß TOGGLE BUTTONS MOBILE */
        .mobile-toggle {
            position: fixed;
            top: var(--spacing-md);
            left: var(--spacing-md);
            z-index: var(--z-fixed);
            background: var(--bg-card);
            border: 1px solid var(--border-color);
            border-radius: var(--radius-md);
            width: 48px;
            height: 48px;
            display: none;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all var(--transition-base);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
        }

        .mobile-toggle:hover {
            border-color: var(--primary-color);
            transform: translateY(-2px);
            box-shadow: var(--shadow-md);
        }

        .chat-toggle {
            position: fixed;
            top: var(--spacing-md);
            right: var(--spacing-md);
            z-index: var(--z-fixed);
            background: var(--primary-color);
            border: 1px solid var(--primary-color);
            border-radius: var(--radius-full);
            width: 56px;
            height: 56px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all var(--transition-base);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            box-shadow: var(--shadow-lg);
        }

        .chat-toggle:hover {
            background: #E55A2B;
            transform: translateY(-3px) scale(1.05);
            box-shadow: var(--shadow-xl);
        }

        /* üéØ SIDEBAR STYLES */
        .sidebar {
            width: var(--sidebar-width);
            height: 100vh;
            background: var(--bg-secondary);
            border-right: 1px solid var(--border-color);
            position: fixed;
            top: 0;
            left: 0;
            z-index: var(--z-sticky);
            transition: all var(--transition-base);
            overflow-y: auto;
            overflow-x: hidden;
        }

        .sidebar.collapsed {
            width: var(--sidebar-collapsed);
        }

        .sidebar-header {
            padding: var(--spacing-xl) var(--spacing-lg);
            border-bottom: 1px solid var(--border-color);
            display: flex;
            align-items: center;
            gap: var(--spacing-md);
        }

        .logo {
            width: 40px;
            height: 40px;
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            border-radius: var(--radius-md);
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 800;
            font-size: var(--font-size-xl);
            color: white;
            text-decoration: none;
            transition: all var(--transition-base);
        }

        .logo:hover {
            transform: rotate(10deg) scale(1.1);
            box-shadow: var(--shadow-md);
        }

        .sidebar-title {
            font-size: var(--font-size-lg);
            font-weight: 700;
            color: var(--text-primary);
            transition: opacity var(--transition-base);
        }

        .sidebar.collapsed .sidebar-title {
            opacity: 0;
            width: 0;
            overflow: hidden;
        }

        /* üìã NAVIGATION MENU */
        .nav-menu {
            padding: var(--spacing-lg) 0;
            list-style: none;
        }

        .nav-item {
            margin-bottom: var(--spacing-xs);
        }

        .nav-link {
            display: flex;
            align-items: center;
            gap: var(--spacing-md);
            padding: var(--spacing-md) var(--spacing-lg);
            color: var(--text-secondary);
            text-decoration: none;
            font-weight: 500;
            transition: all var(--transition-base);
            position: relative;
        }

        .nav-link:hover {
            color: var(--text-primary);
            background: var(--bg-tertiary);
            transform: translateX(4px);
        }

        .nav-link.active {
            color: var(--primary-color);
            background: linear-gradient(90deg, rgba(255, 107, 53, 0.1), transparent);
            border-right: 3px solid var(--primary-color);
        }

        .nav-link.active::before {
            content: '';
            position: absolute;
            left: 0;
            top: 50%;
            transform: translateY(-50%);
            width: 4px;
            height: 70%;
            background: var(--primary-color);
            border-radius: 0 var(--radius-sm) var(--radius-sm) 0;
        }

        .nav-icon {
            font-size: 20px;
            width: 24px;
            text-align: center;
            flex-shrink: 0;
        }

        .nav-text {
            transition: opacity var(--transition-base);
            white-space: nowrap;
        }

        .sidebar.collapsed .nav-text {
            opacity: 0;
            width: 0;
            overflow: hidden;
        }

        /* üé® NAVIGATION INTER-SITES */
        .etudia-quick-nav {
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            margin: var(--spacing-lg);
            border-radius: var(--radius-lg);
            padding: var(--spacing-lg);
            box-shadow: var(--shadow-lg);
        }

        .nav-wrapper {
            display: flex;
            gap: var(--spacing-sm);
            justify-content: center;
            flex-wrap: wrap;
        }

        .nav-btn {
            background: rgba(255, 255, 255, 0.9);
            color: var(--bg-primary);
            padding: var(--spacing-sm) var(--spacing-md);
            border-radius: var(--radius-md);
            text-decoration: none;
            font-weight: 600;
            font-size: var(--font-size-sm);
            transition: all var(--transition-base);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            border: none;
        }

        .nav-btn:hover {
            background: white;
            transform: translateY(-3px);
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15);
        }

        /* üìä CONTENU PRINCIPAL */
        .main-content {
            margin-left: var(--sidebar-width);
            min-height: 100vh;
            background: var(--bg-primary);
            transition: margin-left var(--transition-base);
            position: relative;
        }

        .sidebar.collapsed + .main-content {
            margin-left: var(--sidebar-collapsed);
        }

        /* üéØ HEADER */
        .header {
            height: var(--header-height);
            background: var(--bg-card);
            border-bottom: 1px solid var(--border-color);
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 0 var(--spacing-xl);
            position: sticky;
            top: 0;
            z-index: var(--z-sticky);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
        }

        .header-title {
            font-size: var(--font-size-2xl);
            font-weight: 700;
            color: var(--text-primary);
            display: flex;
            align-items: center;
            gap: var(--spacing-md);
        }

        .header-actions {
            display: flex;
            align-items: center;
            gap: var(--spacing-md);
        }

        /* üîî NOTIFICATIONS BADGE */
        .notification-badge {
            position: relative;
            cursor: pointer;
            padding: var(--spacing-sm);
            border-radius: var(--radius-md);
            transition: all var(--transition-base);
        }

        .notification-badge:hover {
            background: var(--bg-tertiary);
        }

        .notification-badge .badge-count {
            position: absolute;
            top: -2px;
            right: -2px;
            background: var(--danger-color);
            color: white;
            border-radius: var(--radius-full);
            width: 20px;
            height: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: var(--font-size-xs);
            font-weight: 600;
        }

        /* üë§ PROFILE DROPDOWN */
        .profile-dropdown {
            position: relative;
        }

        .profile-trigger {
            display: flex;
            align-items: center;
            gap: var(--spacing-sm);
            padding: var(--spacing-sm);
            border-radius: var(--radius-md);
            cursor: pointer;
            transition: all var(--transition-base);
        }

        .profile-trigger:hover {
            background: var(--bg-tertiary);
        }

        .profile-avatar {
            width: 40px;
            height: 40px;
            border-radius: var(--radius-full);
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 600;
            color: white;
            font-size: var(--font-size-lg);
        }

        /* ü§ñ INTERFACE IA INT√âGR√âE */
        .ai-interface {
            background: var(--bg-card);
            border: 1px solid var(--border-color);
            border-radius: var(--radius-lg);
            margin: var(--spacing-xl);
            overflow: hidden;
            box-shadow: var(--shadow-lg);
        }

        .ai-header {
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            padding: var(--spacing-lg);
            display: flex;
            align-items: center;
            justify-content: space-between;
            gap: var(--spacing-md);
        }

        .ai-title {
            font-size: var(--font-size-xl);
            font-weight: 700;
            color: white;
            display: flex;
            align-items: center;
            gap: var(--spacing-sm);
        }

        .ai-status {
            padding: var(--spacing-xs) var(--spacing-sm);
            background: rgba(255, 255, 255, 0.2);
            border-radius: var(--radius-md);
            font-size: var(--font-size-sm);
            font-weight: 600;
            color: white;
            display: flex;
            align-items: center;
            gap: var(--spacing-xs);
        }

        .status-dot {
            width: 8px;
            height: 8px;
            background: var(--success-color);
            border-radius: var(--radius-full);
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }

        /* üì± RESPONSIVE DESIGN */
        @media (max-width: 1024px) {
            .main-content {
                margin-left: 0;
            }
            
            .sidebar {
                transform: translateX(-100%);
            }
            
            .sidebar.show {
                transform: translateX(0);
            }
            
            .mobile-toggle {
                display: flex;
            }
            
            .nav-wrapper {
                flex-direction: column;
                align-items: center;
            }
            
            .nav-btn {
                width: 100%;
                text-align: center;
            }
        }

        /* üéØ ANIMATIONS */
        .fade-in {
            opacity: 0;
            animation: fadeIn 0.6s ease-out forwards;
        }

        @keyframes fadeIn {
            to { opacity: 1; }
        }

        .slide-up {
            transform: translateY(30px);
            opacity: 0;
            animation: slideUp 0.6s ease-out forwards;
        }

        @keyframes slideUp {
            to {
                transform: translateY(0);
                opacity: 1;
            }
        }

        /* üìä CONTENT SECTIONS */
        .content-section {
            display: none;
            padding: var(--spacing-xl);
            animation: fadeIn 0.5s ease-out;
        }

        .content-section.active {
            display: block;
        }

        .section-title {
            font-size: var(--font-size-3xl);
            font-weight: 800;
            color: var(--text-primary);
            margin-bottom: var(--spacing-xl);
            display: flex;
            align-items: center;
            gap: var(--spacing-md);
        }

        /* üìä DASHBOARD GRID */
        .dashboard-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: var(--spacing-xl);
            margin-bottom: var(--spacing-2xl);
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: var(--spacing-lg);
            margin-bottom: var(--spacing-xl);
        }

        .stat-card {
            background: var(--bg-card);
            border: 1px solid var(--border-color);
            border-radius: var(--radius-lg);
            padding: var(--spacing-lg);
            transition: all var(--transition-base);
            text-align: center;
            position: relative;
            overflow: hidden;
        }

        .stat-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: linear-gradient(90deg, var(--primary-color), var(--secondary-color));
        }

        .stat-card:hover {
            border-color: var(--primary-color);
            transform: translateY(-4px);
            box-shadow: var(--shadow-lg);
        }

        .stat-icon {
            font-size: var(--font-size-4xl);
            margin-bottom: var(--spacing-md);
            display: block;
        }

        .stat-value {
            font-size: var(--font-size-3xl);
            font-weight: 800;
            color: var(--text-primary);
            margin-bottom: var(--spacing-sm);
            display: block;
        }

        .stat-label {
            font-size: var(--font-size-sm);
            color: var(--text-secondary);
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.05em;
        }

        .stat-change {
            font-size: var(--font-size-xs);
            font-weight: 600;
            margin-top: var(--spacing-xs);
            padding: var(--spacing-xs) var(--spacing-sm);
            border-radius: var(--radius-sm);
            display: inline-block;
        }

        .stat-change.positive {
            background: rgba(34, 197, 94, 0.1);
            color: var(--success-color);
        }

        .stat-change.negative {
            background: rgba(239, 68, 68, 0.1);
            color: var(--danger-color);
        }

        /* üéØ FORM STYLES */
        .form-group {
            margin-bottom: var(--spacing-lg);
        }

        .form-label {
            display: block;
            font-size: var(--font-size-sm);
            font-weight: 600;
            color: var(--text-primary);
            margin-bottom: var(--spacing-sm);
        }

        .form-input,
        .form-select,
        .form-textarea {
            width: 100%;
            padding: var(--spacing-md);
            background: var(--bg-tertiary);
            border: 1px solid var(--border-color);
            border-radius: var(--radius-md);
            color: var(--text-primary);
            font-family: inherit;
            font-size: var(--font-size-base);
            transition: all var(--transition-base);
        }

        .form-input:focus,
        .form-select:focus,
        .form-textarea:focus {
            outline: none;
            border-color: var(--primary-color);
            box-shadow: 0 0 0 3px rgba(255, 107, 53, 0.1);
        }

        .form-input::placeholder,
        .form-textarea::placeholder {
            color: var(--text-tertiary);
        }

        .form-textarea {
            resize: vertical;
            min-height: 120px;
        }

        /* üé® TABLE STYLES */
        .table-container {
            background: var(--bg-card);
            border: 1px solid var(--border-color);
            border-radius: var(--radius-lg);
            overflow: hidden;
            margin: var(--spacing-xl) 0;
        }

        .table {
            width: 100%;
            border-collapse: collapse;
        }

        .table th,
        .table td {
            padding: var(--spacing-md);
            text-align: left;
            border-bottom: 1px solid var(--border-color);
        }

        .table th {
            background: var(--bg-tertiary);
            font-weight: 600;
            color: var(--text-primary);
            font-size: var(--font-size-sm);
            text-transform: uppercase;
            letter-spacing: 0.05em;
        }

        .table td {
            color: var(--text-secondary);
        }

        .table tbody tr:hover {
            background: var(--bg-tertiary);
        }

        .table tbody tr:last-child td {
            border-bottom: none;
        }

        /* üéØ BUTTONS */
        .btn {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: var(--spacing-sm);
            padding: var(--spacing-sm) var(--spacing-lg);
            border: none;
            border-radius: var(--radius-md);
            font-family: inherit;
            font-size: var(--font-size-sm);
            font-weight: 600;
            text-decoration: none;
            cursor: pointer;
            transition: all var(--transition-base);
            user-select: none;
            white-space: nowrap;
        }

        .btn-primary {
            background: var(--primary-color);
            color: white;
        }

        .btn-primary:hover {
            background: #E55A2B;
            transform: translateY(-2px);
            box-shadow: var(--shadow-md);
        }

        .btn-secondary {
            background: var(--bg-tertiary);
            color: var(--text-primary);
            border: 1px solid var(--border-color);
        }

        .btn-secondary:hover {
            background: var(--bg-card);
            border-color: var(--border-hover);
        }

        .btn-success {
            background: var(--success-color);
            color: white;
        }

        .btn-success:hover {
            background: #16A34A;
            transform: translateY(-2px);
        }

        .btn-info {
            background: var(--info-color);
            color: white;
        }

        .btn-info:hover {
            background: #2563EB;
            transform: translateY(-2px);
        }

        .btn-sm {
            padding: var(--spacing-xs) var(--spacing-md);
            font-size: var(--font-size-xs);
        }

        .btn-lg {
            padding: var(--spacing-md) var(--spacing-xl);
            font-size: var(--font-size-lg);
        }

        /* üìä CARD COMPONENTS */
        .card {
            background: var(--bg-card);
            border: 1px solid var(--border-color);
            border-radius: var(--radius-lg);
            padding: var(--spacing-lg);
            transition: all var(--transition-base);
        }

        .card:hover {
            border-color: var(--border-hover);
            box-shadow: var(--shadow-md);
        }

        .card-header {
            margin-bottom: var(--spacing-lg);
            padding-bottom: var(--spacing-md);
            border-bottom: 1px solid var(--border-color);
        }

        .card-title {
            font-size: var(--font-size-xl);
            font-weight: 700;
            color: var(--text-primary);
            margin-bottom: var(--spacing-sm);
        }

        /* üö® ALERTS */
        .alert {
            padding: var(--spacing-md);
            border-radius: var(--radius-md);
            margin-bottom: var(--spacing-lg);
            display: flex;
            align-items: center;
            gap: var(--spacing-sm);
            font-weight: 500;
        }

        .alert-success {
            background: rgba(34, 197, 94, 0.1);
            border: 1px solid var(--success-color);
            color: var(--success-color);
        }

        .alert-warning {
            background: rgba(245, 158, 11, 0.1);
            border: 1px solid var(--warning-color);
            color: var(--warning-color);
        }

        .alert-danger {
            background: rgba(239, 68, 68, 0.1);
            border: 1px solid var(--danger-color);
            color: var(--danger-color);
        }

        .alert-info {
            background: rgba(59, 130, 246, 0.1);
            border: 1px solid var(--info-color);
            color: var(--info-color);
        }

        /* üîî BADGES */
        .badge {
            display: inline-flex;
            align-items: center;
            padding: var(--spacing-xs) var(--spacing-sm);
            border-radius: var(--radius-full);
            font-size: var(--font-size-xs);
            font-weight: 600;
        }

        .badge-success {
            background: rgba(34, 197, 94, 0.2);
            color: var(--success-color);
        }

        .badge-warning {
            background: rgba(245, 158, 11, 0.2);
            color: var(--warning-color);
